function tryParseJSON(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(n){}return!1}function translator(options){"use strict";function ini2array(e){for(var t={},n=e&&e.split?e.split(/[\n\r]+/):[],o=0;o<n.length;o++){var r=n[o],i=r.indexOf("=");if(i>=0){var a=r.substring(0,i),s=r.substring(i+1),l=t[a];l&&(l===s?CI("Duplicate localization key",a):CE("Duplicate localization key",a)),t[a]=s}}return t}function cleanup(e){return e.replace(/(^|\s)accessnow(?=\s|$)/gi,"$1{product}").replace(/(^|\s)ericom(?=\s|$)/gi,"$1{company}")}function getLabels(){try{return globals.labels}catch(e){try{return defaults.labels}catch(t){return null}}}function TR(e,t){if(!e)return"";var n="",o=e.split("\n");return n=(o.shift()+"").trim(),n=cleanup(dictionary[n]||n),o.length>0&&o.forEach(function(e){var t=(e+"").trim();t=cleanup(dictionary[t]||t),n=n+"\n"+t}),t&&(t=tryParseJSON(t)||utils.toArray(arguments,1)),trFormat(n,t)}function translateTextNodes(e,t){if(3===e.nodeType){var n=e.nodeValue;/^\s*$/.test(n)||t(e,n)}else{var o=e.tagName;if("SCRIPT"!==o&&"STYLE"!==o)for(var r=e.childNodes,i=r.length,a=0;a<i;++a)translateTextNodes(r[a],t)}}function extract(e){function t(e,t){e.find("["+t+"]").each(function(){var e=$(this),r=n(e.attr(t));e.attr(t,r[0]),r[1]&&o.push(r.join("="))})}function n(e){var t=e.replace(/(^\W+)|(\W+$)/g,"");if(!t)return[e];for(var n="STR_"+t.replace(/\W+/g,"_").toUpperCase(),o=n,i=1;;++i){var a=r[o];if(!a)return r[o]=e,[o,e];if(a===e)return[o];o=n+"_"+i}}var o=[],r={};e=e||document,translateTextNodes(e,function(e,t){var r=n(t);e.nodeValue=r[0],r[1]&&o.push(r.join("="))});var i=$(e);t(i,"title"),t(i,"alt"),t(i,"placeholder");var a=new Blob([o.join("\n")],{type:"text/plain"});window.open(window.URL.createObjectURL(a))}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),options=options||{};var dictionary={};TR.source=function(){var e="resources/lang/dictionary.";return function(t){return t=t||TR.locale||"en-us",e+t+".txt"}}(),TR.locale=function(){var e=(options.locale||navigator.userLanguage||navigator.language||"en-us").toLowerCase();switch(e){case"en":case"null":return"en-us";case"cn":case"zh":return"zh-cn";case"ja":case"jp":return"ja-jp";case"ko":return"ko-kr";default:return e}}(),TR.preferredLocale=TR.locale;var trFormat=function(){var reArgs=/{([^}]+)}/g,labels=getLabels()||{};return labels.company&&("companyFull"in labels||(labels.companyFull=labels.company),"official"in labels||(labels.official=labels.company+(labels.product?" "+labels.product:""))),labels=$.extend({year:(new Date).getFullYear().toString(),version:options.version||"",product:"AccessNow",server:"Access",company:"Ericom",companyFull:"Ericom Software",official:"Ericom® AccessNow™"},labels),function(s,args){return s.replace(reArgs,function(match,marker){var val,first=marker.charCodeAt(0);if(48<=first&&first<=57){var i=parseInt(marker,10);val=args[i],val=val?val+"":""}else val=labels[marker]||marker;if(35===val.charCodeAt(0))try{return eval(val.substr(1))}catch(e){CE("Bad expression: "+val)}return trFormat(val,args)})}}();return TR.obj=function(e){for(var t in e)if(utils.hop(e,t)){var n=TR(t);if(n!==t){var o=e[t];delete e[t],e[n]=o}}},TR.doc=function(e){function t(e,t){e.find("["+t+"]").each(function(){var e=$(this),n=e.attr(t),o=TR(n,e.attr("data-translationArgs-"+t));o!==n&&e.attr(t,o)})}e=e||document.body;var n=$(e);t(n,"title"),t(n,"alt"),t(n,"placeholder"),n.find("[data-translationArgs]").each(function(){var e=$(this),t=e.text(),n=TR(t,e.attr("data-translationArgs"));n!==t&&e.text(n)}),translateTextNodes(e,function(e,t){var n=TR(t);n!==t&&$(e).replaceWith('<span class="translation">'+n+"</span>")})},options.extract?(extract(options.root),TR.promise=$.Deferred().promise):TR.promise=$.ajax({url:TR.source(),cache:!1}).pipe(null,function(e,t){return"en-us"===TR.locale?$.Deferred().reject(e,t):(CE("Loaded dictionary for locale "+TR.locale+" "+t),TR.locale="en-us",$.ajax({url:TR.source("en-us"),cache:!1}))}).done(function(e){CI("Loaded dictionary for locale "+TR.locale),dictionary=ini2array(e),options.auto&&TR.doc(options.root)}).fail(function(e,t){var n="Loaded dictionary for locale "+TR.locale+" "+t;CE(n),alert(n)}).promise,TR}function doDisconnect(){try{_protocol.send.regular("p","g",utils.TR("STR_PAGE_UNLOADED")),_protocol&&_protocol.close("@")}catch(e){}utils.closeIfPortal()}function connect(e){"use strict";function t(e,t){for(var n in t)"on"===n.substring(0,2)&&(e[n]=t[n])}function n(e){function n(n,o){if(CI("Can't connect using WebSockets"),!globals.noHTTPS&&e.gateway)t(new WSHTTPS(e.gateway,n),e);else{var r=e.onclose;$.isFunction(r)&&r.call(this,o)}}if(!WebSocket||globals.onlyHTTPS||is.oldSafari)n(!1);else try{var o=(e.URL||(e.encryption?"wss":"ws")+"://"+e.address+":"+e.prt)+r;CI("Opening WebSocket",o);var i=new WebSocket(o,e._protocol),a=function(){var e={data:""};return function(t){e.data=t.trim(),e.data&&i.onmessage(e)}}();window.simEvent=a,"binaryType"in i&&(i.binaryType="arraybuffer"),i.onopen=function(){CI("WebSocket connected:",o),t(this,e),$.isFunction(e.onopen)&&e.onopen.apply(this,arguments)},i.onclose=function(e){n.call(this,!0,e)},i.onerror=function(e){}}catch(s){$.isFunction(e.onerror)?e.onerror(1e3===s.code||18===s.code?utils.TR("STR_MUST_USE_SSL"):s.message||utils.TR("STR_WEBSOCKET_ERROR")):$.isFunction(e.onclose)&&e.onclose()}}function o(e,n){return globals.gwusername&&(e.username=globals.gwusername),globals.authToken&&(e.username=globals.authToken),e.username=e.username||_sessionStorage.getItem("AN_lastUsername"),utils.copyObject(e,{gateway:n,URL:function(){var e=n;return e.indexOf(":")===-1&&(e+=":"+globals.gwport),"wss://"+e}(),onopen:function(){var t=e.token||(e.clientID?gwprotocol.build(!1,3,[null,null,e.serverID,e.clientID]):gwprotocol.build(!1,1,[e.username,e.password])),o=e.target||e.address,r=null;if(o){var i=o.match(/^(.+)\:(\d+)$/);i&&i.length>2&&(o=i[1],r=Number(i[2]))}var a;if(utils.doReconnect?"true"!==_sessionStorage.getItem("AN_trueReconnect")?(a=this.gwMsg=sjcl.decrypt("password",_sessionStorage.getItem("AN_Reconnect_gwMsg"),{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}),_sessionStorage.setItem("AN_doReconnect","false")):(a=gwprotocol.build(!0,5,["AccessNow",e.username||_sessionStorage.getItem("AN_lastUsername"),t,e.address,e.prt,_sessionStorage.getItem("AN_gatewaySessionKey"),"","",navigator.userAgent,"unknown","unknown",this.isHTTPS?"ssl":"wss",e.encryption?"wss":"ws",null,null,["None","VmWareView","WebConnect","Managed"][Client.kind],null,null,null,null,this.isHTTPS?2:0,null,null,_sessionStorage.getItem("AN_sessionReconnectKey"),o,r]),this.gwMsg=a):(a=e.redirected?gwprotocol.build(!0,7,["AccessNow",e.username,t,e.address,e.prt,_sessionStorage.getItem("AN_gatewaySessionKey"),"","",navigator.userAgent,"unknown","unknown",this.isHTTPS?"ssl":"wss",e.encryption?"wss":"ws",null,null,["None","VmWareView","WebConnect","Managed"][Client.kind],null,null,null,null,this.isHTTPS?2:0,null,null,_sessionStorage.getItem("AN_sessionReconnectKey"),o,r]):gwprotocol.build(!0,1,["AccessNow",e.username,t,e.address,e.prt,"","","",navigator.userAgent,"unknown","unknown",this.isHTTPS?"ssl":"wss",e.encryption?"wss":"ws",null,null,["None","VmWareView","WebConnect","Managed"][Client.kind],null,null,null,null,this.isHTTPS?2:0,null,null,null,o,r]),this.gwMsg=a),this.isHTTPS){var s="connect?target="+encodeURIComponent(o)+"&protocol="+encodeURIComponent(e._protocol);s+=globals.authToken?"&path="+encodeURIComponent("/blaze?token="+globals.authToken):"&path=/blaze/"+encodeURIComponent(o)+(r?":"+r:""),this.send(a,{target:s,reply:!0})}else this.send(this.gwMsg);$.isFunction(e.ongwopen)&&e.ongwopen.call(this,n)},onmessage:function(n){var o,r=!1;try{o=gwprotocol.parse(n.data),gwprotocol.log("Message from ESG: ",n.data),o.values[6]&&_sessionStorage.setItem("AN_gatewaySessionKey",o.values[6]),o.values[24]&&_sessionStorage.setItem("AN_sessionReconnectKey",o.values[24]),"0"===o.values[7]?(_sessionStorage.setItem("AN_trueReconnect","true"),this.setID&&this.setID(o.values[6]),t(this,e),$.isFunction(e.onopen)&&e.onopen.call(this,o.values[23],o.values[17])):"26"===o.values[7]?(_sessionStorage.setItem("AN_trueReconnect","false"),$.isFunction(e.onopen)&&e.onopen.call(this,o.values[23],o.values[17])):"8"===o.values[7]&&utils.doReconnect?(_sessionStorage.setItem("AN_trueReconnect","true"),this.isHTTPS&&this.close({reason:""})):(o=o.values[8],r=!0)}catch(i){o=i,r=!0}if(r&&$.isFunction(e.onerror)&&(r=!0,e.onerror.call(this,[!0,"Gateway: "+o])),!r&&"0"===o.values[7]&&!utils.doReconnect&&_sessionStorage){_sessionStorage.setItem("AN_Reconnect_gwMsg",sjcl.encrypt("password",this.gwMsg,{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}));var a=JSON.parse(sessionStorage.getItem("AN_Reconnect_gwMsg"));try{delete a.iv,delete a.salt,delete a.adata,delete a.cipher,delete a.iter,delete a.ks,delete a.mode,delete a.ts,delete a.v,sessionStorage.setItem("AN_Reconnect_gwMsg",JSON.stringify(a))}catch(i){console.log("No Crypto to be applied")}e.username&&_sessionStorage.setItem("AN_lastUsername",e.username)}},onerror:function(n){if(_sessionStorage.setItem("AN_doReconnect","false"),CE("Gateway error"),t(this,e),$.isFunction(e.onerror))return e.onerror.apply(this,arguments)}})}e=utils.copyObject(e),e.address=e.address.trim(),e.prt=Number(e.prt)||globals.wsport||8080,globals.singlePort||e.encryption||e.prt++,e._protocol=e._protocol||PROTOCOL,ESG_CSID&&(e._protocol+="|ESG_CSID."+ESG_CSID);var r="/blaze"+(e.target?"/"+e.target.trim():"");return e.authToken&&!utils.doReconnect&&(r+="?token="+encodeURIComponent(e.authToken)),function(){var t=(e.gateway||"").toArray().shuffleEx("*"),r=t.shift();if(r){if(t.length){var i=e.onerror;e.onerror=function(){var r=t.shift();if(r)setImmediate(function(){n(o(e,r))}),this.onclose=null;else if($.isFunction(i))return i.apply(this,arguments)}}n(o(e,r))}else n(e)}(),e}function WSHTTPS(e,t){function n(e,n,o,r){if(CE("HTTPS error",e,o),"abort"!==o){if(400==n&&"down"==e)return void this.close({reason:"STR_SESSION_DISCONNECTED"});$.isFunction(this.onerror)&&(r||(r=t?utils.TR("STR_FAILED_TO_CONNECT"):utils.TR("STR_FAILED_TO_CONNECT_HTTPS")),this.onerror(r.message||""+r)),this.close({reason:"textStatus"})}}CI("Using HTTPS: "+e),this.isHTTPS=!0;var o="ericomsecuregateway/https/";e&&e!==location.host&&(o="https://"+e+"/"+o),this._URL=o,this.URL=function(){var e=utils.ce("a");return e.href=o,e.href}(),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,this.onopen=null,this.onerror=null,this.onclose=null,this.onmessage=null;var r=this;setImmediate(function(){r.readyState=r.OPEN,$.isFunction(r.onopen)&&r.onopen()});var i,a;this.close=function(e){CI("Closing HTTPS"),i&&(i.abort(),i=null),a&&(a.abort(),a=null),this.readyState!==this.CLOSED&&setImmediate(function(){r.readyState!==r.CLOSED&&(r.readyState=r.CLOSED,$.isFunction(r.onclose)&&r.onclose(e||{}))})};var s;this.setID=function(e){s=encodeURIComponent(e)};var l=function(){var e={data:""};return function(t){e.data=t.trim(),e.data&&r.onmessage(e)}}(),c=log.toFile;this.send=function(){var e=null,t=0,r={},a=!0;return function(d,f){function p(){g=Date.now(),i=$.ajax(e),c("HTTPS sent"),e=null}if(f=f||r,e)return e.data=e.data.joinJSON(d),void(e.reply=e.reply||f.reply);var g,h=f.target;h||(h="up?seq="+t++,s&&(h+="&id="+s));var m={url:o+h,type:"post",cache:!1,data:d,reply:f.reply,context:this,success:function(t){c("HTTPS response",Date.now()-g,this.readyState),this.readyState===this.OPEN&&(m.reply&&$.isFunction(this.onmessage)&&l(t),e?p():i=null,a&&s&&(CI("Starting HTTPS polling"),a=u()))},error:function(e,t,o){c("HTTPS error",o),n.call(this,"up",e.status,t,o)}};e=m,i||p()}}();var u=function(){var e="",t=0,o=utils.isString;return function(){var i=r._URL+"down"+(s?"?id="+s:"")+"&counter="+t++;c("HTTPS poll ",i),a=$.ajax({url:i,success:function(t){c("HTTPS poll response ",i),r.readyState===r.OPEN&&(u(),o(t)&&setImmediate(function(){if(r.readyState===r.OPEN){var n=t.split(HTTPS_SEPARATOR);n[0]=e+n[0],e=n.pop(),$.isFunction(r.onmessage)&&n.forEach(l)}}))},error:function(e,t,o){c("HTTPS poll error",o),n.call(r,"down",e.status,t,o)}})}}()}function Protocol(){"use strict";function e(e){f(!0),o=o||this,a||(CI("Communication closed"),e&&e.redirect||(a=!0),e&&e.redirect&&n.triggerHandler("redirect",e.redirect),n.triggerHandler("close",[e&&e.reason])),s&&(_clearInterval(s),s=0)}var t=this,n=$(t),o=null,r=null,i=!1,a=!1,s=0,l=log.toFile,c=Array.prototype.push;this.send=function(){function e(e){s=e,a=function(){f=!0,p.timeStamp=Date.now(),s(p),f=!1},m.add=n}function n(e){c.push(s,e),s=function(e){for(var t=0;t!==c.length;++t)c[t](e)},m.add=u}function r(){!f&&d&&t.isOpen()&&(a(),g("send",d),o.send(d),d="")}var i=1,a=utils.noop,s=utils.noop,c=[],u=c.push.bind(c),d="",f=!1,p={timeStamp:0},g=function(){var e=/password:s:[^\\]*/g;return function(t,n){var o=n.replace(e,"password:s:******");l(t,o),o!==n&&(g=l)}}(),h=function(){var e=JSON.stringify,t=utils.toArrayFactory();return function(n){return e(t(n))}}(),m={add:e,lock:function(e){e?++i:--i<=0&&r()},regular:function(){var e=h(arguments);d=d.joinJSON(e),i<=0&&r()},priority:function(){var e=h(arguments);d=e.joinJSON(d),r()}};return m}();var u=this.send.regular,d=this.send.priority,f=this.send.lock,p=[],g=function(){var e=Object.create(null),n=Object.create(e);return t.hookUp=function(t,o,r){function i(e){var n=function(){var t=Object.create(e);for(var n in e)if(utils.hop(e,n)){var o=n.charCodeAt(0),r=65<=o&&o<=90?n.replace(/[^A-Z]/g,""):n.length<3?n:"";r&&(r in t&&n.length>3?CI("taken",n):t[r]=e[n])}return t}();return function(o,r){var i=n[o];return i?i.apply(e,r):(CE("Invalid instruction:",t,o),void(e[o]=utils.noop))}}o.start&&p.push(o.start);var a=i(o,t);e[t]=a,n[r||t.charAt(0).toUpperCase()]=a},function(e,t,o){var r=n[e];return r?r(t,o):(CE("Invalid channel:",e,t),void(n[e]=utils.noop))}}(),h=!1;this.setInteractive=function(e){var t=0;return function(n){h=!0,n&&0===t&&(t=_setTimeout(function(){t=0,h=!1},e))}}(globals.interactionTimeout||1e3),utils.hidden.event(function(e){e||t.setInteractive(!0)}),this.start=function(a){function v(e){function t(){var t=o,a=t[0];if(a&&"pending"!==a.state()){l("ready",a.marker());for(var u=1,d=t.length;u!==d;++u)if("pending"===t[u].state()){t=t.splice(0,u);break}if(r){switch(t.length){case 2:r.push(a,t[1]);break;case 1:r.push(a);break;default:c.apply(r,t)}t===o&&(t.length=0)}else r=t,t===o&&(i?(o=i,o.length=0,i=null):o=[]),e(0),s(n)}}function n(t){l("render",h,r.length),e(1);var n=t.timeStamp,o=h?1e3:1,s=0,c=0,u=!0;do{var d=r[c],f=d.imageCount();if(c>=o&&f>0&&s>0)break;if(s+=f,d.execute())break;u=++c<r.length}while(u&&Date.now()-n<a);return u?i=r.splice(0,c):(i=r,r=null),e(2),u&&e(0),S(n),u}e=e||utils.noop;var o=[],r=null,i=null,a=globals.numericValue("executeTimeout",500),s=utils.scheduleAnimFrame;return function(e){e.isImmediate()?e.done(e.execute):(o.push(e),e.done(t))}}function b(e){if(!e)return!1;if(!is.HTTPS)return!1;var t=location.host,n=t.indexOf(":")!==-1,o=e.indexOf(":")!==-1;return n?o||(e+=":"+globals.gwPort):o&&(t+=":443"),e===t}a=a||{},a.target&&!/^(127\.0\.0\.\d|localhost)/i.test(a.target)||delete a.target,is.gateway=is.HTTPS&&!!utils.cookies.get("ESG_GWID"),r=a.gateway,settings.externals.direct?r=null:is.gateway?r||(r=location.host):b(r)&&(r=null),a.gateway=r,t.options=function(){return utils.copyObject(a)},t.target=function(){return a.address+(a.prt?":"+a.prt:"")},t.address=function(){var e=t.URL();if(e){var n=e.match(/:[\/]+([^\/]+)/);if(n)return n.length?n[1]:n}return r||t.target()},t.redirectedFrom=function(){return a.redirectedFrom};var y=lz4.async(),w=function(){function e(e){return b().assign(e)}function n(e,t,n){for(var r=2,i=e.length;r<i;r+=3){var a=e[r];a&&(a[0]=o(a[0],t,n,e[r-1]))}}function o(e,t,n,o){if(u(e,8))switch(e.charCodeAt(0)){case 94:return r(e,t.shift(),n);case 36:return r(e,t.pop(),n);case 100:if("CC"===o||"CacheCursor"===o||"SF"===o&&globals.shield)return e;if("data:"===e.substring(0,5))return i(e,n)}return e}function r(t,n,o){if(n)switch(t.charCodeAt(1)){case 105:var r=t.indexOf("lz4")===-1?e(d(n,t.substring(1))):m(n);return o.push(r),r;case 97:case 112:break;default:return utils.buildBlob(n,t.substring(1))}return n}function i(t,n){switch(t.charCodeAt(5)){case 105:var o=e(p(t));return n.push(o),o;case 97:if(!utils.supportsBinary())return t;var r=utils.decode(t);return r.buffer}return f(t)}function a(){function e(){for(var e;e=r.pop();)"revoke"in e&&e.revoke();return t=s++,o=!1,i=0,a=null,u}var t=0,o=!1,r=[],i=0,a=null,u={marker:function(){return t},isImmediate:function(){return o},imageCount:function(){return r.length},add:function(e){var n=c.push(e);l("add",t,n,e.byteLength)},parse:function(e){l("parse",t,e);var i=w(e);o="!"===i[i.length-1],o&&i.pop(),l(o?"immediate":"not immediate"),a=i;var s=h;if((c.length?e.search(v):e.indexOf("data:"))!==-1)switch(n(i,c,r),r.length){case 1:s=r[0];case 0:break;default:s=$.when.apply($,r)}return s.promise(this)},execute:function(){l("execute",t,r.length);for(var n=a,o=n.length,s=g,c=i;c<o;c+=3)switch(s(n[c],n[c+1],n[c+2])){case-1:return i=c,!0;case 1:if(i=c+3,i<o)return!0}return e().free(),!1}};return e()}var s=0,c=[],u=utils.isString,d=utils.blobURL,f=utils.makeBlob,p=utils.makeURL,h=utils.resolved,m=y.image,v=/"[$^]/,b=function(){var e=utils.factory(utils.deferredImage);return function(){return e().reset()}}(),w=function(e){var n=JSON.parse(e);return"string"==typeof n[0]?w=JSON.parse:(t.close("STR_OLD_SERVER"),(w=function(){throw"old server"})()),n};return utils.poolFactory(a)}(),S=globals.fps?function(){var e=0,t=0,n=$('<div class="rate"><div style="color:red"></div><div style="color:yellow"></div></div>').appendTo(document.body).children(":first");return function(o){var r=o-e+1;e=o,t=(1e3/r+9*t)/10,n.text(Math.round(t))}}():utils.noop,T=function(){var e=function(){function e(e){if(1!==e)f(!e);else for(var t=0,n=p.length;t!==n;++t)p[t]()}var t=v(e),n=w,o=n();return function(e){if("string"!=typeof e)o.add(e);else{var r=o;o=n(),t(r.parse(e))}}}(),t=!1,n=[],o=utils.toArray;return{queue:function(){t=!0},onmessage:function(o){t?n.push(o.data):e(o.data)},insert:function(r){if(l("insert",r.length,n.length),t=!1,0!==n.length&&(c.apply(r,n),n.length=0),0!==r.length)for(var i=0;;){if(e(r[i]),++i>=r.length)break;if(t){o(r,i,n);break}}}}}(),_=function(){var e=utils.poolFactory(function(){var e=function(){var e=function(){var e=[0,0];return function(t,n){var o=127&t.getUint8(n+1);return 126===o?(e[0]=4,e[1]=t.getUint16(n+2)):127===o?(e[0]=10,e[1]=t.getUint32(n+6)):(e[0]=2,e[1]=o),e}}();return function(t,n,o,r,i){var a=e(n,o),s=o+a[0],l=s+a[1];switch(15&n.getUint8(o)){case 1:return i(t,s,l);case 2:return r(t,s,l);default:return CE("Bad packet type"),l}}}(),t=utils.poolFactory(function(){function e(){this.packets[this.index]=this.result||"[]",this.free(),this.notify()}return function(){var t=new FileReader;return t.onloadend=e,t}}());return function(){function n(e,t,n){return a.push(e.slice(t,n)),n}function o(e,t,n){var o=n-t,i=new Uint8Array(e,t,o);if(o>16384)return r(i,t,n);o-=3;for(var s=11;s<o;++s)if(i[s]>127)return r(i,t,n);return a.push(String.fromCharCode.apply(String,i)),n}function r(e,n,o){++s;var r=t();return r.packets=a,r.index=a.push(null)-1,r.notify=i,r.readAsText(utils.blobFromData(e,n,o,"text/plain")),o}function i(){0===--s&&(l(a),c.free())}var a=[],s=1,l=null,c=function(t,r){l=r,a.length=0,s=1;for(var c=new DataView(t),u=0;u<t.length;u=e(t,c,u,n,o));y.reuse(t),i()};return c}}());return function(t,n){l("package");var o=e();o(t,n)}}();return a=connect(utils.copyObject(a,{ongwopen:function(e){CI("Gateway opened",e),o=this,r=e,n.triggerHandler("gateway")},onopen:function(e,r){CI("Communication opened"),o=this,m.isHTTPS=t.isHTTPS=this.isHTTPS,t.isGateway()&&(m.gatewayVersion=e);var i={Hello:function(e,o,r,i,s){m.roundTrip=Date.now()-a,m.serverName=e,m.serverVersion=o+"."+r+"."+i+"."+s,CI("URL: "+t.address()),CI("Server: "+e+" "+m.serverVersion),CI("Round trip: "+m.roundTrip),f(!1),n.triggerHandler("open",utils.toArray(arguments))},AutoReconnectCookie:function(e){_sessionStorage&&_sessionStorage.setItem("AN_Reconnect_AutoReconnectCookie",e)},Close:function(e){CI("Session closed by Access Server"+(e?": "+e:"")),t.close(e||"#")},RedirectD:function(e,n){t.redirect(e,n)},Redirect:function(e,n){t.redirect(e,n)},Keepalive:utils.noop,Package:function(){function e(e){this.free(),"string"!=typeof e?_(e,o):o([])}var t=y.pack,n=T.queue,o=T.insert;return function(o,r){return n(),t(o,r).done(e),1}}(),MultiTouchSupported:function(){return globals.rdpTouchEnabled?(globals.rdpTouchSupported=!0,toolbar.showButton("rpd_touch_toggle"),void(("enabled"==_localStorage.getItem("rdp_touch_state_pref")||globals.rdpTouchActive)&&(touchSupport.rdpTouch.enable(),CI("Resuming RDP touch")))):CI("RDP Touch disabled.")},MultiTouchsusPend:function(){try{touchSupport.rdpTouch.disable(),globals.rdpTouchSupported=!1}catch(e){CI("IE11 fallback.")}CI("Suspending RDP touch.")},MultiTouchResume:function(){return globals.rdpTouchEnabled?(globals.rdpTouchSupported=!0,void("enabled"==_localStorage.getItem("rdp_touch_state_pref")&&(touchSupport.rdpTouch.enable(),CI("Resuming RDP touch")))):CI("RDP Touch disabled.")},SurfaceFrameMarker:function(e,t){e&&u("p","sfa",t)},GfxEndFrame:function(){var e=0;return function(t){u("p","gef",0,t,++e)}}(),FramesPerSecond:function(){var e;return function(t){e=e||$(".rate").children(":last"),e.text(t)}}()};t.hookUp("protocol",i),globals.enableAutoKeyboard?d("p","h",[Client.id,Client.major,Client.minor,Client.revision,Client.build,navigator.userAgent,0,2,"CaretPos"]):d("p","h",[Client.id,Client.major,Client.minor,Client.revision,Client.build,navigator.userAgent]),globals.shield&&d("anp","h",[document.cookie,location.href,[screen.width,screen.height],ANProxy._getAllShieldCookies()]);var a=Date.now(),l=globals.numericValue("keepAliveRateSeconds",0);if(0===s&&l>0&&(s=_setInterval(u.bind(null,"p","k",null),1e3*l)),globals.session_heartbeat_seconds){var c=function(){d("p","hb",[]),setTimeout(c,1e3*globals.session_heartbeat_seconds)};c()}n.triggerHandler("connect",[r])},onerror:function(e){var t=Array.isArray(e)&&e.length>=2?e[1]:e,o=(Array.isArray(e)||"string"==typeof e)&&e.length>=2&&e[0];CE("Communication error",t),o&&(i=!0,n.triggerHandler("error",[t]))},onmessage:T.onmessage,onclose:e})),this},this.URL=function(){return o&&(o.URL||o.url)},this.isOpen=function(){return o&&o.readyState===o.OPEN},this.isError=function(){return i},this.isGateway=function(){return!!r},this.options=utils.noop,this.address=utils.noop,this.supportsBinary=function(){return o&&"binaryType"in o},this.close=function(t){CI("Closing communication:",t),o&&o.close(),e.call(o,{reason:t})},this.redirect=function(t,n){globals.redirectToServer=t,CI("Redirecting communication"),_protocol.send.priority("p","g",utils.TR("STR_PAGE_UNLOADED")),o&&o.close(),e.call(o,{redirect:utils.toArray(arguments)})};var m={};this.sessionInfo=function(){return utils.copyObject(m,{URL:t.URL(),target:t.target(),address:t.address(),isGateway:t.isGateway(),options:t.options(),redirectedFrom:t.redirectedFrom()})},this.acceleration=function(e,t){e?CI("Acceleration enabled:",t):CI("Acceleration disabled"),m.acceleration=!!e,m.quality=t}}function Raster(e){"use strict";function t(){v=utils.noop,e.width!==b&&(e.width=b,g.width=b),e.height!==y&&(e.height=y,g.height=y),d.show(),h=utils.getContext(e),h.drawRect("black",0,0,b,y),m=utils.getContext(g),m.drawRect("black",0,0,b,y),d.ResetClipRect(),_.reset(),$(e).trigger("resetTransform")}function n(e,t){switch(t=t||[0,0,0],typeof e){case"number":t[0]=(16711680&e)>>16,t[1]=(65280&e)>>8,t[2]=255&e;break;case"string":t[0]=parseInt(e.substring(1,3),16),t[1]=parseInt(e.substring(3,5),16),t[2]=parseInt(e.substring(5,7),16);break;default:return e}return t}function o(e){if(!e)return null;var t=m.createPattern(e,"repeat");return t.width=e.width,t.height=e.height,e.free(),t}function r(){this.left=0,this.top=0,this.right=0,this.bottom=0,this.width=0,this.height=0}function i(e,t){if(t===U&&e===F)return M;F=e,U=t;var n=x[e];return M=n&&n[t]}function a(e){return D[e]}function s(e){return O[e]}function l(e){return N[e]}function c(e,t,n,o){var r=utils.toArrayFactory();return function(i){var a=null,s=r(arguments,1);switch(s[0]=e(s[0]),i){case 12:if(void 0===s[0])return;a=t;break;case 0:a=n,s[0]="black";break;case 15:a=n,s[0]="white";break;case 10:return;default:if(void 0===s[0])return;s.unshift(i),a=o}return a.apply(h,s)}}function u(e,t,n,o,r,i){for(var a=e/(V*L)*L|0,s=(e-V*a)/L|0,l=0;l<r&&!(a>V-L);l+=L)for(var c=utils.min(r-l,L),u=o;u>0;){var d=utils.min(V-s,u);if(i(t+o-u,n+l,s,a,d,c),s+=d,s>=V&&(a+=L,s=0,a>V-L))break;u-=d}}var d=this,f=function(e){var t=null,n={memblt:"#808080",imageblt:"#0000FF",scrblt:"#FFFF00",patblt:"#FFA500",drawrect:"#00FF00",line:16711680,brush:"#800080",bitmap:"#00FFFF",circle:16761035};return"*"===e||"all"===e?t=n:(t={},e.toLowerCase().forEach(function(e){switch(e){case"image":t.memblt=n.memblt,t.imageblt=n.imageblt,t.scrblt=n.scrblt;break;case"rect":e="drawrect";default:t[e]=n[e]}})),function(e){return t[e]||!1}}(settings.externals.debug||""),p=settings.externals.debug?function(e,t,n,o,r){var i=f(e);i&&(h.strokeStyle=i,h.strokeRect(t,n,o,r))}:utils.noop;e=$(e)[0];var g=e.cloneNode(!1),h=utils.getContext(e),m=utils.getContext(g),v=utils.noop,b=e.width,y=e.height;this.setSize=function(n,o){if(n!==b||o!==y){if(b=n,y=o,v=t,CI("Screen size:",b,y),utils.autoResize&&utils.autoResize.unlock(),_sessionStorage){try{var r="";r=_sessionStorage.getItem("AN_Reconnect_Blaze_INI"),r=sjcl.decrypt("password",r,{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1})}catch(i){console.log("CRYPTO ERR: ")}if(r){for(var a=r.split("\n"),s=[],l=0;l<a.length;l++){var c=a[l];0!=c.indexOf("desktopwidth:i:")&&0!=c.indexOf("desktopheight:i:")&&(s[s.length]=c)}r=s.join("\n"),r+="\ndesktopwidth:i:"+b+"\ndesktopheight:i:"+y+"\n",_sessionStorage.setItem("AN_Reconnect_Blaze_INI",sjcl.encrypt("password",r,{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}));var u=JSON.parse(sessionStorage.getItem("AN_Reconnect_Blaze_INI"));try{delete u.iv,delete u.salt,delete u.adata,delete u.cipher,delete u.iter,delete u.ks,delete u.mode,delete u.ts,delete u.v,sessionStorage.setItem("AN_Reconnect_Blaze_INI",JSON.stringify(u))}catch(i){console.log("No Crypto to be applied")}}}e.style.top=0}},this.width=function(){return b},this.height=function(){return y};var w=utils.ce("canvas");w.width=w.height=480;var S=utils.getContext(w),T=function(){var e=utils.min,t=utils.max;return function(n,o,r){return r=r||[0,0,0,0],r[0]=t(n[0],o[0]),r[1]=t(n[1],o[1]),r[2]=e(n[0]+n[2],o[0]+o[2])-r[0],r[3]=e(n[1]+n[3],o[1]+o[3])-r[1],r}}(),_=function(){var e=!1,t=[-1,-1,-1,-1],n=[0,0,0,0],o=utils.toArray;return{reset:function(){t[2]=-1},set:function(e){t[2]===-1&&o(e,0,t)},dirty:function(){e=!0},intersect:function(o){if(e&&t[2]!==-1){var r=T(t,o,n);if(r[2]>0&&r[3]>0)return e=!1,!0}return!1}}}();this.start=_.reset;var C={safeDrawImage:function(e,t,n,o,r,i,a,s){v();var l=e.width;i>l&&(i=l),l-=i,o>l&&(o=l),l=e.height,a>l&&(a=l),l-=a,r>l&&(r=l),o>0&&r>0&&this.drawImage(e,i,a,o,r,t,n,o,r),s&&(s[0]=o,s[1]=r)},drawRect:function(e,t,n,o,r){v(),this.fillStyle=e,this.fillRect(t,n,o,r)},drawPolyline:function(e,t){v(),this.strokeStyle=e,this.beginPath();var n=t[0];this.moveTo(n[0]+.5,n[1]+.5);for(var o=1;o<t.length;++o)n=t[o],this.lineTo(n[0]+.5,n[1]+.5);this.stroke()},drawEllipse:function(){function e(e,t,n,o,r){if(o===r){var i=o/2;e.arc(t+i,n+i,i,0,2*Math.PI,!1)}else{var a=o/2*.5522848,s=r/2*.5522848,l=t+o,c=n+r,u=t+o/2,d=n+r/2;e.moveTo(t,d),e.bezierCurveTo(t,d-s,u-a,n,u,n),e.bezierCurveTo(u+a,n,l,d-s,l,d),e.bezierCurveTo(l,d+s,u+a,c,u,c),e.bezierCurveTo(u-a,c,t,d+s,t,d)}}return function(t,n,o,r,i){v(),this.strokeStyle=t,this.beginPath(),e(this,n,o,r,i),this.stroke()}}(),copy:function(e,t,n,o,r,i,a){v(),this.putImageData(r.getImageData(i,a,n,o),e,t)}};$.extend(Object.getPrototypeOf(h),C);var A=function(){var e=Object.create(null);return function(t){var n=(16777215&t).toString(16),o=e[n];return o||(o="#000000".substring(0,7-n.length)+n,e[n]=o),o}}(),E=function(){var e=utils.ce("canvas");return e.width=e.height=8,e=utils.getContext(e),function(t,o,r){for(var i=e.createImageData(8,8),a=i.data,s=n(r),l=n(o),c=0,u=7;u>=0;--u)for(var d=t[u],f=0;f<8;++f){var p=d&1<<f?l:s;a[c++]=p[0],a[c++]=p[1],a[c++]=p[2],a[c++]=255}e.putImageData(i,0,0);var g=e.createPattern(e.canvas,"repeat");return g.width=8,g.height=8,g}}(),I=function(){var e=function(){function e(e){return 255&~e}var t=[function(e,t){e[t]=0,e[t+1]=0,e[t+2]=0},function(t,n,o,r){t[n]=e(t[n]|o[r]),t[n+1]=e(t[n+1]|o[r+1]),t[n+2]=e(t[n+2]|o[r+2])},function(t,n,o,r){t[n]&=e(o[r]),t[n+1]&=e(o[r+1]),t[n+2]&=e(o[r+2])},function(t,n,o,r){t[n]=e(o[r]),t[n+1]=e(o[r+1]),t[n+2]=e(o[r+2])},function(t,n,o,r){t[n]=e(t[n])&o[r],t[n+1]=e(t[n+1])&o[r+1],t[n+2]=e(t[n+2])&o[r+2]},function(t,n){t[n]=e(t[n]),t[n+1]=e(t[n+1]),t[n+2]=e(t[n+2])},function(e,t,n,o){e[t]^=n[o],e[t+1]^=n[o+1],e[t+2]^=n[o+2]},function(t,n,o,r){t[n]=e(t[n]&o[r]),t[n+1]=e(t[n+1]&o[r+1]),t[n+2]=e(t[n+2]&o[r+2])},function(e,t,n,o){e[t]&=n[o],e[t+1]&=n[o+1],e[t+2]&=n[o+2]},function(t,n,o,r){t[n]=e(t[n]^o[r]),t[n+1]=e(t[n+1]^o[r+1]),t[n+2]=e(t[n+2]^o[r+2])},function(){},function(t,n,o,r){t[n]|=e(o[r]),t[n+1]|=e(o[r+1]),t[n+2]|=e(o[r+2])},function(e,t,n,o){e[t]=n[o],e[t+1]=n[o+1],e[t+2]=n[o+2]},function(t,n,o,r){t[n]=e(t[n])|o[r],t[n+1]=e(t[n+1])|o[r+1],t[n+2]=e(t[n+2])|o[r+2]},function(e,t,n,o){e[t]|=n[o],e[t+1]|=n[o+1],e[t+2]|=n[o+2]},function(e,t){e[t]=255,e[t+1]=255,e[t+2]=255}];return function(e){var n=t[e];return n?n:void CE("Bad opcode",e)}}(),t=[0,0,0,0];return function(n,o,r,i,a,s){var l=H(arguments,t);if(!(l[2]<=0||l[3]<=0)){var c=e(a);if(c){s=s.apply(this,l);for(var u=h.getImageData.apply(h,l),d=u.data,f=l[2]*l[3]*4,p=0;p<f;p+=4)s(c,d,p);h.putImageData(u,l[0],l[1])}}}}(),R=function(){var e=[0,0,0];return function(t,o,r,i,a,s){I(r,i,a,s,t,function(){var t=n(o,e);return function(e,n,o){e(n,o,t,0)}})}}(),k=function(e,t,n,o,r){I(t,n,o,r,e,function(e,t,n,o){var r=m.getImageData(e,t,n,o).data;return function(e,t,n){r[n+3]&&e(t,n,r,n)}})};r.prototype.calc=function(e){if(!e||!e.length)return!1;var t=e[0];this.left=this.right=t[0],this.top=this.bottom=t[1];for(var n=1;n<e.length;++n){t=e[n];var o=t[0],r=t[1];this.left>o?this.left=o:this.right<o&&(this.right=o),this.top>r?this.top=r:this.bottom<r&&(this.bottom=r)}return this.width=this.right-this.left+1,this.height=this.bottom-this.top+1,!0},this.show=function(){$(e.parentElement).show()},this.hide=function(){$(e.parentElement).hide()};var x=[null,null,null],D=[],O=[],N=[],P=1,L=20,F=-1,U=-1,M=null;this.SetCacheSize=function(e,t,n,o,r,i){x=new Array(e);for(var a=0;a<e;++a)x[a]=new Array(t);U=-1,D=new Array(n),O=new Array(n),N=new Array(o),"number"==typeof r&&(P=r),"number"==typeof i&&(L=i)},this.CacheImage=function(e,t,n){F=t,U=n,M=e;var o=x[t];if(o){var r=o[n];r&&r.free()}else x[t]=o=[];o[n]=e},this.CacheColorBrush=function(e,t){D[t]=o(e)},this.CacheBrushBitmap=function(e,t){O[t]=e};var z="none";this.CacheCursor=function(e,t,n,o){N[o]=0===e.indexOf("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA9hAAAPYQGoP6dpAAAAGklEQVRYhe3BAQEAAACCIP+vbkhAA")?"none":"url('"+e+"') "+t+" "+n+",auto",d.SetCursor(o)};var K,j,B;!function(t){function n(t){"none"===t&&(is.webkit&&!is.chrome||is.firefox&&is.mac)&&(t="url('data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAIAOw=='),auto"),e.style.setProperty("cursor",t,"important")}function o(){function t(e){e?(a=e.clientX-l,s=e.clientY-c):(a+=l,s+=c)}CI("Using DIV cursor");var n=$('<div class="cursor"></div>').appendTo(e.parentNode),o=n[0],r=o.style,i="none",a=0,s=0,l=0,c=0,u=(n.width(),n.height(),
"transform"in r?function(e){t(e),r.transform="translate3d("+a+"px,"+s+"px,0)"}:function(e){t(e),r.msTransform="translate("+a+"px,"+s+"px)"}),d=$(e).mousemove(u),f=!0;B=function(){f=!1,$(e.parentNode).off("mouseleave mouseenter")},(j=function(){f=!0,$(e.parentNode).on("mouseleave",function(){n.hide()}).on("mouseenter",function(){p(i)})})();var p=function(e){if(f)switch(i=e,e){case"default":case"auto":case"crosshair":case"pointer":case"text":case"wait":case"help":case"e-resize":case"n-resize":case"ne-resize":case"nw-resize":case"s-resize":case"se-resize":case"sw-resize":case"w-resize":case"ns-resize":case"ew-resize":case"nesw-resize":case"nwse-resize":case"col-resize":case"row-resize":case"m-panning":case"e-panning":case"n-panning":case"ne-panning":case"nw-panning":case"s-panning":case"se-panning":case"sw-panning":case"w-panning":case"move":case"vertical-text":case"cell":case"context-menu":case"alias":case"progress":case"nodrop":case"copy":case"none":case"not-allowed":case"zoom-in":case"zoom-out":case"grab":case"grabbing":d.css("cursor",e),r.display="none";break;default:d.css("cursor","none");try{$("#ToolBar").is(":hover")||(r.display="block")}catch(t){console.log(t.message)}var n=e.split(" ");r.setProperty("background-image",n[0]);var o=parseInt(n[1],10),a=parseInt(n[2],10);l-=o,c-=a,u(),l=o,c=a}};return p}try{if(is.edge)(K=o())(t);else{if(n(t),!e.style.getPropertyValue("cursor"))throw"No URL cursor";K=n,globals.shield&&K("default"),B=function(){K("none"),K=utils.noop},j=function(){(K=n)(z)}}}catch(r){K=o(),K(t)}}("url('data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAIAOw==') 1 1,auto"),utils.disableMouseCursor=B,utils.enableMouseCursor=j,this.SetDefaultCursor=function(){K("auto")},this.SetCursor=function(e){z="number"==typeof e?l(e):"string"==typeof e?e:"none",K(z||"auto"),touchSupport&&touchSupport.touchpadEnabled&&touchSupport.touchpad.setCursor(z)};var H=function(){var e=utils.toArray,t=[0,0,12345,12345];return d.ResetClipRect=d.r=function(){t[0]=0,t[1]=0,t[2]=12345,t[3]=12345,h.restore()},d.SetClipRect=d.s=function(n,o,r,i){e(arguments,0,t),h.save(),h.beginPath(),h.rect(n,o,r,i),h.clip()},T.bind(null,t)}();this.CaretPos=function(e,t,n,o,r){globals.enableAutoKeyboard&&(e&&(o>1||r>1)?(keyboard.setCaretPos({x:t,y:n}),keyboard.show()):(keyboard.setCaretPos({x:t,y:n}),keyboard.hide()))};var G=c(utils.retArg,C.safeDrawImage,C.drawRect,function(){var e=[0,0];return function(t,n,o,r,i,a,s,l){m.safeDrawImage(n,o,r,i,a,s,l,e),e[0]>0&&e[1]>0&&k(t,o,r,e[0],e[1])}}());this.MemBlt=function(e,t,n,o,r,a,s,l,c){var u=i(r,a);u&&(G(c,u,e,t,n,o,s,l),_.dirty(),p("memblt",e,t,n,o))},this.ImageBlt=function(e,t,n,o,r){h.safeDrawImage(e,t,n,o,r,0,0),e.free(),_.dirty(),p("imageblt",t,n,o,r)},this.ScrBlt=function(t,n,o,r,i,a,s){return _.intersect(arguments)?-1:(_.set(arguments),12===s?(m.safeDrawImage(e,0,0,o,r,i,a),h.safeDrawImage(g,t,n,o,r,0,0)):G(s,e,t,n,o,r,i,a),p("scrblt",t,n,o,r),0)},this.PatBlt=function(){var e=c(A,C.drawRect,C.drawRect,R);return function(t,n,o,r,i,a){e(a,t,n,o,r,i),p("patblt",n,o,r,i)}}(),this.DstBlt=function(e,t,n,o,r){d.PatBlt(16777215,e,t,n,o,r)},this.DrawRect=function(){var e=f("drawrect");return function(t,n,o,r,i){h.drawRect(e||A(t),n,o,r,i)}}(),this.DrawPolyline=function(){var e=f("line"),t=new r,n=c(A,C.drawPolyline,C.drawPolyline,function(e,n,o){t.calc(o)&&(m.clearRect(t.left,t.top,t.width,t.height),m.drawPolyline(n,o),k(e,t.left,t.top,t.width,t.height))});return function(t,o,r){n(r,e||o,t)}}(),this.DrawLine=function(){var e=[null,null];return function(t,n,o,r){12!==r||t[0]!==n[0]&&t[1]!==n[1]?(e[0]=t,e[1]=n,d.DrawPolyline(e,o,r)):d.DrawRect(o,t[0],t[1],n[0]-t[0]+1,n[1]-t[1]+1)}}(),this.PatBltWithColorBrush=function(){var e=c(function(e){return e&&"src"in e?o(e):e},C.drawRect,C.drawRect,function(e,t,n,o,r,i){m.drawRect(t,n,o,r,i),k(e,n,o,r,i)});return function(t,n,o,r,i,a){e(a,t,n,o,r,i),p("brush",n,o,r,i)}}(),this.PatBltWithCachedColorBrush=function(e,t,n,o,r,i){var s=a(r);s&&d.PatBltWithColorBrush(s,e,t,n,o,i)},this.PatBltWithBrushBitmap=function(){var e=null,t=null,n=0,o=0;return function(r,i,a,s,l,c,u,f){a===n&&o===i&&r.equal(t)||(e=E(r,a,i),t=r,n=a,o=i),d.PatBltWithColorBrush(e,s,l,c,u,f),p("bitmap",s,l,c,u)}}(),this.PatBltWithCachedBrushBitmap=function(e,t,n,o,r,i,a,l){var c=s(n);c&&d.PatBltWithBrushBitmap(c,e,t,o,r,i,a,l)};var V=$(w).attr("width");this.BitmapSave=function(e,t,n,o,r){u(e,t,n,o,r,function(e,t,n,o,r,i){S.copy(n,o,r,i,h,e,t)})},this.BitmapRestore=function(e,t,n,o,r){u(e,t,n,o,r,function(e,t,n,o,r,i){h.copy(e,t,r,i,S,n,o)})},this.DrawEllipse=function(){var e=f("circle"),t=c(A,C.drawEllipse,C.drawEllipse,function(e,t,n,o,r,i){m.clearRect(n,o,r,i),m.drawEllipse(t,n,o,r,i),k(e,n,o,r,i)});return function(n,o,r,i,a,s){t(s,e||n,o,r,i,a)}}()}function Input(e,t,n,o){"use strict";function r(e){function t(e){var t={};for(var n in e){var o=e[n],r=typeof o;switch(r){case"object":case"function":break;default:t[n]=o}}return t}var n=t(e);c("anp","ri",[n]),console.log(n)}var i=-1234,a=[KEYS.C,KEYS.A,KEYS.X],s=["meta","ctrl","alt","shift"],l=$("#virt_keyboard"),c=e.send.regular,u=e.send.lock,d=t.parent();t=t[0];var f=!1;this.start=function(l,p){function g(e,t,n){return utils.copyObject(t,{sim:!0,which:e,keyCode:e,location:N[e]||O(t),useScancodes:n})}function h(e){u(!0),P.apply(null,arguments);var t=utils.toArray(arguments,1).reverse();t.unshift(e),L.apply(null,t),u(!1)}function m(e){u(!0);for(var t=-1,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o===t){_setTimeout(m.bind(null,e.substring(n)),300);break}I[0]=t=o,c("u","u",I)}u(!1)}function v(e){for(var t in F)if(e===F[t])return!0;return!1}function b(e,t){if(v(e))for(var n in F){var o=F[n];e!==o&&t[n+"Key"]&&(h("s",o),z[o]=!1)}}function y(t){if(globals.sendRawEvents&&r(t),toolbar.fn.endAltTab(),utils.tryCopyToLocalClipboard&&utils.tryCopyToLocalClipboard(),document.DEBUG&&console.log("Keydown: ",t.keyCode,t.ctrlKey,t.altKey),17==t.which&&(Q=!1),globals.blockAltOrCtrlCombinations&&(t.altKey||t.ctrlKey))return!1;if(globals.clipboardSeamlessCopy&&globals.clipboard&&is.mac&&a.indexOf(t.keyCode)!=-1&&t.metaKey&&(t.metaKey=!1,t.ctrlKey=!0,J=!0),(globals.clipboardSeamlessCopy||globals.shield&&is.IE)&&globals.clipboard&&t.keyCode==KEYS.V){if(t.ctrlKey&&!is.mac)return $("#clipboard_buffer").focus(),X=!0,Z[KEYS.CTRL]=!0,void(Z[KEYS.V]=!0);if(t.metaKey&&is.mac)return $("#clipboard_buffer").focus(),X=!0,Z[F.meta]=!0,void(Z[KEYS.V]=!0)}if(e.setInteractive(!1),H.altGrKeycodes.indexOf(t.keyCode)>=0&&(t.ctrlKey&&t.altKey||t.altKey&&is.mac))return t.ctrlKey&&(W[KEYS.CTRL]=!0),t.altKey&&(W[KEYS.ALT]=!0),t.shiftKey&&(W[KEYS.SHIFT]=!0),void(W[t.keyCode]=!0);var n=B.down(t);if(n===i)return z[n]=!1,!1;var o=t.originalEvent,s=o.keyIdentifier,l=O(t);if(log.toFile("keydown",n,s,l,t.sim),!t.sim){if(K=!1,j=!1,v(n))return N[n]=l,!1;if(j=!0,U(t),H.down(n,t,s))return!1}switch(n){case 35:if(!globals.specialKeys&&t.ctrlKey&&t.altKey)return!1;break;case 80:if(globals.blockCtrlP&&t.ctrlKey)return!1;break;case 122:if(Y){if(is.firefox&&globals.fireFoxProgrammaticFullScreen)return $.fullScreen.toggle(),!1;return}break;case 3:case 19:if(t.altKey)return $.fullScreen.toggle(),!1;break;case 20:q.toggle();break;case 93:return!is.mac&&(h("S",221),!1);case globals.clipboardKey:if(t.altKey)return t.ctrlKey&&G.open(),!1;if(is.logging)return log.toggle(),!1;break;case 192:if(is.logging&&is.chromeOS)return log.toggle(),!1;break;case 229:return is.mobile}this&&null!=this.toolbar&&(17!=n||"undefined"!=typeof input&&input&&input.toolbar&&input.toolbar.ctrlDown)||(z[n]=!1);var u=[46];if("E0010411"!=p||is.iOS||u.push(48),!("00000413"==p&&["'",'"'].indexOf(t.key)>=0)){if(l<3&&!t.useScancodes&&!t.altKey&&!t.ctrlKey&&u.indexOf(n)<0)if(s){if((33<=n&&144!==n||0===n)&&"U+"===s.substring(0,2))return}else if("00010416"!==globals.keyboard_locale&&(47<=n&&n<=95||180<n&&n<229||0===n||160===n||163===n||171===n||173===n||(164===n||161===n)&&is.firefox)){if("0000040A"==globals.keyboard_locale&&is.mac){var d=[219,221],f=[[{original:65,mod:224},{original:69,mod:232},{original:73,mod:236},{original:79,mod:242},{original:85,mod:249}],[{original:65,mod:225},{original:69,mod:233},{original:73,mod:237},{original:79,mod:243},{original:85,mod:250}]];if(0==lastModifierKey&&d.indexOf(n)!==-1)return void(lastModifierKey=n);if(0!=lastModifierKey&&d.indexOf(n)!==-1){switch(lastModifierKey){case 219:c("u","u",[180]);break;case 221:t.shiftKey?c("u","u",[168]):c("u","u",[96])}return void(lastModifierKey=lastModifierKey==n?0:n)}if(219==lastModifierKey&&n!==lastModifierKey){for(var g=0;g<f[1].length;g++)if(f[1][g].original==n)return void c("u","u",[f[1][g].mod]);c("u","u",[180]),c("u","u",[n])}if(221==lastModifierKey&&n!==lastModifierKey){for(var g=0;g<f[0].length;g++)if(f[0][g].original==n)return void c("u","u",[f[0][g].mod]);c("u","u",[96]),c("u","u",[n])}}return}return"00010416"==globals.keyboard_locale&&176==n&&is.firefox&&is.mac&&(n=222),"00010416"==globals.keyboard_locale&&192==n&&is.firefox&&is.mac&&(n=219),n>0&&(k[1]=n,z[n]?k[0]=16384:(z[n]=!0,k[0]=0),k[2]=l,c("u","s",k),20==n&&(sync?c("u","syn",[0]):c("u","syn",[4]),sync=!sync),J&&a.indexOf(n)!=-1&&(k[0]=49152,c("u","s",k))),!1}}function w(e){if(0!==lastModifierKey)return void(lastModifierKey=0);if(!X){globals.sendRawEvents&&r(e),document.DEBUG&&console.log("Keypress: ",e.keyCode);var t=e.which;if(0===t&&e.originalEvent.keyIdentifier&&(t=parseInt(e.originalEvent.keyIdentifier.substring(2),16)),t>=33)if(q.update(t,e.shiftKey),"E0010411"==globals.keyboard_locale&&44===t&&e.shiftKey&&(t=60),I[0]=t,t>=48){var n=String.fromCharCode(t).toUpperCase().charCodeAt(0);z[n]||(z[n]=!1,c("u","u",I))}else W[KEYS.ALT]?c("u","u",I):is.firefox&&e.altKey||c("u","u",I);if(122!=e.keyCode)return(47==t||39==t)&&H.special&&is.firefox&&e.preventDefault(),!(!H.special&&!is.mobile)&&void 0}}function S(t){if(globals.sendRawEvents&&r(t),17==t.which&&(Q=!1),J&&(t.which==F.meta&&(t.keyCode=t.which=F.ctrl,J=!1),t.metaKey=!1,t.ctrlKey=!0),X&&(t.which==KEYS.CTRL&&!is.mac||t.which==F.meta&&is.mac||t.which==KEYS.V)&&(X=!1),Z[t.which])return void delete Z[t.which];if($("#virt_keyboard_show").is(":focus"))return!1;if(E(),globals.blockAltOrCtrlCombinations&&(t.altKey||t.ctrlKey))return!1;e.setInteractive(!0);var o=B.up(t);if(W[t.keyCode])return W[t.keyCode]=!1,z[o]=void 0,!1;switch(o){case 44:return t.altKey?(P("s",KEYS.ALT),h("s",183),L("s",KEYS.ALT),z[KEYS.ALT]=!0):h("s",183),!1;case 46:if(t.altKey&&t.ctrlKey)return!1;break;case 35:if(!globals.specialKeys&&t.altKey&&t.ctrlKey)return!1;break;case 80:if(globals.blockCtrlP&&t.ctrlKey)return!1;break;case 122:if(Y)return globals.fireFoxProgrammaticFullScreen?!is.firefox:void 0;break;case 93:return!1;case globals.clipboardKey:if(t.altKey){if(!t.ctrlKey)return $.wait(500).done(function(){n&&n.open()}),!1}else if(is.logging)return!1}if(H.up(o,t))return!1;switch(k[2]=O(t)||N[o]||0,k[1]=o,z[o]){case void 0:if(is.android||0===o||229===o||173===o||174===o||175===o)return!1;if(v(o)){if(j)break;var i=!1;for(var a in F){var s=F[a];if(o!==s&&t[a+"Key"]){i=!0;break}}i&&T(t,o);break}if(17==o&&0==z[16]&&!Q)return!1;8===o&&z[46]?o=46:(k[0]=0,c("u","s",k),b(o,t));case!0:k[0]=49152,c("u","s",k),8===o&&z[46]&&is.chromeOS&&(k[1]=46,c("u","s",k),z[46]=void 0)}return z[o]=void 0,!1}function T(e,t){for(var n=0;n<s.length;n++){var o=s[n],r=F[o];(e[o+"Key"]||r==t)&&(P("s",r),z[r]=void 0)}for(var n=s.length-1;n>=0;n--){var o=s[n],r=F[o];(e[o+"Key"]||r==t)&&(L("s",r),z[r]=void 0)}}function _(e,t,n){return n=n||e.which,1===n&&e.metaKey&&(n=3),x[2]=ne(n),x[3]=t,te(e,x)}function C(){return window.innerWidth/20}function A(e,t){var n=e.clientX-t.clientX|0,o=e.clientY-t.clientY|0;return n*n+o*o}var E=globals.sessionTimeoutMinutes?$.waiter(60*Number(globals.sessionTimeoutMinutes)*1e3,e.close.bind(e,utils.TR("STR_SESSION_TIMED_OUT"))):utils.noop;if(E(),!f){f=!0;var I=[0],R=[0,0],k=[0,0,0],x=[0,0,0,0],D=[0,0,0,0,0],O=function(){var e={location:0};return function(t){var n=t.originalEvent||e;return"location"in t?t.location:"location"in n?n.location:n.keyLocation||0}}(),N=[],P=function(){var e=[0,0,0];return function(t){u(!0);for(var n=1;n<arguments.length;++n){var o=arguments[n];"number"==typeof o&&(e[1]=o,c("u",t,e))}u(!1)}}(),L=function(){var e=[32768,0,0];return function(t){u(!0);for(var n=1;n<arguments.length;++n){var o=arguments[n];"number"==typeof o&&(e[1]=o,c("u",t,e))}u(!1)}}();this.SimulatePress=h,this.simPress=h,this.simUp=L,this.simDown=P,document.simPress=h;var F={shift:16,ctrl:17,alt:18,meta:91},U=function(){var e=[];return function(t){if(!t.sim){for(var n in F){var o=t[n+"Key"],r=F[n];if(o===!z[r]){if(o&&"ctrl"===n&&K)continue;var i=g(r,t);o?e.push(i):S(i)}}e.forEach(y),e.length=0}}}(),M=function(){function e(e){var t=F[e];e+="Key",t&&this[e]&&(z[t]=!1,this[e]=!1)}function t(e){F[e]&&(this[e+"Key"]=!0)}return function(n,o,r){r&&r.forEach(e,n),o&&o.forEach(t,n)}}(),z=[],K=!1,j=!1,B=function(){var e,t,n=globals.specialKeys,o=globals.chromeKeys&&is.chromeOS;return{down:function(r){function a(e,t){if(t.sim||v(e))return e;if(t.useScancodes){if(95<e&&e<106)return e-48;if(110===e)return 190}if(n){if(192===e)return t.altKey||t.ctrlKey?9:192;if(t.altKey)switch(e){case 46:return 32;case 35:if(t.ctrlKey)return 46;break;case 33:return 9;case 34:return M(t,"shift"),9;case 36:return M(t,"ctrl","alt"),27;case 0:case 45:case 48:case 96:return t.ctrlKey?e:27;case 107:case 187:case 61:if(t.ctrlKey)return M(t,null,"ctrl,alt"),183}}var r=H.translate(e,t);if(r)return r;if(o){if(91===e)return q.send(),i;if(t.altKey&&8===e)return M(t,null,"alt"),46;if((t.altKey||t.ctrlKey)&&192===e)return 9;if(t.ctrlKey){if(t.altKey&&(37===e||39===e))return M(t,null,"alt"),37===e?36:35;switch(e){case 48:e=121;break;case 189:e=122;break;case 187:e=123;break;default:if(e<49||57<e)return e;e+=63}M(t,null,"ctrl")}}return e}var s=r.which,l=a(s,r);return l!==s&&(t=l,e=s,r.useScancodes=!0),l},up:function(n){var o=n.which;return o!==e||n.sim?o:(e=void 0,t)}}}(),H=function(){var e={down:function(e,t){if(t.shiftKey)return!1;if(t.altKey&&2===N[F.alt]){switch(e){case 60:m("|");break;case 63:case 219:m("\\");break;case 171:m("~");break;default:return!1}return z[e]=!1,!0}return 183===e&&(m("~"),z[183]=!1,!0)},altGrKeycodes:[0,49,50,51,52,53,54,55,56,60,69,160,161,164,186,192,220,219,222,223,226]},t={down:function(e,t){if(t.shiftKey)return!1;if(t.altKey&&2===N[F.alt]){switch(e){case 226:case 60:m("|");break;case 160:case 186:m("~");break;case 171:m("\\");case 9:case 63:case 219:break;default:return!1}return z[e]=!1,!0}return 183===e&&(m("\\"),z[183]=!1,!0)}},n={altGrKeycodes:[0,53,69,171,192,186,187,222,219,221]},o={E0010412:{special:!0,down:function(e){switch(e){case-1:case 21:c("u","S",[0,184,0]);break;case 25:c("u","S",[0,157,0]);break;case F.ctrl:K=!0;break;default:return!1}return!0},up:function(e,t){if(t.sim)return!1;switch(e){case-1:case 21:c("u","S",[49152,184,0]),c("u","s",[49152,18,0]);break;case F.ctrl:if(!K)return!1;K=!1,c("u","S",[0,157,0]);case 25:c("u","S",[49152,157,0]);break;default:return!1}return!0},translate:function(e,t){return t.sim||!t.altKey&&!t.ctrlKey||32!==e?0:(M(t,null,"ctrl,alt"),-1)}},E0010411:function(){var e=!1,t=!1,n=!1,o=[242,245,246],r=is.iOS?{220:220}:!is.mac&&is.firefox?{21:0,226:220}:is.mac&&is.firefox?{226:220}:{21:0,186:222,187:186,220:226,221:220,222:187};return{special:!0,down:function(i,a,s){if(a.sim)return!1;if(!is.mac&&!is.chromeOS&&i in r)return CL("From",i,"to",r[i]),h("s",r[i]),!0;if(0===i)return"U+002C"!==s&&(n=!0),!(!s||"U+00A5"!==s)&&(h("S",125),!0);if(220==i&&!is.mac&&is.firefox&&!a.shiftKey)return CL("From",220,"to",226),h("s",226),!0;if(81===i&&a.altKey)return!0;if(28===i)return!0;if(i===F.shift)return t=!1,!1;var l=o.indexOf(i)>-1;return(l||t)&&(t=!1,_setTimeout(function(){h("S",112)},a.altKey?0:300)),229===i&&(t=!0),!(is.chromeOS||!e&&244!==i&&240!==i||(e=!1,h("S",41),244===i))||l},up:function(o,i){if(i.sim)return!1;if(220==o&&!is.mac&&is.firefox&&!i.shiftKey)return!0;if(o in r)return!0;var a=!n;switch(n=!1,o){case 0:if(is.mac)return i.originalEvent.keyIdentifier&&"U+002C"===i.originalEvent.keyIdentifier?(L("s",188),!1):(t?(t=!1,I[0]=165,c("u","u",I)):a&&h("S",41),!0);break;case 81:return!!i.altKey&&(P("s",F.alt),h("s",9),e=!1,!0);case 21:case 22:is.mac&&h("S",41);break;case 44:break;case 243:case 244:is.chromeOS&&h("S",41),e=!0;break;case 240:return!0;case 28:h("S",121);break;case 29:is.chromeOS&&h("S",123);break;default:return t&&!v(o)&&(t=!1),!1}return t=!1,!0}}}(),"00000804":{special:!0},"00000404":{special:!0},"00000407":e,"080708070807":e,"0000041D":t,"00000410":n,"0000040B":{altGrKeycodes:[50,51,52,53,69,55,56,57,48,186,187,226,77,189,171]},otherwise:{up:utils.noop,down:utils.noop,translate:utils.noop,altGrKeycodes:[]}};return $.extend({},o.otherwise,o[p.toUpperCase()]||{})}(),G=function(){function t(e,t,n){return"<b>"+e+":</b>&nbsp;"+t+(n?"":"<hr />")}var n=e.sessionInfo();return newDialogs.makeModal({title:"Session Info",body:'<div title="Session Info" style="overflow:auto; word-wrap:break-word">'+t("Client",utils.TR(Client.name))+t("Server",utils.TR(n.serverName),!0)+"<br />"+t("Version",n.serverVersion)+t("Browser",navigator.userAgent)+t("URL",n.URL)+(n.isGateway?"<b>Using Gateway </b>"+(n.gatewayVersion?t("version",n.gatewayVersion,!0):"")+"<br />"+t("Target",n.target):"")+t("Host",n.options.target||n.options.address)+(n.redirectedFrom?t("Redirected from",n.redirectedFrom):"")+t("Type",n.isHTTPS?"HTTPS":"WebSocket")+t("Encryption",n.options.encryption?"enabled":"disabled")+t("Acceleration",n.acceleration?"quality "+n.quality:"disabled")+t("Codec",'<span class="codec">'+globals.codec+"</span>")+t("Keyboard",(l?"scan-codes":"UNICODE")+" - "+p,!0)+"</div>"})}();if(is.android||is.iOS){new NativeKeyboard($("#virt_keyboard_show"),e)}else{var V={getLength:function(){return 0},clear:utils.noop};V=function(){function e(){var e=this.value;if($("#buton").prepend("input: "+e+"<br>"),e!==n){var t=utils.min(e.length,n.length);do{var o=n.substr(0,t);if(0===e.indexOf(o))break}while(--t);u(!0);for(var r=t;r<n.length;++r)h("s",8);for(r=t;r<e.length;++r)I[0]=e.charCodeAt(r),c("u","u",I);u(!1),n=e}return!1}var t=$("#virt_keyboard_show"),n="";return t.on({"focus.input":function(){is.virtualKeyboard=!0,CI("(focus.input) is.virtualKeyboard = "+is.virtualKeyboard),setImmediate(function(){V.clear()})},"blur.input":function(e){is.virtualKeyboard=!1,CI("(blur.input) is.virtualKeyboard = "+is.virtualKeyboard),this.value=n=""}}),is.IE&&is.mobile?(navigator.appVersion.indexOf("Windows NT 10")>-1&&H.special&&$(document).on("keypress",w),H.special?t.on("input",e):$(document).on("keypress",w)):((H.special||is.mobile)&&t.on("input",e),H.special&&is.mobile||"virtualKeyboard"in is&&!is.IE||is.mobile||$(document).on("keypress.input",w)),{getLength:function(){return t.val().length},clear:function(){t.val(n="")}}}(),$(document).on({keydown:y,keyup:S}),$(window).on("help.input",!1)}var Y=!1,W={16:!1,17:!1,18:!1};switch(globals.numericValue("fullscreenKeyMode",2)){case 1:if(!is.IE)break;case 2:Y=!0}var q=function(){function e(e,t){return e>=65&&e<=90&&!t||e>=97&&e<=122&&t}var t=!1,n={toggle:function(){t=!t},send:function(){n.toggle(),h("s",20)},update:function(o,r){e(o,r)!==t&&n.send()}};return n}(),Q=!1,X=!1,J=!1,Z={},ee=function(e){var t=utils.calc;return function(n,o){var r={top:-$(window).scrollTop(),left:-$(window).scrollLeft()},i=scaling.getTruePosition({x:n.clientX-r.left,y:n.clientY-r.top});o[0]=t(i.x,e.width),o[1]=t(i.y,e.height)}}(t),te=function(){var e=[-1e3,-1e3];return function(t,n){return ee(t,n),n.changed=n[0]!==e[0]||n[1]!==e[1],n.changed&&(e[0]=n[0],e[1]=n[1]),n}}(),ne=function(){var e=[0,4096,16384,8192];return function(t){return e[t]||0}}(),oe=function(){var e=globals.numericValue("minSendInterval",60),t=0;return is.chromeOS&&(e=1.5*e|0),utils.delayFactory(function(n,o){return o-t<e||(t=o,void c("u","m",n))})}();e.send.add(oe.now);var re=500,ie=1500,ae=function(){var e={clientX:-1e3,clientY:-1e3};return function(t){t?A(t,e)>C()?(e.clientX=t.clientX,e.clientY=t.clientY):(t.clientX=e.clientX,t.clientY=e.clientY):(e.clientX=-1e3,e.clientY=-1e3)}}(),se=-1*ie,le={},ce=globals.numericValue("mouseWheelSpeed",120);switch(globals.numericValue("reverseMouseWheel",1)){case 1:if(!is.mac)break;case 2:ce=-ce}CI("Mouse wheel speed: "+ce);var ue=!1;switch(globals.numericValue("longPressRightButton",0)){case 2:ue=!0;break;case 1:if(is.mac){ue=!0;break}case 0:ue=is.IEtouch}$(d).focus().on({"contextmenu.input":!1,"click.input":!1,"dblclick.input":!1,"selectstart.input":!1}),utils.enableMouseEvents=function(){$(d).on({"mousewheel.input":function(t,n){if(globals.shield)D[2]=t.originalEvent.deltaY,D[3]=t.originalEvent.deltaX,D[4]=t.originalEvent.deltaMode,te(t,D),c("u","w",D);else{if(n=n<0?-ce:ce,0==n)return;k[2]=n,c("u","w",te(t,k)),E(),e.setInteractive(!0),U(t)}return E(),e.setInteractive(!0),U(t),!1},"mousedown.input":function(t){return Date.now()-se<ie?is.virtualKeyboard:($.extend(le,t),ae(t),U(t),c("u","b",_(t,1)),toolbar.fn.endAltTab(),void e.setInteractive(!1))},"mousemove.input":function(t){var n=te(t,R);n.changed&&(t.which&&U(t),oe.set(n),e.setInteractive(!0),t.timeStamp-le.timeStamp>re&&ae(null))}}),$(window).on("mouseup.input",function(t){return utils.tryCopyToLocalClipboard&&utils.tryCopyToLocalClipboard(),!(Date.now()-se<ie)&&(E(),ae(t),U(t),c("u","b",_(t,0)),is.chromeOS&&2==t.button&&(z[18]=!1),ue&&1===t.which&&t.timeStamp-le.timeStamp>re&&A(le,t)<C()&&touch2mouse(t,3),void e.setInteractive(!0))})},utils.disableMouseEvents=function(){$(d).off("mousewheel.input mousedown.input mousemove.input"),$(window).off("mouseup.input")},utils.enableMouseEvents(),o&&window.speechRecognition&&function(e){function t(e,t){return t?function(){P("s",t),h("s",e),L("s",t)}:h.bind(null,"s",e)}function n(e){return function(){P("S",219),h("s",82),L("S",219),_setTimeout(function(){m(e),_setTimeout(function(){h("s",13)},1e3)},1e3)}}function o(){_setTimeout(function(){var t=new speechRecognition;t.lang="en-US",t.continuous=!0,t.interimResults=!0,t.onstart=function(){CI("Starting speech recognition"),e.recognition=t},t.onend=o,t.onerror=function(e){CE("Speech error:",e.error),"no-speech"===e.error&&t.abort()},t.onresult=c?i:r,t.start()},1e3)}function r(e){var t=e.results;e.resultIndex<t.length&&(t=t[t.length-1],a(t[0].transcript,t.isFinal,this))}function i(e){for(var t="",n=e.results,o=e.resultIndex;o<n.length;++o)n[o].isFinal&&(t+=n[o][0].transcript);var i=t.match(f);if(i&&(t=i[1]),t=t.trim()){if(u){u=!1;var a=t.match(d);a&&(t=a[1].trim())}t&&(p.test(t)?h("s",13):m(t+" "))}i&&(CI("Exiting dictation mode"),c=!1,this.onresult=r)}function a(e,t,n){e=e.trim();for(var o=0;o<l.length;++o){var r=e.match(l[o][0]);if(r)return void(t||o===g||(g=o,v&&_clearTimeout(v),v=_setTimeout(s,2e3),CI("Matched voice command:",e,r[1]),l[o][1](r,n)))}CI("Unmatched voice command:",e)}function s(){g=-1,v=0}var l=[[/^(start?|stout|stop|stock|windows?|when.*)$/i,h.bind(null,"S",219)],[/^(switch|sweet|which|witch|sway|swing)$/i,h.bind(null,"s",F.alt,9)],[/^(app?|application)s?$/i,h.bind(null,"s",F.ctrl,F.alt,9)],[/^(next|neck|knicks|tab|tap)$/i,t(9)],[/^(can|cancel|Kansas|cancer|escape|skate)$/i,t(27)],[/^(okay|go)$/i,t(13)],[/^(down|doe|dawn|drown)$/i,t(34)],[/^(news?|now|knew)$/i,t(78,F.ctrl)],[/^(open)$/i,t(79,F.ctrl)],[/^(save|shave|safe)$/i,t(83,F.ctrl)],[/^(brent|s?print)$/i,t(80,F.ctrl)],[/^(now?|know|nose)$/i,t(78)],[/^(yes)$/i,t(89)],[/^(close|cloth|clothes|lowes|low|exit)$/i,t(115,F.alt)],[/^(back|bag|buck|bear)$/i,t(37,F.alt)],[/^(internet|explorer?)$/i,n("iexplore")],[/^(google)$/i,n("chrome")],[/^(words?|work)$/i,n("winword")],[/^(excel|accel)$/i,n("excel")],[/^(power|tower)s?$/i,n("powerpnt")],[/^(dick|decatur|dictionary|dictates?)$/,function(e,t){CI("Entering dictation mode"),c=!0,u=!0,t.onresult=i}]];o();var c=!1,u=!1,d=/^(?:dick|decatur|dictionary|dictates?)(.*)$/i,f=/^(.*)\s(done?|dawn)$/i,p=/^(news?|u)\s*line$/i,g=-1,v=0}(this)}},this.stop=function(){if(f){f=!1,$(e).off(".input"),$(document).off(".input"),$(d).off(".input"),$(window).off(".input"),l.off(".input").children().off(".input");var t=this.recognition;t&&(t.onerror=null,t.onend=null,t.abort())}}}function clipboard(e){"use strict";function t(e,t){return e&&t?e.replace(/\r\n/gi,"\n")===t.replace(/\r\n/gi,"\n"):!(e||t)}function n(){var e=utils.toArray(arguments,1);e.indexOf(s)!==-1&&this.request()}function o(e){function n(){for(var e=this.result,t=0;t<e.length;++t){var n=e.charCodeAt(t);if(n<32&&13!==n&&10!==n&&9!==n){e=e.substring(0,t);break}}i.set(e),c.triggerHandler("data",[e])}var o=e.send.regular,r=Object.create(null),i=this;this.registerType=function(e,t){t?r[e]=t:delete r[e]},this.registerType(s,function(e){return","+encodeURIComponent(e.replace(/($|[^\r])\n/g,"$1\r\n"))});var a,l;this.set=function(e,t){a=e,l=t||[s]},this.getTypes=function(){return l},this.getData=function(e){function t(e,t){var n=r[t];return n?"data:"+t+n(e):""}return e=e||s,l.indexOf(e)!==-1?t(a,e):""},this.clear=function(){a=l=void 0};var c=$(this);this.notify=function(){arguments.length&&!t(arguments[0],a)&&(CI("Notifying new clipboard"),this.set.apply(this,arguments),l.length&&o("C","f",[l.join(",")]))},this.send=function(e){var t=this.getData(e);t&&(o("C","d",[t]),CI("Sending local clipboard data"))},this.request=function(e){e=e||s,o("C","r",[e])},this.FormatList=function(){c.triggerHandler("types",utils.toArray(arguments))},this.Data=function(e){if("string"==typeof e)c.triggerHandler("data",e),this.set(e);else{var t=new FileReader;t.onload=n,t.readAsText(e)}},this.FormatRequest=this.send,e.hookUp("clipboard",this,"B")}function r(e){return $(e).on({types:n,data:function(e,t){window.clipboardData.setData("Text",t),globals.shield&&$("#clipboard_buffer").val(t)}}),globals.shield?$("#clipboard_buffer").on("paste",function(t){var n=window.clipboardData.getData("Text")||"";return n&&e.notify(n),setTimeout(function(){toolbar.fn.sendKeys(KEYS.CTRL,KEYS.V),$("#clipboard_buffer").val("")},50),t.preventDefault(),!1}):$(window).focus(function(){e.notify(window.clipboardData.getData("Text")||"")}).blur(function(){$(window).one("mousedown",function(){this.focus()})}).on("paste",function(t){e.notify(window.clipboardData.getData("Text")||"")}),globals.shield?void 0:{onActive:function(){e.notify(window.clipboardData.getData("Text")||"")}}}function i(e,t,o){function r(){e.removeClass("clipboard_button_active").addClass("clipboard_button")}function i(){utils.setMultipleTimeouts(a,[100,200,500,1e3])}function a(){if(u){d.value=u,d.select();try{if(!document.execCommand("copy"))return void CE("Copy to local clipboard failed.");CI("Copied to local clipboard."),u=""}catch(e){CE(e)}}}e=$(e),t=$(t);var s=e.children("#clipboard_image");e.children("img").click(r);var l,c=(utils.noop,globals.clipboardUseFlash&&navigator.mimeTypes["application/x-shockwave-flash"]);c||(l=newDialogs.fromSelector(t,{resizable:!0,width:"auto",onOpen:function(){this.find("textarea").enable()}}),s.off("click").click(function(){r(),l.open()})),$(o).on({types:n,data:function(e,t){return globals.clipboardSeamlessCopy?void(u=t):($("textarea").val(t),void(c?!function(){var e=toastr.warning(utils.TR("STR_CLICK_HERE_TO_COPY_TO_LOCAL_CLIPBOARD"),{timeOut:1e3*globals.clipboardTimeoutSeconds||1e4}),n=new ZeroClipboard(e[0]);n.setData("text/plain",t),n.on("aftercopy",function(t){e.hide(),n.destroy(),CI("Copied text to clipboard: "+t.data["text/plain"])})}():l&&l.open()))}}),$("#clipboard_buffer").on("paste",function(e){var t=e.originalEvent.clipboardData.getData("text/plain");return t&&o.notify(t),setTimeout(function(){toolbar.fn.sendKeys(KEYS.CTRL,KEYS.V)},50),e.preventDefault(),!1}),globals.clipboardSeamlessCopy&&(utils.tryCopyToLocalClipboard=i);var u="",d=document.querySelector("#clipboard_buffer")}function a(e,t,n){function o(){var e=this.find("textarea").val();e&&n.notify(e),this.close()}if(!globals.clipboardSeamlessCopy){var r=newDialogs.fromSelector(e,{resizable:!0,width:"500",buttons:{STR_COPY:o},onOpen:function(){this.find("textarea").enable()},onCtrlEnter:o});if(t&&(t=$(t),t.off("click").click(r.open).css("display","inline-block"),globals.rightToLeft)){var i=t.css("left"),a=t.css("right");t.css({left:a,right:i})}return r}}var s="text/plain",l=new o(e);return window.clipboardData?r(l):(i("#clipboard_button","#clipboard_container",l),a("#clipboard_dialog","#clipboard_menu",l))}function transfer(e){function t(e,t){if(globals.tryDownloadUrl&&(globals.tryDownloadUrl=!1),is.iOS||is.edge){var n=document.createElement("a");if(n.target="_blank",n.href=e,void 0!==n.download&&!t){var o=e.substring(e.lastIndexOf("/")+1,e.length);n.download=o}var r=document.createEvent("HTMLEvents");return r.initEvent("click",!0,!0),n.dispatchEvent(r),!0}utils.offBeforeUnload();var i=document.createElement("iframe");return i.style.display="none",i.setAttribute("src",e),document.body.appendChild(i),utils.onBeforeUnload(),!0}function n(e){return e=a(e),globals.inTestMode?void alert(e):is.iOS?void(globals.tryDownloadUrl=e):void $.wait().done(function(){CI("Download",e),t(e)})}function o(e){function t(e){return e.size||e.fileSize||0}function n(e){return e.name||e.fileName}function o(e,t){e=utils.toArray(e);for(var n=[],o=0,i=0;i<e.length;i++){var a=e[i];r(a,function(r){Array.prototype.push.apply(n,r),o++,o==e.length&&t(n)})}}function r(e,t){function n(e){e.readEntries(function(e){o(e,t)},function(){t([])})}var r=utils.Prop.get(e,"getAsEntry"),i=r?r.call(e):e;i?i.isDirectory?n(i.createReader()):i.file?i.file(function(e){t([e])},function(){t([])}):t([]):t([])}function s(e,o){if(e&&e.length){for(var r=0,a=0;a<e.length;++a){if(o(e[a]))return void newDialogs.notify(utils.TR("STR_UPLOAD_FOLDERS_NOT_SUPPORTED"));r+=t(e[a])}if(r=Math.round(r/1024/1024),r<=globals.uploadSizeLimit){var s=l.push(c.bind(this,e));1===e.length?i("c","u",[s,r,n(e[0])]):i("c","U",[s,r])}else newDialogs.notify(utils.TR("STR_UPLOAD_LIMIT_EXCEEDED",globals.uploadSizeLimit),!0)}}function c(e,t){if("#"!==t){if(t=a(t),globals.inTestMode)return void alert(a(t));var o=newDialogs.progressbar({html:utils.TR(1===e.length?"STR_UPLOADING_FILE":"STR_UPLOADING_FILES",n(e[0])),onCancel:function(){try{l.abort()}catch(e){CE("Could not cancel upload: "+e.message)}}});try{for(var r=new FormData,i=0;i<e.length;++i){var s=n(e[i]);CI("Upload",s,t),r.append(s,e[i])}var l=new XMLHttpRequest;l.open("POST",t,!0);var c=l.upload||l;l.onreadystatechange=function(){l.readyState==XMLHttpRequest.DONE&&o.setProgress(100)},"onprogress"in c?c.onprogress=function(e){o.setProgress(e.lengthComputable&&e.total?e.loaded/e.total*99:-1)}:o.setProgress(-1),c.onloadend=function(){o.setProgress(99)},c.onerror=function(){CE(utils.TR("STR_UPLOAD_FAILED")+(l.statusText?": "+l.statusText:"")),newDialogs.notify(utils.TR("STR_UPLOAD_FAILED"),!0)},l.send(r)}catch(u){o.close(),newDialogs.notify(utils.TR("STR_UPLOAD_FAILED"),!0)}}}return globals.fileUpload===!1?void newDialogs.notify(utils.TR("STR_UPLOADING_DISABLED")):"FormData"in window?void(e.items?o(e.items,function(e){s(e,utils.noop)}):s(e.files,function(e){return!e.type&&4096===t(e)})):void newDialogs.notify(utils.TR("STR_UPLOAD_NOT_SUPPORTED"),!0)}function r(e,t){t=parseInt(t,10)-1;var n=l[t];n&&(delete l[t],n(e))}var i=e.send.regular,a=function(){var t=e.options(),n=t.gateway?"?address="+encodeURIComponent(t.address)+"&port="+t.prt+"&secured="+(t.encryption?"true":"false"):"",o=e.address();if(o===location.host)return function(e){return e.substring(1)+n};var r=(t.gateway||t.encryption?"https":"http")+"://"+o;return function(e){return r+e+n}}(),s=function(){if(globals.printing===!1)return function(){newDialogs.notify(utils.TR("STR_PRINTING_DISABLED"))};var e=[];return printDialog=newDialogs.makeModal({title:utils.TR("STR_PRINT_OUTPUT_READY"),body:utils.TR("STR_CLICK_VIEW_FOR_PRINT")+"<br>"+utils.TR("STR_SEND_LOCAL_PRINTER"),buttons:{STR_VIEW:function(){var t=this;setTimeout(function(){t.close()},0);for(var n=0;n<e.length;++n)CI("Print",e[n]),window.open(e[n])},STR_CANCEL:function(){this.close()}}}),function(n){if(globals.inTestMode)return void alert(a(n));var o=a(n);e=[o],globals.directprint!==!0||is.iOS?printDialog.open():(CI("Printing",o),
globals.printToNewTab?window.open(a(n),"_blank"):(is.firefox&&window.open(a(n),"_blank"),is.edge?t(o,!0):(utils.offBeforeUnload(),$("#printFrame").attr("src",a(n)),utils.onBeforeUnload())))}}();utils.tryiOSDownload=function(){is.iOS&&setTimeout(function(){globals.tryDownloadUrl&&t(globals.tryDownloadUrl)},955)};var l=[];$(document.body).off(".upload").on({"dragenter.upload":!1,"dragover.upload":!1,"drop.upload":function(e){return o(e.originalEvent.dataTransfer),!1}}),$(e).on("close",function(){$(document.body).off(".upload")}),globals.fileDownload&&globals.fileDownloadIcon&&$("#download_menu").css("display","inline-block").click(function(){i("c","d",null)}),globals.fileUpload&&globals.fileUploadIcon&&!function(){function t(e){multiple=!is.iOS;var a=$('<input type="file" '+(multiple?'multiple="multiple" ':" ")+'id="upload" title="'+i+'" class="sprite icon-upload">');e?(o(e.originalEvent.target),n.replaceWith(a)):r.append(a),n=a.on("change",t)}$("#upload_menu").css("display","inline-block").css("vertical-align","middle");var n,r=$("#upload_menu"),i=r.attr("title");$(e).on("close",function(){n&&(n.remove(),n=null)}),t()}();var c=function(){var e,t=[];return function(n){t.push(n),e||(e=globals.redirectUrlsOnServer?newDialogs.notify({html:utils.TR("STR_OPEN_LINK"),onClose:function(){t=[],e=null},buttons:{STR_ON_CLIENT:function(){for(var e=0;e<t.length;++e)window.open(t[e]);this.close()},STR_ON_SERVER:function(){for(var e=0;e<t.length;++e)i("c","o",t);this.close()},STR_CANCEL:function(){this.close()}}}):newDialogs.notify({html:utils.TR("STR_OPEN_LINK"),onClose:function(){t=[],e=null},buttons:{STR_ON_CLIENT:function(){for(var e=0;e<t.length;++e)window.open(t[e]);this.close()},STR_CANCEL:function(){this.close()}}}))}}();return function(){var e=[s,n,r,c];return function(t,n,o){var r=e[t];return r&&r.call(this,n,o||0)}}()}function session(e,t){function n(e,t){return e=utils.isString(e)?e:e&&$.isFunction(e.reason)?e.reason():utils.TR(t?"STR_CONNECTION_FAILED":"STR_CONNECTION_CLOSED"),globals.showAddress&&(e+="<br><br>(",_protocol.isGateway()?(e+=utils.TR("STR_GATEWAY_ADDRESS_IS",_protocol.address()),e+="<br>",e+=utils.TR("STR_SERVER_ADDRESS_IS",w.address)):e+=utils.TR("STR_SERVER_ADDRESS_IS",_protocol.address()),u&&(e+="<br>",e+=utils.TR("STR_HOST_ADDRESS_IS",u)),e+=")"),e}function o(){U&&(U.close(),U=null)}function r(e){var t={RDP_FastLogoff:"fastLogoff","session heartbeat seconds":"session_heartbeat_seconds","session heartbeat probes":"session_heartbeat_probes","multi touch enable":"rdpTouchEnabled","multi touch active":"rdpTouchActive","multi touch action":"rdpTouchAction"};return t.hasOwnProperty(e)?t[e]:e}function i(e){globals.fileUpload!==e&&(globals.fileUpload=e,CI("File upload",e?"enabled":"disabled"),$("#upload_menu,#upload_menu_item").if_(e).show().else_().hide()),t.adjustToElementsCount()}function a(e){globals.fileDownload!==e&&(globals.fileDownload=e,CI("File download",e?"enabled":"disabled"),$("#download_menu,#download_menu_item").if_(e).show().else_().hide()),t.adjustToElementsCount()}function s(e){i(e),a(e)}function l(e){globals.clipboard!==e&&(globals.clipboard=e,CI("Clipboard",e?"enabled":"disabled"),$("#clipboard_menu,#clipboard_menu_item").if_(e).show().else_().hide(),t.adjustToElementsCount())}if(e=e||{},_sessionStorage.getItem("AN_redirectInfo")){var c=JSON.parse(_sessionStorage.getItem("AN_redirectInfo"));c.configuration=utils.copyObject(e.configuration,c.configuration),e=utils.copyObject(e,c),globals.redirectToServer=e.address,_sessionStorage.removeItem("AN_redirectInfo")}t||(t=e.toolbar),CI(Client.name),CI("Browser: "+navigator.userAgent),$(".top,.container,#advanced").remove(),is.chrome||!navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)||window.navigator.standalone||$("html").addClass("ipad ios7"),globals.touchScreen&&$("body").css("overflow","hidden"),e.fullScreen&&(is.mac&&$.fullScreen.enabled()&&!$.fullScreen.on()?(e.auto_resize=!0,newDialogs.notify(utils.TR("STR_SAFARI_NO_FULLSCREEN"))):$.wait(1e3).done(function(){$.fullScreen.enabled()&&!$.fullScreen.on()&&newDialogs.notify({html:utils.TR("STR_FULLSCREEN_SESSION"),onClose:function(){$(document.body).enterFullScreen()}})}));var u,d,f,p=utils.copyObject(e.configuration);p.username&&!utils.usernameContainsDomain(p.username)&&p.domain&&(p.username=p.domain+"\\"+p.username);var g,h,m=new RegExp("(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))");if(!e.address&&(e.address=location.host,is.gateway)){var v=e.address.split(":");v.length>=2&&v.pop(),v.push(globals.wsport||8080),e.address=v.join(":")}if(m.test(e.address)){var b=e.address.split(":");"]"===b[b.length-2][b[b.length-2].length-1]?(g=b[b.length-1],h=b.slice(0,-1).join(":")):(g=e.port,h=("["===e.address[0]?"":"[")+e.address+("]"===e.address[e.address.length-1]?"":"]")),is.IE&&(h=h.replace("[","").replace(/:/g,"-").replace("]",".ipv6-literal.net"))}else{var y=e.address.split(":");h=y[0],g=e.prt||y[1]}m.test(p["full address"])&&(p["full address"]=("["===p["full address"][0]?"":"[")+p["full address"]+("]"===p["full address"][p["full address"].length-1]?"":"]"));var w={address:h,prt:e.prt||g,encryption:!!e.encryption,gateway:e.gateway,username:p.username,password:p["html password"],redirectedFrom:e.redirectedFrom,token:e.token,authToken:e.authToken};c&&(w.redirectInfo=c,w.redirected=!0);var S=globals.name||globals.ClientName||e.name||p["full address"]||w.address;"localhost"===S&&(S=w.address),"localhost"===S&&(S=h),CI("Screen:",screen.width,screen.height,e.auto_resize);var T=e.restart||newDialogs.restart({html:utils.TR("STR_SESSION_CANCELED"),restart:function(){if($.fullScreen.leave(),!utils.redirectOnEnd()){if(!globals.autostart)return CI("AutoStart: Session.js:84 globals.autostart = false"),!0;CI("AutoStart: Session.js setting autostart to false"),utils.closeIfPortal(),location.replace(globals.ignoreURLparameters?"http://www.ericom.com":location.href.replace(/(\?.*)?$/,defaults.debug?"":"?autostart=false"))}},reconnect:function(){}}),C=_protocol.send.regular,A=$("canvas").preventSelection(),E=null,I=!1,R=new Raster(A);_protocol.hookUp("display",R);var k,x=$.Deferred().done(function(e){"pending"===L.state()&&(L.reject(),T(n(e,!0),!0))}),D=$.Deferred().done(function(){P=function(e){return utils.TR(e?"STR_FAILED_TO_OPEN_GATEWAY_CONNECTION":"STR_FAILED_TO_OPEN_CONNECTION")}}),O=$.Deferred().done(function(){globals.clipboard&&(k=clipboard(_protocol)),E=new Input(_protocol,A,k,e.speech),t?(E.toolbar=t,t.input=E,t.protocol=_protocol):E.toolbar=null,I&&_protocol.hookUp("audio",new audio.Player(_protocol)),z=transfer(_protocol),P=function(e){return utils.TR(e?"STR_GATEWAY_SESSION_DISCONNECTED":"STR_SESSION_DISCONNECTED")}}),N=$.Deferred().done(function(t,n){var o="target"in w,r=o?{"full address":t}:{address:t,"full address":""};r["html password"]=p["html password"]?p["html password"]:w.password;var i=utils.copyObject(e,{redirect:n,redirectedFrom:p["full address"],configuration:utils.copyObject(p,r)});o||(i.address=t),_sessionStorage.setItem("AN_redirectInfo",JSON.stringify(i)),_setTimeout(utils.reload,0),L.reject()}),P=function(e,t){return e?utils.TR("STR_CONNECTION_FAILED")+": "+utils.TR("STR_VERIFY_GATEWAY_RUNNING"):t?utils.TR("STR_CONNECTION_FAILED")+": "+utils.TR("STR_DISABLE_SSL"):utils.TR("STR_CONNECTION_FAILED")+": "+utils.TR("STR_VERIFY_RUNNING")},L=$.Deferred().always(function(){utils.offBeforeUnload(),E&&(E.stop(),t&&(t.input=null,t.protocol=null)),R&&"resolved"!==N.state()&&R.hide(),o()}).done(function(e){var t,n,o=!1;location.href;(utils.reconnectRetries>0||"resolved"===O.state())&&globals.reconnectOnDropped&&(""==e||"STR_SESSION_DISCONNECTED"===e)&&(utils.reconnectStartTime=utils.reconnectStartTime?utils.reconnectStartTime:Date.now(),_sessionStorage&&_sessionStorage.setItem("AN_Reconnect_retries",JSON.stringify({retries:utils.reconnectRetries+1,startTime:utils.reconnectStartTime})),t=!1,n="true"===_sessionStorage.getItem("AN_logInSuccess"),_sessionStorage.setItem("AN_doReconnect","false"),n?Date.now()-utils.reconnectStartTime<1e3*globals.reconnectMaxMinutes*60?setTimeout(function(){_sessionStorage.setItem("AN_doReconnect","true"),utils.reload()},2e3):t=!0:(e=utils.TR("STR_CONNECTION_FAILED"),T(e&&utils.TR(e),o))),(t||utils.reconnectRetries<=0&&"resolved"!==O.state()||!globals.reconnectOnDropped||""!=e&&"STR_SESSION_DISCONNECTED"!==e)&&(_sessionStorage&&_sessionStorage.removeItem("AN_Reconnect_retries"),utils.reconnectRetries=0,utils.reconnectStartTime=0,"#"===e||"@"===e?e=!1:e?o="resolved"!==F.state():t?e=utils.TR("STR_RECONECT_FAILED",S,globals.reconnectMaxMinutes):(e=P(_protocol.isGateway(),w.encryption),o="resolved"!==O.state()),!o&&globals.noEndDialog&&(e=!1),T(e&&utils.TR(e),o))});$(_protocol).on({error:function(e,t){x.resolve(t)},connect:function(e,t){D.resolve(t)},open:O.resolve,redirect:function(e,t,n){N.resolve(t,n)},close:function(e,t){L.resolve(t)}});var F=$.Deferred().done(function(){var e=utils.TR("STR_CONNECTION_CANCELED");P=function(){return e},_protocol.close(e)}),U=null;if(!globals.shield)var U=function(){var e={html:utils.doReconnect?utils.TR("STR_RECONECT_ATTEMPTS",utils.reconnectRetries):utils.TR("STR_CONNECTING")+"...",canceling:utils.TR("STR_CANCELING"),onCancel:F.resolve};return"progressBackgroundColor"in globals&&(e.background=globals.progressBackgroundColor),newDialogs.progress(e).open()}();var M=function(){var e=Object.create(null);return{register:function(t,n){e[t]=n},apply:function(t){for(var n in t){var o=e[n];o&&o(t[n],n)}},processBlazeData:function(e){var t=Data(e);return CI("Final blaze data received"),t.each(function(e,t){e=r(e),e in globals&&globals[e]!=t&&(CI("Replacing globals from new blaze file: "+e+" "+globals[e]+"->"+t),globals[e]=t)}),t}}}();M.register("fileUpload",i),M.register("fileDownload",a),M.register("clipboard",l),globals.codec="Planar",M.register("codec",function(e){globals.codec=e,$(".codec").text(e)});var z,K={Config:function(e){"string"==typeof e&&M.processBlazeData(e),M.apply(e)},State:function(){var n=globals.closeProgressState||"connected",r=globals.endProgressState||"start",i={connecting:"STR_CONNECTING_STATE",connected:"STR_CONNECTED_STATE","logged in":"STR_LOGGED_IN_STATE",active:"STR_ACTIVE_STATE",start:"STR_START_STATE","start printing":"STR_START_PRINTING","end printing":"STR_END_PRINTING"},a=Object.create(null);return function(s,l){if("string"==typeof s&&(s=s.toLowerCase(),"logged in"===s&&!e.scale_to_fit&&e.auto_resize&&utils.autoResize.enable(),!a[s])){a[s]=!0;var c=utils.TR(i[s]||s,S)||S;if(CI(c,l),s in i)switch(U&&U.title(utils.TR("STR_CONNECTING")+"..."),s){case"connected":if(is.managed||is.IE||is.edge||history.replaceState({loggedIn:!0},document.title,""),globals.rdpTouchEnabled&&!globals.touchScreen&&0!=globals.rdpTouchAction)switch(globals.rdpTouchAction){case 1:alert(utils.TR("STR_RDP_TOUCH_MESSAGE_1"));break;case 2:alert(utils.TR("STR_RDP_TOUCH_MESSAGE_2")),t.fn.disconnect(!0);break;case 3:confirm(utils.TR("STR_RDP_TOUCH_MESSAGE_3"))||t.fn.disconnect(!0)}E.start(d,f),scroll(0,R.height()-window.innerHeight),t&&t.show&&t.show(),_sessionStorage&&_sessionStorage.removeItem("AN_Reconnect_retries"),utils.reconnectRetries=0,utils.reconnectStartTime=0;break;case"logged in":if(_sessionStorage.setItem("AN_logInSuccess","true"),t&&t.showTransferKeys&&setTimeout(t.showTransferKeys,globals.toolbarInitialDisplayTimeout||1e3),utils.onBeforeUnload(),GUID){p.username||"";CI("Licensing: "+Client.kind+" "+GUID),C("c","l",[Client.kind,GUID,""])}break;case"active":k&&k.onActive&&k.onActive();break;case"start printing":globals.printCounter+=1,newDialogs.notify(utils.TR("STR_PRINTING")+"..."),a[s]=!1;break;case"end printing":globals.printCounter-=1,a[s]=!1}s===n?_setTimeout(o,globals.numericValue("closeProgressDelay",2500)):s===r&&o()}}}(),SS:function(e,t){globals.OSMajorType=e,globals.OSMinorType=t},DesktopSize:R.setSize.bind(R),Title:function(e){document.title=utils.TR((_protocol.isHTTPS?"-":"")+(globals.nameOnly?S:e.replace(/[^-]* -/,S+" -")))},Message:function(e,t){o(),e=e.replace(/localhost(:\d+)?/i,w.address+"$1");var n=e;e=utils.TR(e),n==e&&""!=n&&1==globals.defaultErrorMessage&&(e=utils.TR("STR_DEFAULT_ERROR_MESSAGE")),t?_protocol.close(e):newDialogs.notify(e)},Open:function(){z&&z.apply(this,arguments)},DisableUpload:function(){i(!1)},DisableDownload:function(){a(!1)},Ping:function(e){C("c","p",[e])},PacketSize:function(){var e=utils.toArrayFactory();return function(){var t=e(arguments);C("c","s",t)}}()};_protocol.hookUp("control",K),globals.shield&&_protocol.hookUp("proxy",ANProxy,"ANP"),$(window).on("unload",function(){C("p","g",utils.TR("STR_PAGE_UNLOADED"))}),is.managed||(p["full address"]!==p.address&&(w.target=p["full address"]),_protocol.start(w));var j=globals.blazeData.pipe(function(e){return utils.isString(e)?"Error:"!==e.substring(0,6)?Data(e):$.Deferred().reject(e.substring(7)):e}).fail(function(e){o(),_protocol.close(e)}).done(function(t){function n(e,t,n){t in globals&&e.set(t,globals[t],n||"number")}function o(e){function t(e){function t(e){return(e>9?"":"0")+e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.hours)+":"+t(e.mins)}var n=Date.daylightChanges();if(n[0])e.set("timezone bias",n[0].getTimezoneOffset()),e.set("timezone standard bias",0),e.set("timezone daylight bias",n[1].getTimezoneOffset()-n[0].getTimezoneOffset()),e.set("timezone standard name",n[0].getName(!1)),e.set("timezone daylight name",n[1].getName(!0)),e.set("timezone standard time",t(n[1])),e.set("timezone daylight time",t(n[0]));else{var o=new Date;e.set("timezone bias",o.getTimezoneOffset()),e.set("timezone standard bias",0),e.set("timezone daylight bias",0),e.set("timezone standard name",o.getName(!1)),e.set("timezone daylight name",""),e.set("timezone standard time",""),e.set("timezone daylight time","")}}_sessionStorage.setItem("AN_Reconnect_blazeFile",sjcl.encrypt("password",t.toString(),{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}));var r=JSON.parse(sessionStorage.getItem("AN_Reconnect_blazeFile"));try{delete r.iv,delete r.salt,delete r.adata,delete r.cipher,delete r.iter,delete r.ks,delete r.mode,delete r.ts,delete r.v,sessionStorage.setItem("AN_Reconnect_blazeFile",JSON.stringify(r))}catch(i){console.log("No Crypto to be applied")}var a={"session heartbeat seconds":"session_heartbeat_seconds","session heartbeat probes":"session_heartbeat_probes","multi touch enable":"rdpTouchEnabled","multi touch active":"rdpTouchActive","multi touch action":"rdpTouchAction"};if(Object.keys(a).forEach(function(e){a[e];t.has(e)&&(globals.configKey=t.get(e))}),globals.rdpTouchEnabled&&!t.has("multi touch enable")&&t.set("multi touch enable",1),globals.rdpTouchActive&&!t.has("multi touch active")&&t.set("multi touch active",1),globals.rdpTouchAction&&!t.has("multi touch action")&&t.set("multi touch action",globals.rdpTouchAction),globals.desktop_application&&t.set("desktop application",globals.desktop_application),globals.ClientName&&t.set("client name",globals.ClientName),globals.gwusername=t.get("gwusername")||"",globals.redirect?t.set("RDP_RedirectSchemes","http,https"):t.set("RDP_RedirectSchemes","nothing"),is.managed){t.has("autoreconnection enabled")&&(globals.reconnectOnDropped=t.get("autoreconnection enabled")),globals.id&&t.set("wc client",1),t.get("websocket encrypt")&&(w.encryption=utils.isTrue(t.get("websocket encrypt"))),w.prt=t.get("websocket port")||w.prt,w.address=t.get("websocket address"),t.remove("websocket address"),w.address?w.target=t.get("full address"):w.address=t.get("full address").split(":")[0],utils.isTrue(t.get("use ericom secure gateway"))?(t.set("use ericom secure gateway",0),w.gateway=t.get("secure gateway hostname")):delete w.gateway,w.username=t.get("username"),w.password=t.get("html password")||t.get("wc password"),w.password&&t.set("html password",w.password),1==t.get("screen mode id")&&t.has("desktopwidth")&&t.has("desktopheight")&&(e.auto_resize=!1),t.has("auto resize")&&(e.auto_resize=!!t.get("auto resize")),t.has("scale to fit")&&t.has("desktopwidth")&&t.has("desktopheight")&&(e.scale_to_fit=!!t.get("scale to fit")&&t.get("desktopwidth")>0&&t.get("desktopheight")>0),e.scale_to_fit&&(e.auto_resize=!1),1===t.get("screen mode id")&&t.get("desktopwidth")&&t.get("desktopheight")||(t.set("screen mode id",1),t.set("desktopwidth",p.desktopwidth),t.set("desktopheight",p.desktopheight));var c=t.get("alternate shell");if(c&&globals.parameters){var g=decodeURIComponent(globals.parameters);t.set("alternate shell",c+" "+g),c=t.get("RDP_WCConnectionName"),c&&t.set("RDP_WCConnectionName",c+"["+encodeURIComponent(g)+"]")}c=t.get("RDP_WCConnectionName"),utils.isString(c)&&t.set("RDP_WCConnectionName",c.toLowerCase()),w.clientID=t.get("authentication ticket client id"),w.serverID=t.get("authentication ticket server id"),void 0!==globals.redirectToServer&&(w.address=globals.redirectToServer,delete globals.redirectToServer),_protocol.start(w)}else parseInt(p["blaze image quality"],10)<40&&t.get("session bpp")>16&&(p["session bpp"]=16),t.extend(p),t.set("full address",t.get("full address")||"localhost"),globals.console&&t.set("connect to console",1),t.remove("wc client"),delete globals.redirectToServer;audio.Context||t.set("audiomode",2),I=!t.get("audiomode"),function(){var e="mp3,aac";is.IE||(e+=",wav",is.firefox&&(e+=",opus")),t.set("audio codecs",e)}(),globals.directprint===!0&&t.set("ps2pdf args",'-embedjs "this.print({bUI: false, bSilent: true, bShrinkToFit: true});"'),globals.clipboard===!1?t.set("redirectclipboard",0):0===t.get("redirectclipboard")&&l(!1),globals.printing===!1&&t.set("redirectprinters",0),globals.fileDownload===!1&&globals.fileUpload===!1?t.set("drivestoredirect",""):t.get("drivestoredirect")||s(!1),0!==t.get("use client timezone")&&o(t),utils.isTrue(globals.ReuseSession)&&(t.set("reuse session",1),t.set("remoteapplicationmode",0)),d=t.get("convert unicode to scancode"),f=t.get("keyboard locale"),f?globals.keyboard_locale=f:(f=globals.keyboard_locale?globals.keyboard_locale:"00000409",t.set("keyboard locale",f)),CI("Locale: "+f),utils.isTrue(globals.fastLogoff)&&t.get("remoteapplicationmode")&&t.set("RDP_FastLogoff",1),t.has("remoteapplicationmode")&&(globals.remoteapplicationmode=t.get("remoteapplicationmode")),n(t,"RDP_RenderMode"),n(t,"RDP_OrderSupport"),e.authToken&&t.set("auth token",e.authToken),e.redirect&&t.add(e.redirect),_protocol.acceleration(t.get("blaze acceleration"),t.get("blaze image quality")),u=t.get("full address"),R.setSize(t.get("desktopwidth"),t.get("desktopheight")),e.scale_to_fit&&(CI("Scale to fit enabled"),scaling.enableAutoScaling())});$.when(j,D).done(function(e,t){function n(e){if(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;o++){var i=t[o].trim(),a=i.match(/([^:]+):(.):(.*)/);if(a){var s=a[1],l=a[2],c=a[3];if(c&&r.indexOf(s)>=0){var u=c.obfs(5321),d=s.obfs(5321)+" unicodeTest";n[n.length]=d+":"+l+":"+u}else n[n.length]=i}}return n.join("\n")}}function o(e){if(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;o++){var r=t[o].trim(),a=r.match(/([^:]+):(.):(.*)/);if(a){var s=a[1],l=a[2],c=a[3];if(s.indexOf(" unicodeTest")>=0&&(s=s.split(" unicodeTest")[0]),c&&i.indexOf(s)>=0){var u=c.defs(5321),d=s.defs(5321);n[n.length]=d+":"+l+":"+u}else n[n.length]=r}}return n.join("\n")}}var r=["html password","blaze password","password"],i=r.map(function(e){return e.obfs(5321)});t&&0!==t.search(/^\d/)&&e.add(t),_protocol.supportsBinary()&&!globals.textOnly?(globals.disableCustomCompression||is.firefox||is.IE?CI("Disabled custom image compression"):e.set("image compression","lz4"),!globals.disableBulkCompression&&"DataView"in window?e.set("bulk compression","lz4"):CI("Disabled bulk compression")):(CI("Text only"),e.set("text only",1));var a=e.toString();if(utils.doReconnect){var s="";if(_sessionStorage){try{a=o(sjcl.decrypt("password",_sessionStorage.getItem("AN_Reconnect_Blaze_INI"),{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}))}catch(l){console.log("CRYPTO ERR AN_Reconnect_Blaze_INI: ")}s=_sessionStorage.getItem("AN_Reconnect_AutoReconnectCookie")}a+=s?"\nauto reconnect cookie:s:"+s:"\nauto reconnect cookie:s:xrdp fake cookie"}else if(_sessionStorage){_sessionStorage.setItem("AN_Reconnect_Blaze_INI",sjcl.encrypt("password",n(a),{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}));var c=JSON.parse(sessionStorage.getItem("AN_Reconnect_Blaze_INI"));try{delete c.iv,delete c.salt,delete c.adata,delete c.cipher,delete c.iter,delete c.ks,delete c.mode,delete c.ts,delete c.v,sessionStorage.setItem("AN_Reconnect_Blaze_INI",JSON.stringify(c))}catch(l){console.log("No Crypto to be applied")}}C("c","c",[a]);var u=null,d=a.indexOf("alternate shell:s:");d>=0&&(u=a.substring(d),u.indexOf("\n")>=0&&(u=u.substring(0,u.indexOf("\n"))),globals.alternate_shell=u.substring(u.lastIndexOf(":")+1));var f=null,g=a.indexOf("username:s:");g>=0&&(f=a.substring(g),f.indexOf("\n")>=0&&(f=f.substring(0,f.indexOf("\n"))),p.username=f.substring(f.lastIndexOf(":")+1)),globals.alternate_shell&&globals.alternate_shell.length&&(p["alternate shell"]=globals.alternate_shell,p.remoteapplicationmode=1,p["shell working directory"]=globals.shell_working_directory||""),window.console&&"table"in console?(console.groupCollapsed("Configuration"),console.table(e.table()),console.groupEnd()):CI("Blaze: {",a.replace(/assword:s:.*$/gm,"assword:s:******"),"}")}),utils.autoResize=function(){var e=utils.isTrue(globals.simResize),t=e?function(){function e(e){return Math.round(Math.random()*Math.max(e-100,0)+100)}return function(){var t=utils.viewportSize();return t[0]=e(t[0]),t[1]=e(t[1]),t}}():utils.viewportSize,n=function(){var e=[p.desktopwidth,p.desktopheight];return function(n){if(!(is.android&&keyboard&&keyboard.isVisible())&&(!i||n)){var o=utils.constraintMinResolution(t());o.equal(e)||(e=o,C("c","S",o),CI("Resizing:",o[0],o[1]),i=!0,setTimeout(function(){i=!1},3e3))}}}(),o=utils.debounce(n,0),r=utils.debounce(n,500),i=!0;return{enable:_.doOnce(function(){if(CI("Setting up auto resize;"),i=!1,utils.isNewAP())window.addEventListener("message",function(e){"AP_resize"===e.data&&o()});else{var e=utils.Prop.getName(document,"cancelFullscreen")||utils.Prop.getName(document,"cancelFullScreen");if(e)e=e.replace(/cancelFullScreen/i,"fullscreenchange"),document.addEventListener(e,o);else if(is.IE)document.addEventListener("MSFullscreenChange",function(){o()});else if("matchMedia"in window){var t=window.matchMedia("(orientation: portrait)");t.addListener(function(){r()})}is.android?window.addEventListener("resize",function(){setTimeout(function(){n(!0)},300)}):is.iOS||window.addEventListener("resize",r)}CI("Autoresize enabled"),r()}),unlock:function(){i=!1}}}()}function Data(e){function t(e){return e.split("\n").reduce(function(e,t){var n=t.match(/([^:]+):(.):(.*)/);return n&&(e[n[1].trim()]="i"===n[2]?parseInt(n[3],10):"x"===n[2]?parseInt(n[3],16):n[3]),e},{})}var n=t(e);return{add:function(e){$.extend(n,t(e))},has:function(e){return e in n},get:function(e){return e in n?n[e]:""},set:function(e,t,o){switch(o||typeof n[e]){case"string":n[e]=t.toString();break;case"number":n[e]="number"==typeof t?t:parseInt(t);break;default:n[e]=t}},remove:function(e){delete n[e]},extend:function(e){$.each(e,this.set)},toString:function(){var e="";return $.each(n,function(t,n){e+=t+":"+("number"==typeof n?"i":"s")+":"+n+"\n"}),e},table:function(){var e=[];return $.each(n,function(t,n){var o;o=t.indexOf("assword")===-1&&t.indexOf("sso ")===-1?n:"******",e.push({name:t,value:o})}),e},each:function(e){$.each(n,e)}}}function enableTouchSupport(){"use strict";function e(e){se.actions.twoFingerTap(e)}function t(e){e.direction!=C&&se.actions[se.twoFingerActionMap[e.direction]](e),c()}function n(e){e.direction!=C&&se.actions[se.threeFingerActionMap[e.direction]](e),c()}function o(e){"pressup"===e.type?b(scaling.getTruePosition(e.center)):(f(e.center),V=!0)}function r(e){V?(m(scaling.getTruePosition(e.center)),Y=!0):B=$.extend(!0,{},M)}function i(e){Y&&(v(scaling.getTruePosition(e.center)),Y=!1)}function a(e){V?he(scaling.getTruePosition(e.center)):(M.translate={x:B.translate.x+e.deltaX,y:B.translate.y+e.deltaY},scaling.requestElementUpdate())}function s(e){"pinchstart"===e.type&&(H=M.scale||1,S=e.center,T=scaling.getTruePosition(S)),M.scale=H*(e.scale<1?e.scale+X:e.scale-X),M.translate.x=-(T.x*M.scale-S.x-U.width()*(M.scale-1)/2),M.translate.y=-(T.y*M.scale-S.y-U.height()*(M.scale-1)/2),scaling.requestElementUpdate()}function l(e){var t=scaling.getTruePosition(e.center);d(e.center),e.timeStamp-G>q||j(_,t)>Q?(G=e.timeStamp,_=t,h(_),toolbar.fn.endAltTab()):h(_),keyboard.clear&&keyboard.clear(),keyboard.showOnNextTap&&is.iOS&&keyboard.isNative&&keyboard.show(!0),utils.tryiOSDownload&&utils.tryiOSDownload()}function c(){oe.set({enable:!1}),re.set({enable:!1}),setTimeout(function(){oe.set({enable:!0}),re.set({enable:!0})},300)}function u(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}function d(e){if(globals.clickAnimation){var t=ce.clone();t.offset({top:e.y-35,left:e.x-35}).addClass("touch-feedback-animate-outward").appendTo("body").one(le,function(e){t.remove()})}}function f(e){if(globals.clickAnimation){var t=ce.clone();t.offset({top:e.y-35,left:e.x-35}).addClass("touch-feedback-animate-inward").appendTo("body").one(le,function(e){t.remove()})}}function p(e,t){var n=globals.numericValue("mouseWheelSpeed",120);globals.reverseTouchScroll&&(n=-n),t==R&&(n=-n),w("u","w",[Math.round(e.x),Math.round(e.y),n])}function g(e,t,n){w("u","b",[Math.round(e.x),Math.round(e.y),ue[t],n])}function h(e){g(e,de,pe),g(e,de,ge)}function m(e){g(e,de,pe)}function v(e){g(e,de,ge)}function b(e){g(e,fe,pe),g(e,fe,ge)}function y(){function e(){return{x:p.position.x+p.offset.x,y:p.position.y+p.offset.y}}function t(e){void 0!=e.x&&(p.position.x=e.x-p.offset.x),void 0!=e.y&&(p.position.y=e.y-p.offset.y)}function n(n){var o=e();null==n&&(n=!0);var r=0,i=0;o.x<d&&(r=+f,o.x<0&&t({x:0})),o.y<d&&(i=+f,o.y<0&&t({y:0})),o.x>z()-d&&(r=-f,o.x>z()&&t({x:z()}));var a=U.height()*((M.scale+1)/2)+M.translate.y;o.y>K()-d&&(i=-f,o.y>K()&&t({y:K()})),o.y>a&&(i=0,t({y:a})),n&&(M.translate.x+=r,M.translate.y+=i,scaling.requestElementUpdate())}function s(){var e="translate3d("+p.position.x+"px, "+p.position.y+"px, 0)";p.el.style.webkitTransform=e,p.el.style.mozTransform=e,p.el.style.transform=e}var c=$('<div id="touchpad-cursor"></div>');c.appendTo(U.parent()),c.hide();var u,d=10,f=8,p={el:document.querySelector("#touchpad-cursor"),position:{x:0,y:0},offset:{x:0,y:0}},g=$.extend(!0,{},p.position),y={onPanStart:function(t){keyboard&&keyboard.hide(),g=$.extend(!0,{},p.position),V&&(m(scaling.getTruePosition(e())),Y=!0),u=setInterval(n,20)},onPanEnd:function(t){Y&&(v(scaling.getTruePosition(e())),Y=!1),clearInterval(u)},onPan:function(t){p.position.x=g.x+t.deltaX,p.position.y=g.y+t.deltaY,n(!1),s(),he(scaling.getTruePosition(e()))},onPress:function(t){"pressup"===t.type?b(scaling.getTruePosition(e())):V=!0},onTap:function(t){var n=scaling.getTruePosition(e());t.timeStamp-G>q||j(_,n)>Q?(G=t.timeStamp,_=n,h(_),toolbar.fn.endAltTab()):h(_),keyboard.showOnNextTap&&is.iOS&&keyboard.isNative&&keyboard.show(!0),utils.tryiOSDownload&&utils.tryiOSDownload()}};ve.setCursor=function(e){var t;t="none"===e||"auto"===e?["none",0,0]:e.split(" ");var n=$.extend(!0,{},p.offset);p.offset.x=parseInt(t[1],10),p.offset.y=parseInt(t[2],10);var o={x:n.x-p.offset.x,y:n.y-p.offset.y};p.position.x+=o.x,p.position.y+=o.y,g.x+=o.x,g.y+=o.y,c.css("background-image",t[0]),s()},ve.enable=function(e){globals.rdpTouchOperational=!1,Z.off("panmove panstart panend press pressup singletap"),Z.on("press pressup",y.onPress),Z.on("singletap",y.onTap),Z.on("panmove",y.onPan),Z.on("panstart",y.onPanStart),Z.on("panend",y.onPanEnd),p.position.x=z()/2,p.position.y=K()/2,c.show(),s(),ve.active=!0,utils.disableMouseCursor(),utils.disableMouseEvents()},ve.disable=function(e){Z.off("panmove panstart panend press pressup singletap"),Z.on("press pressup",o),Z.on("singletap",l),Z.on("panmove",a),Z.on("panstart",r),Z.on("panend",i),c.hide(),ve.active=!1,utils.disableMouseCursor(),utils.disableMouseEvents(),utils.enableMouseCursor(),utils.enableMouseEvents()},$(window).on("resize",function(){ve.active&&(p.position.x=z()/2,p.position.y=K()/2,s())}),this.touchpadEnabled=!0}var w=_protocol.send.regular;globals.rdpTouchOperational=!1;var S,T,_,C=(function(){return window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Hammer.DIRECTION_NONE),A=Hammer.DIRECTION_LEFT,E=Hammer.DIRECTION_RIGHT,I=Hammer.DIRECTION_UP,R=Hammer.DIRECTION_DOWN,k=A|E,x=I|R,D=k|x,O=1,N=2,P=4,L=8,F=document.querySelector("#canvas"),U=$(F),M=scaling.transform,z=scaling.innerWidth,K=scaling.innerHeight,j=scaling.pointDistance,B=$.extend(!0,{},M),H=1,G=Date.now(),V=!1,Y=!1,W=150,q=500,Q=20,X=.15,J=15,Z=new Hammer.Manager(document.querySelector("#screen"),{touchAction:"none"}),ee=new Hammer.Tap({event:"singletap",taps:1}),te=new Hammer.Tap({event:"twoFingerTap",taps:1,pointers:2}),ne=new Hammer.Press({time:W}),oe=new Hammer.Pinch({pointer:2,threshold:X}),re=new Hammer.Pan({pointers:1,threshold:3}),ie=new Hammer.Pan({event:"twoFingerPan",pointers:2,direction:D}),ae=new Hammer.Pan({event:"threeFingerPan",pointers:3,direction:D});scaling.enableMobileResize(),re.requireFailure([ie,ae]),oe.requireFailure([ie,ae]),ie.requireFailure(ae),te.recognizeWith(oe),te.recognizeWith(re),Z.add([ee,ne,re,oe,te,ie,ae]);var se=function(e){function t(e){var t;e.pointers[0].clientX<e.pointers[1].clientX?(t=scaling.getTruePosition({x:e.pointers[0].clientX,y:e.pointers[0].clientY}),h(t),h(t)):(t=scaling.getTruePosition({x:e.pointers[1].clientX,y:e.pointers[1].clientY}),h(t),h(t))}function n(e){return function(t){t.eventType==Hammer.INPUT_END&&e(t)}}var o={};o[R]="twoFingerSwipeDown",o[I]="twoFingerSwipeUp",o[A]="twoFingerSwipeLeft",o[E]="twoFingerSwipeRight";var r={};r[R]="threeFingerSwipeDown",r[I]="threeFingerSwipeUp",r[A]="threeFingerSwipeLeft",r[E]="threeFingerSwipeRight";var i=function(){function e(e,n){(j(t,n.center)>J||n.distance<10)&&(t=n.center,p(scaling.getTruePosition(n.center),e))}var t={x:0,y:0};return{scrollDown:e.bind(this,I),scrollUp:e.bind(this,R)}}(),a=toolbar.fn.sendKeys,s={noAction:function(){},scrollDown:i.scrollDown,scrollUp:i.scrollUp,doubleClickAtLeftFinger:n(t),toggleKeyboard:n(toolbar.fn.toggleKeyboard),disconnect:n(toolbar.fn.disconnect),arrowLeft:n(a.bind(null,KEYS["LEFT ARROW"])),arrowRight:n(a.bind(null,KEYS["RIGHT ARROW"])),arrowUp:n(a.bind(null,KEYS["UP ARROW"])),arrowDown:n(a.bind(null,KEYS["ARROW DOWN"])),pageUp:n(a.bind(null,KEYS["PAGE UP"])),pageDown:n(a.bind(null,KEYS["PAGE DOWN"])),tab:n(a.bind(null,KEYS.TAB)),shiftTab:n(a.bind(null,KEYS.SHIFT,KEYS.TAB)),altShift:n(a.bind(null,KEYS.ALT,KEYS.TAB)),altF4:n(a.bind(null,KEYS.ALT,KEYS.F4)),ctrlF4:n(a.bind(null,KEYS.CTRL,KEYS.F4)),altKey:n(a.bind(null,KEYS.ALT)),windowsKey:n(a.bind(null,KEYS.CTRL,KEYS.ESCAPE)),contextMenu:n(a.bind(null)),ctrlEsc:n(a.bind(null,KEYS.CTRL,KEYS.ESCAPE)),printScreen:n(a.bind(null)),ctrlShift:n(a.bind(null,KEYS[KEYS.SHIFT])),winSpace:n(a.bind(null))},l={};for(var c in gestureConfig)l[c]=s[gestureConfig[c].method];return console.log("Gesture configuration: ",l),
{actions:l,twoFingerActionMap:o,threeFingerActionMap:r}}(gestureConfig);Z.on("hammer.input",function(e){if(e.preventDefault(),_protocol.setInteractive(!1),window.scrollTo(0,0),globals.rdpTouchSupported&&globals.rdpTouchOperational){var t=null;switch(e.eventType){case O:t="tb";break;case N:t="tu";break;case L:case P:t="te",toolbar.fn.endAltTab()}return void e.changedPointers.forEach(function(e){if(e.pointerId){var n=e.pointerId||e.identifier||++touchEventId,o=scaling.getTruePosition({x:e.pageX||e.x,y:e.pageY||e.y});_protocol.send.priority("u",t,[n,Math.floor(o.x),Math.floor(o.y)])}else{var o=scaling.getTruePosition({x:e.pageX,y:e.pageY});_protocol.send.priority("u",t,[e.identifier,Math.floor(o.x),Math.floor(o.y)])}})}e.isFinal&&(V=!1,_protocol.setInteractive(!0)),3===e.pointers.length&&4===e.eventType&&e.distance<70&&e.velocity<.65&&(se.actions.threeFingerTap(e),c())}),Z.on("press pressup",o),Z.on("singletap",l),Z.on("panmove",a),Z.on("panstart",r),Z.on("panend",i),Z.on("pinchstart pinchmove",s),Z.on("twoFingerTap",e),Z.on("twoFingerPan",t),Z.on("threeFingerPan",n);var le=u(),ce=$('<div class="touch-feedback-container"><div class="touch-feedback-reticle"></div><div class="touch-feedback"></div></div>'),ue=[0,4096,16384,8192],de=1,fe=3,pe=1,ge=0,he=utils.throttle(function(e){e.x=Math.round(e.x),e.y=Math.round(e.y),w("u","m",[e.x,e.y])},50),me={};me.enable=function(e){return globals.rdpTouchEnabled?(touchSupport.touchpad.disable(),toolbar.setToggle("touchpad_toggle","disabled"),globals.rdpTouchOperational=!0,toolbar.setToggle("rpd_touch_toggle","enabled"),Z.off("press pressup"),Z.off("singletap"),Z.off("panmove"),Z.off("panstart"),Z.off("panend"),Z.off("pinchstart pinchmove"),Z.off("twoFingerTap"),Z.off("twoFingerPan"),void Z.off("threeFingerPan")):CI("RDP Touch disabled by Client.")},me.disable=function(c){return globals.rdpTouchEnabled?void(globals.rdpTouchOperational&&(Z.on("press pressup",o),Z.on("singletap",l),Z.on("panmove",a),Z.on("panstart",r),Z.on("panend",i),Z.on("pinchstart pinchmove",s),Z.on("twoFingerTap",e),Z.on("twoFingerPan",t),Z.on("threeFingerPan",n),touchSupport.touchpad.disable(),globals.rdpTouchOperational=!1,toolbar.setToggle("rpd_touch_toggle","disabled"))):CI("RDP Touch disabled by Client.")};var ve={};return{truePosition:scaling.getTruePosition,focusCaret:scaling.focusCaret,isDragging:function(){return Y},blurCaret:scaling.blurCaret,startTouchpad:y,touchpadEnabled:!1,touchpad:ve,rdpTouch:me}}!function(e,t){"use strict";var n,o,r,i=e,a=i.document,s=i.navigator,l=i.setTimeout,c=i.clearTimeout,u=i.setInterval,d=i.clearInterval,f=i.getComputedStyle,p=i.encodeURIComponent,g=i.ActiveXObject,h=i.Error,m=i.Number.parseInt||i.parseInt,v=i.Number.parseFloat||i.parseFloat,b=i.Number.isNaN||i.isNaN,y=i.Date.now,w=i.Object.keys,S=i.Object.defineProperty,T=i.Object.prototype.hasOwnProperty,_=i.Array.prototype.slice,C=function(){var e=function(e){return e};if("function"==typeof i.wrap&&"function"==typeof i.unwrap)try{var t=a.createElement("div"),n=i.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=i.unwrap)}catch(o){}return e}(),A=function(e){return _.call(e,0)},E=function(){var e,n,o,r,i,a,s=A(arguments),l=s[0]||{};for(e=1,n=s.length;e<n;e++)if(null!=(o=s[e]))for(r in o)T.call(o,r)&&(i=l[r],a=o[r],l!==a&&a!==t&&(l[r]=a));return l},I=function(e){var t,n,o,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,o=e.length;n<o;n++)T.call(e,n)&&(t[n]=I(e[n]));else{t={};for(r in e)T.call(e,r)&&(t[r]=I(e[r]))}return t},R=function(e,t){for(var n={},o=0,r=t.length;o<r;o++)t[o]in e&&(n[t[o]]=e[t[o]]);return n},k=function(e,t){var n={};for(var o in e)t.indexOf(o)===-1&&(n[o]=e[o]);return n},x=function(e){if(e)for(var t in e)T.call(e,t)&&delete e[t];return e},D=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},O=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},N=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},P=function(){var e,t;try{throw new h}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||N(t.stack)),e},L=function(){var e,n,o;if(a.currentScript&&(e=a.currentScript.src))return e;if(n=a.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(o=n.length;o--;)if("interactive"===n[o].readyState&&(e=n[o].src))return e;return"loading"===a.readyState&&(e=n[n.length-1].src)?e:(e=P())?e:t},F=function(){var e,n,o,r=a.getElementsByTagName("script");for(e=r.length;e--;){if(!(o=r[e].src)){n=null;break}if(o=O(o),null==n)n=o;else if(n!==o){n=null;break}}return n||t},$=function(){var e=O(L())||F()||"";return e+"ZeroClipboard.swf"},U=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),M={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},z="11.0.0",K={},j={},B=null,H=0,G=0,V={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},Y=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],W=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],q=new RegExp("^flash-("+W.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Q=new RegExp("^flash-("+W.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),X={swfPath:$(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(T.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))X[t]=e[t];else if(null==M.bridge)if("containerId"===t||"swfObjectId"===t){if(!pe(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");X[t]=e[t]}else X[t]=e[t];{if("string"!=typeof e||!e)return I(X);if(T.call(X,e))return X[e]}},Z=function(){return Ge(),{browser:R(s,["userAgent","platform","appName"]),flash:k(M,["bridge"]),zeroclipboard:{version:Ye.version,config:Ye.config()}}},ee=function(){return!!(M.disabled||M.outdated||M.sandboxed||M.unavailable||M.degraded||M.deactivated)},te=function(e,o){var r,i,a,s={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof o)for(r in e)T.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&Ye.on(r,e[r]);if(a&&a.length){for(r=0,i=a.length;r<i;r++)e=a[r].replace(/^on/,""),s[e]=!0,K[e]||(K[e]=[]),K[e].push(o);if(s.ready&&M.ready&&Ye.emit({type:"ready"}),s.error){for(r=0,i=W.length;r<i;r++)if(M[W[r].replace(/^flash-/,"")]===!0){Ye.emit({type:"error",name:W[r]});break}n!==t&&Ye.version!==n&&Ye.emit({type:"error",name:"version-mismatch",jsVersion:Ye.version,swfVersion:n})}}return Ye},ne=function(e,t){var n,o,r,i,a;if(0===arguments.length)i=w(K);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)T.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Ye.off(n,e[n]);if(i&&i.length)for(n=0,o=i.length;n<o;n++)if(e=i[n].toLowerCase().replace(/^on/,""),a=K[e],a&&a.length)if(t)for(r=a.indexOf(t);r!==-1;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return Ye},oe=function(e){var t;return t="string"==typeof e&&e?I(K[e])||null:I(K)},re=function(e){var t,n,o;if(e=ge(e),e&&!Se(e))return"ready"===e.type&&M.overdue===!0?Ye.emit({type:"error",name:"flash-overdue"}):(t=E({},e),ye.call(this,t),"copy"===e.type&&(o=ke(j),n=o.data,B=o.formatMap),n)},ie=function(){var e=M.sandboxed;if(Ge(),"boolean"!=typeof M.ready&&(M.ready=!1),M.sandboxed!==e&&M.sandboxed===!0)M.ready=!1,Ye.emit({type:"error",name:"flash-sandboxed"});else if(!Ye.isFlashUnusable()&&null===M.bridge){var t=X.flashLoadTimeout;"number"==typeof t&&t>=0&&(H=l(function(){"boolean"!=typeof M.deactivated&&(M.deactivated=!0),M.deactivated===!0&&Ye.emit({type:"error",name:"flash-deactivated"})},t)),M.overdue=!1,Ie()}},ae=function(){Ye.clearData(),Ye.blur(),Ye.emit("destroy"),Re(),Ye.off()},se=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Ye.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var o in n)"string"==typeof o&&o&&T.call(n,o)&&"string"==typeof n[o]&&n[o]&&(j[o]=n[o])},le=function(e){"undefined"==typeof e?(x(j),B=null):"string"==typeof e&&T.call(j,e)&&delete j[e]},ce=function(e){return"undefined"==typeof e?I(j):"string"==typeof e&&T.call(j,e)?j[e]:void 0},ue=function(e){if(e&&1===e.nodeType){o&&($e(o,X.activeClass),o!==e&&$e(o,X.hoverClass)),o=e,Fe(e,X.hoverClass);var t=e.getAttribute("title")||X.title;if("string"==typeof t&&t){var n=Ee(M.bridge);n&&n.setAttribute("title",t)}var r=X.forceHandCursor===!0||"pointer"===Ue(e,"cursor");Be(r),je()}},de=function(){var e=Ee(M.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),o&&($e(o,X.hoverClass),$e(o,X.activeClass),o=null)},fe=function(){return o||null},pe=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ge=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=r),E(e,{type:t,target:e.target||o||null,relatedTarget:e.relatedTarget||null,currentTarget:M&&M.bridge||null,timeStamp:e.timeStamp||y()||null});var n=V[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&E(e,{target:null,version:M.version}),"error"===e.type&&(q.test(e.name)&&E(e,{target:null,minimumVersion:z}),Q.test(e.name)&&E(e,{version:M.version})),"copy"===e.type&&(e.clipboardData={setData:Ye.setData,clearData:Ye.clearData}),"aftercopy"===e.type&&(e=xe(e,B)),e.target&&!e.relatedTarget&&(e.relatedTarget=he(e.target)),me(e)}},he=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?a.getElementById(t):null},me=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,o="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Me(n),l=i.screenLeft||i.screenX||0,c=i.screenTop||i.screenY||0,u=a.body.scrollLeft+a.documentElement.scrollLeft,d=a.body.scrollTop+a.documentElement.scrollTop,f=s.left+("number"==typeof e._stageX?e._stageX:0),p=s.top+("number"==typeof e._stageY?e._stageY:0),g=f-u,h=p-d,m=l+g,v=c+h,b="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,E(e,{srcElement:n,fromElement:o,toElement:r,screenX:m,screenY:v,pageX:f,pageY:p,clientX:g,clientY:h,x:g,y:h,movementX:b,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ve=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},be=function(e,t,n,o){o?l(function(){e.apply(t,n)},0):e.apply(t,n)},ye=function(e){if("object"==typeof e&&e&&e.type){var t=ve(e),n=K["*"]||[],o=K[e.type]||[],r=n.concat(o);if(r&&r.length){var a,s,l,c,u,d=this;for(a=0,s=r.length;a<s;a++)l=r[a],c=d,"string"==typeof l&&"function"==typeof i[l]&&(l=i[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(u=E({},e),be(l,c,[u],t))}return this}},we=function(e){var t=null;return(U===!1||e&&"error"===e.type&&e.name&&Y.indexOf(e.name)!==-1)&&(t=!1),t},Se=function(e){var t=e.target||o||null,i="swf"===e._source;switch(delete e._source,e.type){case"error":var a="flash-sandboxed"===e.name||we(e);"boolean"==typeof a&&(M.sandboxed=a),W.indexOf(e.name)!==-1?E(M,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,E(M,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ke();break;case"ready":n=e.swfVersion;var s=M.deactivated===!0;E(M,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),Ke();break;case"beforecopy":r=t;break;case"copy":var l,c,u=e.relatedTarget;!j["text/html"]&&!j["text/plain"]&&u&&(c=u.value||u.outerHTML||u.innerHTML)&&(l=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),c!==l&&e.clipboardData.setData("text/html",c)):!j["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":Te(e),Ye.clearData(),t&&t!==Le()&&t.focus&&t.focus();break;case"_mouseover":Ye.focus(t),X.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!D(e.relatedTarget,t)&&_e(E({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),_e(E({},e,{type:"mouseover"})));break;case"_mouseout":Ye.blur(),X.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!D(e.relatedTarget,t)&&_e(E({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),_e(E({},e,{type:"mouseout"})));break;case"_mousedown":Fe(t,X.activeClass),X.bubbleEvents===!0&&i&&_e(E({},e,{type:e.type.slice(1)}));break;case"_mouseup":$e(t,X.activeClass),X.bubbleEvents===!0&&i&&_e(E({},e,{type:e.type.slice(1)}));break;case"_click":r=null,X.bubbleEvents===!0&&i&&_e(E({},e,{type:e.type.slice(1)}));break;case"_mousemove":X.bubbleEvents===!0&&i&&_e(E({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},Te=function(e){if(e.errors&&e.errors.length>0){var t=I(e);E(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Ye.emit(t)},0)}},_e=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,o=n&&n.ownerDocument||a,r={view:o.defaultView||i,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:o.createEvent?0:1},s=E(r,e);n&&o.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=o.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},Ce=function(){var e=X.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=X.swfObjectId+"_fallbackContent";G=u(function(){var e=a.getElementById(n);ze(e)&&(Ke(),M.deactivated=null,Ye.emit({type:"error",name:"swf-not-found"}))},t)}},Ae=function(){var e=a.createElement("div");return e.id=X.containerId,e.className=X.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+He(X.zIndex),e},Ee=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Ie=function(){var e,t=M.bridge,n=Ee(t);if(!t){var o=Pe(i.location.host,X),r="never"===o?"none":"all",s=Oe(E({jsVersion:Ye.version},X)),l=X.swfPath+De(X.swfPath,X);n=Ae();var c=a.createElement("div");n.appendChild(c),a.body.appendChild(n);var u=a.createElement("div"),d="activex"===M.pluginType;u.innerHTML='<object id="'+X.swfObjectId+'" name="'+X.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(d?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+o+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+X.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=u.firstChild,u=null,C(t).ZeroClipboard=Ye,n.replaceChild(t,c),Ce()}return t||(t=a[X.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),M.bridge=t||null,t},Re=function(){var e=M.bridge;if(e){var o=Ee(e);o&&("activex"===M.pluginType&&"readyState"in e?(e.style.display="none",function r(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),o.parentNode&&o.parentNode.removeChild(o)}else l(r,10)}()):(e.parentNode&&e.parentNode.removeChild(e),o.parentNode&&o.parentNode.removeChild(o))),Ke(),M.ready=null,M.bridge=null,M.deactivated=null,n=t}},ke=function(e){var t={},n={};if("object"==typeof e&&e){for(var o in e)if(o&&T.call(e,o)&&"string"==typeof e[o]&&e[o])switch(o.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[o],n.text=o;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[o],n.html=o;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[o],n.rtf=o}return{data:t,formatMap:n}}},xe=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var o in e)if(T.call(e,o))if("errors"===o){n[o]=e[o]?e[o].slice():[];for(var r=0,i=n[o].length;r<i;r++)n[o][r].format=t[n[o][r].format]}else if("success"!==o&&"data"!==o)n[o]=e[o];else{n[o]={};var a=e[o];for(var s in a)s&&T.call(a,s)&&T.call(t,s)&&(n[o][t[s]]=a[s])}return n},De=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(e.indexOf("?")===-1?"?":"&")+"noCache="+y():""},Oe=function(e){var t,n,o,r,a="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(r=e.trustedDomains)),r&&r.length)for(t=0,n=r.length;t<n;t++)if(T.call(r,t)&&r[t]&&"string"==typeof r[t]){if(o=Ne(r[t]),!o)continue;if("*"===o){s.length=0,s.push(o);break}s.push.apply(s,[o,"//"+o,i.location.protocol+"//"+o])}return s.length&&(a+="trustedOrigins="+p(s.join(","))),e.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+p(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(a+=(a?"&":"")+"jsVersion="+p(e.jsVersion)),a},Ne=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var n=e.indexOf("/");return e=n===-1?e:t===-1||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Pe=function(){var e=function(e){var t,n,o,r=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;t<n;t++)if(T.call(e,t)&&(o=Ne(e[t]))){if("*"===o){r.length=0,r.push("*");break}r.indexOf(o)===-1&&r.push(o)}return r};return function(t,n){var o=Ne(n.swfPath);null===o&&(o=t);var r=e(n.trustedDomains),i=r.length;if(i>0){if(1===i&&"*"===r[0])return"always";if(r.indexOf(t)!==-1)return 1===i&&t===o?"sameDomain":"always"}return"never"}}(),Le=function(){try{return a.activeElement}catch(e){return null}},Fe=function(e,t){var n,o,r,i=[];if("string"==typeof t&&t&&(i=t.split(/\s+/)),e&&1===e.nodeType&&i.length>0)if(e.classList)for(n=0,o=i.length;n<o;n++)e.classList.add(i[n]);else if(e.hasOwnProperty("className")){for(r=" "+e.className+" ",n=0,o=i.length;n<o;n++)r.indexOf(" "+i[n]+" ")===-1&&(r+=i[n]+" ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},$e=function(e,t){var n,o,r,i=[];if("string"==typeof t&&t&&(i=t.split(/\s+/)),e&&1===e.nodeType&&i.length>0)if(e.classList&&e.classList.length>0)for(n=0,o=i.length;n<o;n++)e.classList.remove(i[n]);else if(e.className){for(r=(" "+e.className+" ").replace(/[\r\n\t]/g," "),n=0,o=i.length;n<o;n++)r=r.replace(" "+i[n]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Ue=function(e,t){var n=f(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Me=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),o=i.pageXOffset,r=i.pageYOffset,s=a.documentElement.clientLeft||0,l=a.documentElement.clientTop||0,c=0,u=0;if("relative"===Ue(a.body,"position")){var d=a.body.getBoundingClientRect(),f=a.documentElement.getBoundingClientRect();c=d.left-f.left||0,u=d.top-f.top||0}t.left=n.left+o-s-c,t.top=n.top+r-l-u,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},ze=function(e){if(!e)return!1;var t=f(e,null),n=v(t.height)>0,o=v(t.width)>0,r=v(t.top)>=0,i=v(t.left)>=0,a=n&&o&&r&&i,s=a?null:Me(e),l="none"!==t.display&&"collapse"!==t.visibility&&(a||!!s&&(n||s.height>0)&&(o||s.width>0)&&(r||s.top>=0)&&(i||s.left>=0));return l},Ke=function(){c(H),H=0,d(G),G=0},je=function(){var e;if(o&&(e=Ee(M.bridge))){var t=Me(o);E(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+He(X.zIndex)})}},Be=function(e){M.ready===!0&&(M.bridge&&"function"==typeof M.bridge.setHandCursor?M.bridge.setHandCursor(e):M.ready=!1)},He=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||b(e)?"string"==typeof e&&(t=He(m(e,10))):t=e,"number"==typeof t?t:"auto"},Ge=function(t){var n,o,r,i=M.sandboxed,a=null;if(t=t===!0,U===!1)a=!1;else{try{o=e.frameElement||null}catch(s){r={name:s.name,message:s.message}}if(o&&1===o.nodeType&&"IFRAME"===o.nodeName)try{a=o.hasAttribute("sandbox")}catch(s){a=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(a=!0)}}return M.sandboxed=a,i===a||t||Ve(g),a},Ve=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function o(e){e&&(l=!0,e.version&&(d=t(e.version)),!d&&e.description&&(d=t(e.description)),e.filename&&(u=n(e.filename)))}var r,i,a,l=!1,c=!1,u=!1,d="";if(s.plugins&&s.plugins.length)r=s.plugins["Shockwave Flash"],o(r),s.plugins["Shockwave Flash 2.0"]&&(l=!0,d="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)a=s.mimeTypes["application/x-shockwave-flash"],r=a&&a.enabledPlugin,o(r);else if("undefined"!=typeof e){c=!0;try{i=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,d=t(i.GetVariable("$version"))}catch(f){try{i=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,d="6.0.21"}catch(p){try{i=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,d=t(i.GetVariable("$version"))}catch(g){c=!1}}}}M.disabled=l!==!0,M.outdated=d&&v(d)<v(z),M.version=d||"0.0.0",M.pluginType=u?"pepper":c?"activex":l?"netscape":"unknown"};Ve(g),Ge(!0);var Ye=function(){return this instanceof Ye?void("function"==typeof Ye._createClient&&Ye._createClient.apply(this,A(arguments))):new Ye};S(Ye,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Ye.config=function(){return J.apply(this,A(arguments))},Ye.state=function(){return Z.apply(this,A(arguments))},Ye.isFlashUnusable=function(){return ee.apply(this,A(arguments))},Ye.on=function(){return te.apply(this,A(arguments))},Ye.off=function(){return ne.apply(this,A(arguments))},Ye.handlers=function(){return oe.apply(this,A(arguments))},Ye.emit=function(){return re.apply(this,A(arguments))},Ye.create=function(){return ie.apply(this,A(arguments))},Ye.destroy=function(){return ae.apply(this,A(arguments))},Ye.setData=function(){return se.apply(this,A(arguments))},Ye.clearData=function(){return le.apply(this,A(arguments))},Ye.getData=function(){return ce.apply(this,A(arguments))},Ye.focus=Ye.activate=function(){return ue.apply(this,A(arguments))},Ye.blur=Ye.deactivate=function(){return de.apply(this,A(arguments))},Ye.activeElement=function(){return fe.apply(this,A(arguments))};var We=0,qe={},Qe=0,Xe={},Je={};E(X,{autoActivate:!0});var Ze=function(e){var t=this;t.id=""+We++,qe[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Ye.on("*",function(e){return t.emit(e)}),Ye.on("destroy",function(){t.destroy()}),Ye.create()},et=function(e,o){var r,i,a,s={},l=qe[this.id],c=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof o)for(r in e)T.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&this.on(r,e[r]);if(a&&a.length){for(r=0,i=a.length;r<i;r++)e=a[r].replace(/^on/,""),s[e]=!0,c[e]||(c[e]=[]),c[e].push(o);if(s.ready&&M.ready&&this.emit({type:"ready",client:this}),s.error){for(r=0,i=W.length;r<i;r++)if(M[W[r].replace(/^flash-/,"")]){this.emit({type:"error",name:W[r],client:this});break}n!==t&&Ye.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ye.version,swfVersion:n})}}return this},tt=function(e,t){var n,o,r,i,a,s=qe[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)i=w(l);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)T.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(i&&i.length)for(n=0,o=i.length;n<o;n++)if(e=i[n].toLowerCase().replace(/^on/,""),a=l[e],a&&a.length)if(t)for(r=a.indexOf(t);r!==-1;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return this},nt=function(e){var t=null,n=qe[this.id]&&qe[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:I(n)),t},ot=function(e){if(lt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=E({},e));var t=E({},ge(e),{client:this});ct.call(this,t)}return this},rt=function(e){if(!qe[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=ut(e);for(var t=0;t<e.length;t++)if(T.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?Xe[e[t].zcClippingId].indexOf(this.id)===-1&&Xe[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Qe++,Xe[e[t].zcClippingId]=[this.id],X.autoActivate===!0&&dt(e[t]));var n=qe[this.id]&&qe[this.id].elements;n.indexOf(e[t])===-1&&n.push(e[t])}return this},it=function(e){var t=qe[this.id];if(!t)return this;var n,o=t.elements;e="undefined"==typeof e?o.slice(0):ut(e);for(var r=e.length;r--;)if(T.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;(n=o.indexOf(e[r],n))!==-1;)o.splice(n,1);var i=Xe[e[r].zcClippingId];if(i){for(n=0;(n=i.indexOf(this.id,n))!==-1;)i.splice(n,1);0===i.length&&(X.autoActivate===!0&&ft(e[r]),delete e[r].zcClippingId)}}return this},at=function(){var e=qe[this.id];return e&&e.elements?e.elements.slice(0):[]},st=function(){qe[this.id]&&(this.unclip(),this.off(),delete qe[this.id])},lt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=qe[this.id],n=t&&t.elements,o=!!n&&n.length>0,r=!e.target||o&&n.indexOf(e.target)!==-1,i=e.relatedTarget&&o&&n.indexOf(e.relatedTarget)!==-1,a=e.client&&e.client===this;return!(!t||!(r||i||a))},ct=function(e){var t=qe[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ve(e),o=t&&t.handlers["*"]||[],r=t&&t.handlers[e.type]||[],a=o.concat(r);if(a&&a.length){var s,l,c,u,d,f=this;for(s=0,l=a.length;s<l;s++)c=a[s],u=f,"string"==typeof c&&"function"==typeof i[c]&&(c=i[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(u=c,c=c.handleEvent),"function"==typeof c&&(d=E({},e),be(c,u,[d],n))}}},ut=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},dt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=i.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=i.event))&&(t(n),Ye.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Je[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},ft=function(e){if(e&&1===e.nodeType){var t=Je[e.zcClippingId];if("object"==typeof t&&t){for(var n,o,r=["move","leave","enter","out","over"],i=0,a=r.length;i<a;i++)n="mouse"+r[i],o=t[n],"function"==typeof o&&e.removeEventListener(n,o,!1);delete Je[e.zcClippingId]}}};Ye._createClient=function(){Ze.apply(this,A(arguments))},Ye.prototype.on=function(){return et.apply(this,A(arguments))},Ye.prototype.off=function(){return tt.apply(this,A(arguments))},Ye.prototype.handlers=function(){return nt.apply(this,A(arguments))},Ye.prototype.emit=function(){return ot.apply(this,A(arguments))},Ye.prototype.clip=function(){return rt.apply(this,A(arguments))},Ye.prototype.unclip=function(){return it.apply(this,A(arguments))},Ye.prototype.elements=function(){return at.apply(this,A(arguments))},Ye.prototype.destroy=function(){return st.apply(this,A(arguments))},Ye.prototype.setText=function(e){if(!qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("text/plain",e),this},Ye.prototype.setHtml=function(e){if(!qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("text/html",e),this},Ye.prototype.setRichText=function(e){if(!qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("application/rtf",e),this},Ye.prototype.setData=function(){if(!qe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData.apply(this,A(arguments)),this},Ye.prototype.clearData=function(){if(!qe[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.clearData.apply(this,A(arguments)),this},Ye.prototype.getData=function(){if(!qe[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.getData.apply(this,A(arguments))},"function"==typeof define&&define.amd?define(function(){return Ye}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ye:e.ZeroClipboard=Ye}(function(){
return this||window}());var LOG_NAME="AccessNowLog.txt",LOG_QUOTA=20971520,utils;!function(e){"use strict";e.noop=function(){},e.retArg=function(e){return e},e.toArray=function(){var e=Array.prototype.slice;return function(t,n,o){var r=n||0;if(!o)return e.call(t,r);var i=0,a=t.length;for(o.length=a-r;r<a;)o[i++]=t[r++];return o}}(),e.toArrayFactory=function(t){var n=e.toArray;return t=t||[],function(e,o){return n(e,o,t)}},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this,o=e.toArray(arguments,1);return function(){return n.apply(t,o.concat(e.toArray(arguments)))}}),e.Prop=function(){for(var e=["WebKit","Moz","MS","O"],t=e.length,n=0;n<t;++n)e.push(e[n].toLowerCase());return{getName:function(){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var n={};return function(o,r){if(!o)return null;var i=n;if(r in i)return i[r];if(o[r])return i[r]=r,r;for(var a=t(r),s=e,l=0;l<s.length;++l){var c=s[l]+a;if(c in o)return i[r]=c,c}}}(),get:function(e,t,n){return t=this.getName(e,t),t?e[t]:n},set:function(e,t,n){t=this.getName(e,t),e[t]=n}}}(),e.timeLabel=function(){var e=new Date,t=e.toString();return t.substring(0,t.indexOf("GMT")-1)+":"+("00"+e.getMilliseconds()).slice(-3)}}(utils||(utils={}));var _URL=utils.Prop.get(window,"URL",{createObjectURL:utils.retArg,revokeObjectURL:utils.noop});!function(e){"use strict";var t=e.Prop.get(window,"BlobBuilder");t&&(e.buildBlob=function(e,n){var o=new t;return o.append(e.buffer||e),o.getBlob(n)});var n=e.Prop.get(window,"Blob");if(n){var o;try{o=new n}catch(r){}if(!o)return;var i=[null],a={type:""};e.buildBlob=function(e,t){return i[0]=e.buffer||e,a.type=t,new n(i,a)};try{var s=new FileReader;s.onload=function(){var t=new Uint32Array(this.result);t[0]===l[0]&&function(){var t=e.buildBlob=function(e,t){return i[0]=e,a.type=t,new n(i,a)};try{var o=new Uint8Array([1,2,3,4,5,6,7,8]),r=new Uint8Array(o.buffer,2,4);s.onload=function(){var n=new Uint8Array(this.result);4===n.length&&3===n[0]&&6===n[3]&&(e.blobFromData=t)},s.readAsArrayBuffer(t(r))}catch(l){}}()};var l=new Uint32Array([12345678]);o=new n([l]),s.readAsArrayBuffer(o)}catch(r){}}"buildBlob"in e&&(e.blobFromData=function(t,n,o,r){return e.buildBlob(t.buffer.slice(n,o),r)})}(utils||(utils={}));var requestFileSystem=utils.Prop.get(window,"requestFileSystem"),log,is;!function(e,t,n){"use strict";var o=utils.timeLabel,r=utils.noop,i=r,a=r;t.logging=!1,e.toFile=function(){i.apply(null,arguments)};var s=null;e.pause=function(){s||(s=i,i=r)},e.resume=function(){s&&(i=s,i("--------"),s=null)},e.toggle=function(){s?e.resume():e.pause()};var l=n.Deferred();e.promise=l.promise,e.console=function(e){var t=utils.toArray(arguments,1);null!=e&&(e.apply?e.apply(console,t):e(t.join(" "))),e===console.error&&(t[0]="*** "+t[0]),i.apply(this,t),a.apply(this,t)};try{window.CL=null!=console.log?e.console.bind(this,console.log):r,window.CI=null!=console.info?e.console.bind(this,console.info):r,window.CE=null!=console.error?e.console.bind(this,console.error):r,window.CL!=r&&window.CI!=r&&window.CE!=r||alert("Javascript Console functions are disabled. Please check if it i caused bya browser plugin.")}catch(c){window.CL=window.CI=window.CE=r}e.start=function(s){function c(){t.logging=!1,i=r,f="",l.reject.apply(l,arguments)}function u(e,t){return t=t||n.Deferred(),e(t.resolve,t.reject),t.promise()}function d(e){var t;switch(e.code){case e.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case e.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case e.SECURITY_ERR:t="SECURITY_ERR";break;case e.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case e.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error: "+e.code}console.error("File System Error: ",t),c(e.code)}if(s=s||{},s.toScreen&&(a=function(){var e=n('<div class="log"></div>').appendTo("body"),t=[];return e.click(function(){return t.length=0,e.html(""),!1}),function(){t.unshift(utils.toArray(arguments).join(" "))>50&&(t.length=50),e.html(t.join("<br>"))}}()),!requestFileSystem)return console.info("No logging support"),void c();var f=function(){function e(e){var t="";if(e){t=o()+": "+e+"\n";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=typeof r;"string"!==i&&"number"!==i||(t+=n+": "+r+"\n")}}return t}var t=o()+": Location: "+location+"\n";return t+=e(navigator)}(),p=r;i=function(){f+=o()+": "+utils.toArray(arguments).join(" ")+"\n",p()};var g=function(){var e=n.Deferred();try{var t=utils.Prop.get(navigator,"persistentStorage");t?u(t.requestQuota.bind(t,LOG_QUOTA),e):(t=utils.Prop.get(window,"storageInfo"),u(t.requestQuota.bind(t,window.PERSISTENT,LOG_QUOTA),e))}catch(o){e.reject(o)}return e.pipe(function(e){return e||n.Deferred().reject({code:"Empty quota"})}).promise()}();g.fail(d).done(function(n){function o(e,t){var n=u(e).fail(d);return t?n.done(t):n}console.info("File system quota:",n),o(requestFileSystem.bind(window,window.PERSISTENT,n),function(n){function r(e){return u(n.root.getFile.bind(n.root,i,e))}var i=s.name||LOG_NAME;r({create:!1}).pipe(function(e){return u(e.remove.bind(e))}).always(function(){r({create:!0}).fail(d).done(function(n){o(n.createWriter.bind(n),function(o){o.onwriteend=p=function(){f.length>0&&o.readyState!==o.WRITING&&(o.write(utils.buildBlob(f,"text/plain")),f="")},o.onerror=function(e){d((e.target||e.srcElement).error)},t.logging=!0,l.resolve(e),"toURL"in n&&alert(n.toURL()),f.length>1&&p()})})})})})}}(log||(log={}),is||(is={}),jQuery);var utils;DEBUG=!1,function(e,t){!function(e){"use strict";e.isNewAP=function(){try{return window.parent&&window.parent.killFrame}catch(e){return!1}},e.resetSettings=function(){try{_localStorage.clear(),_sessionStorage.clear();for(var t=document.cookie.split(";"),n=0;n<t.length;n++)try{var o=t[n],r=o.indexOf("="),i=r>-1?o.substr(0,r):o;document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}catch(a){}}catch(a){CE("Error occured while clearing settings. Probably incognito mode.")}_sessionStorage.setItem("AN_Settings_Reset","true"),e.reload()},e.Store=function(){function t(){}var n={};Object.defineProperties(n,{sim:{value:!0},getItem:{value:function(e){return e in this?this[e]:null}},setItem:{value:function(e,t){this[e]=t}},removeItem:{value:function(e){delete this[e]}},clear:{value:function(){for(var t in this)e.hop(this,t)&&this.removeItem(t)}}});var o={};return Object.defineProperties(o,{sim:{value:!0},getItem:{value:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}},setItem:{value:function(e,t){var n,o=new Date;o.setTime(o.getTime()+31536e4),n="; expires="+o.toGMTString(),document.cookie=e+"="+t+n+"; path=/"}},removeItem:{value:function(e){this.setItem(e,"",-1)}},clear:{value:function(){var e=document.cookie.split("; ");for(var t in e)document.cookie=/^[^=]+/.exec(e[t])[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}}),t.prototype=o,t.use=function(e){try{var n=Math.random();return e.setItem(n,n),e.removeItem(n),e}catch(o){return CI("Private browsing, using memory storage. Reconnect will not work"),new t}},t}();var n=function(){function t(){window.parent.ANStorage=window.parent.ANStorage||{},window.parent.ANStorage[window.name]=window.parent.ANStorage[window.name]||{},n=window.parent.ANStorage[window.name]}var n;return t.prototype.getItem=function(e){return e in n?n[e]:null},t.prototype.setItem=function(e,t){n[e]=null!=t&&t.toString?t.toString():t},t.prototype.removeItem=function(e){n[e]=null},t.prototype.clear=function(){for(var t in n)e.hop(n,t)&&n.removeItem(t)},t}();if(window._localStorage=e.Store.use(window.localStorage),e.isNewAP()?window._sessionStorage=new n:window._sessionStorage=e.Store.use(window.sessionStorage),_sessionStorage&&"true"!==_sessionStorage.getItem("AN_programaticRefresh")&&(_sessionStorage.setItem("AN_doReconnect","false"),_sessionStorage.setItem("AN_logInSuccess","false")),_sessionStorage.setItem("AN_programaticRefresh","false"),e.reload=function(){_sessionStorage.setItem("AN_programaticRefresh","true"),location.reload()},e.listCookies=function(){for(var e=document.cookie.split(";"),t="",n=1;n<=e.length;n++)t+=n+" "+e[n-1]+"\n";for(t+="<br> local storage: <br>",n=0;n<localStorage.length;n++)t+=" "+localStorage.key(n)+" =["+localStorage.getItem(localStorage.key(n))+"]<br>";for(t+="<br> session storage: <br>",n=0;n<sessionStorage.length;n++)t+=" "+sessionStorage.key(n)+" ="+sessionStorage.getItem(sessionStorage.key(n))+"]<br>";return t},e.tryParseJSON=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(n){}return!1},e.doReconnect=!1,_sessionStorage){var o=_sessionStorage.getItem("AN_Reconnect_retries");if(null!=o){var r=e.tryParseJSON(o)||{reconnectRetries:0,reconnectStartTime:0};e.reconnectRetries=r.retries,e.reconnectStartTime=r.startTime}else e.reconnectRetries=0,e.reconnectStartTime=0}else e.reconnectRetries=0,e.reconnectStartTime=0;e.resolved=t.Deferred().resolve(),e.docReady=function(){var e=t.Deferred();return t(e.resolve),e.promise()}(),e.winLoaded=function(){var e=t.Deferred();return t(window).on("load",e.resolve),e.promise()}(),String.prototype.obfs=function(e){var t=65535;if("number"!=typeof e||e%1!==0||"number"!=typeof e||e%1!==0)return this.toString();for(var n=this.toString().split(""),o=0;o<n.length;o++){var r=n[o].charCodeAt(0);r<=t&&(n[o]=String.fromCharCode((n[o].charCodeAt(0)+e)%t))}return n.join("")},String.prototype.defs=function(e){var t=65535;return"number"!=typeof e||e%1!==0||"number"!=typeof e||e%1!==0?this.toString():this.toString().obfs(t-e)},String.prototype.toArray=function(e){e=e||[];for(var t=this.trim().split(/\s*[ ,;]+\s*/),n=0;n<t.length;++n)t[n].length&&e.push(t[n]);return e},String.prototype.forEach=function(){var e=this.toArray();e.forEach.apply(e,arguments)},String.prototype.joinJSON=function(e){var t=this.valueOf();return t?e?t.slice(0,-1)+","+e.slice(1):t:e},Array.prototype.map||(Array.prototype.map=function(e,t){var n,o,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=new Array(a),r=0;r<a;){var s,l;r in i&&(s=i[r],l=e.call(n,s,r,i),o[r]=l),r++}return o}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),o=n.length>>>0,r=0;if(2==arguments.length)t=arguments[1];else{for(;r<o&&!(r in n);)r++;if(r>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[r++]}for(;r<o;r++)r in n&&(t=e(t,n[r],r,n));return t}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),o=n.length>>>0,r=arguments[1],i=0;i<o;i++)if(t=n[i],e.call(r,t,i,n))return t}),Array.prototype.equal=function(e){if(this===e)return!0;if(!e||this.length!==e.length)return!1;for(var t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0},Array.prototype.shuffle=function(e,t){for(e=e||0,t=t<this.length?t:this.length;e<t;++e){var n=e+(Math.random()*(t-e)|0),o=this[e];this[e]=this[n],this[n]=o}return this},Array.prototype.shuffleEx=function(e){for(var t=this.indexOf(e);t!==-1;){this.splice(t,1);var n=this.indexOf(e,t);this.shuffle(t,n===-1?this.length:n),t=n}return this},Date.prototype.getName=function(e){var t=this.toString(),n=t.match(/\(([^)]+)/);return n?n[1]:e?"Daylight Time":"Standard Time"},Date.daylightChanges=function(){for(var e=new Date,t=e.getFullYear(),n=[null,null],o=e.getTimezoneOffset(),r=1;r<367;++r){var i=new Date(t,0,r),a=i.getTimezoneOffset();if(a!==o)for(var s=r-2,l=18;l<50;++l){var c=i;if(i=new Date(t,0,s,l),a=i.getTimezoneOffset(),a!==o){var u=0,d=(a-o)/60,f=a<o?c.getHours()-d:i.getHours()+d;f>23&&(f=23,u=59),c.hours=f,c.mins=u,n[a<o?0:1]=c,o=a;break}}}return n},"ArrayBuffer"in window&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this,e,t-e),o=new Uint8Array(n);return o.buffer}),window.atob||(window.atob=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t){if(t=t.replace(/=+$/,""),t.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,r="",i=0,a=0;o=t.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?r+=String.fromCharCode(255&n>>(-2*i&6)):0)o=e.indexOf(o);return r}}()),e.hop=function(e,t){return"hasOwnProperty"in e?e.hasOwnProperty(t):t in e},e.isString=function(e,t){return"string"==typeof e&&e.length>=(t||1)},e.isTrue=function(){var t=/^\s*(true|yes|on|1)\s*$/i;return function(n){return e.isString(n)?t.test(n):!!n}}(),e.isFalse=function(){var t=/^\s*(false|no|off|0)\s*$/i;return function(n){return e.isString(n)?t.test(n):!n}}();var i=e.min=function(e,t){return e<t?e:t},a=e.max=function(e,t){return e>t?e:t};e.calc=function(e,t){return i(a(~~e,0),~~t)},e.longestWord=function(){var e=/\s+/;return function(t){var n=t.split(e),o=n.map(function(e){return e.length});return Math.max.apply(Math,o)}}(),e.genGUID="".replace.bind("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}),e.usernameContainsDomain=function(e){return null!==e.match(/[\\@]/)},e.cancelEvent=function(e){return e.stopPropagation(),e.preventDefault(),!1},e.allocFactory=function(t){function n(){var n=t();return n.free=e.noop,n}return n.free=e.noop,n},e.poolFactory=function(e){function t(){o.push(this)}function n(){var n=o.pop()||e();return n.free=t,n}var o=[];return n.free=function(e){o.push(e)},n},e.debounce=function(e,t,n){var o=0;return function(){function r(){n||e.apply(i,a),o=0}var i=this,a=arguments;o?_clearTimeout(o):n&&e.apply(i,a),o=_setTimeout(r,t||300)}},e.throttle=function(e,t){var n=!1;return function(){n||(e.apply(null,arguments),n=!0,setTimeout(function(){n=!1},t))}},e.offBeforeUnload=function(){t(window).off("beforeunload")},e.onBeforeUnload=function(){defaults.debug||setTimeout(function(){t(window).on("beforeunload",function(){if(globals.leaveMessage)return e.TR(globals.leaveMessage)})},500)},e.setMultipleTimeouts=function(e,t){return t.map(function(t){return setTimeout(e,t)})},e.clearMultipleTimeouts=function(e){e.forEach(function(e){clearTimeout(e)})},e.ce=function(e){return document.createElement(e)},e.removeFromURL=function(e,t){var n=e.indexOf("?"+t+"=");if(n==-1&&(n=e.indexOf("&"+t+"=")),n==-1)return{newURL:e,param:t,value:null};var o,r=e.substring(0,n+1),i=e.substring(n+1),a=i.indexOf("&");return a==-1?(o=i,i="",{newURL:r.substring(0,r.length-1),param:t,value:o.split("=")[1]}):(o=i.substring(0,a),i=i.substring(a+1),{newURL:r+i,param:t,value:o.split("=")[1]})},e.escapeHtml=function(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[<>"'\/]/g,function(e){return t[e]}).replace(/&lt;br&gt;/gi,"<br>")},e.printStackTrace=function(){if(console.trace)return void console.trace();var e=new Error;e.stack;console.error(e)}}(e),function(n){var o=/^ *([^ =]+) *= *(.*)$/;t.extend(n,{all:function(t){t=t||{};var n=t.raw?e.retArg:decodeURIComponent,r=t.filter||e.retArg;return document.cookie.split(";").reduce(function(e,t){if(t=t.match(o),null!==t){var i=r(decodeURIComponent(t[1]));if(i){var a=n(t[2]);"NothinG"!==a&&(e[i]=a)}}return e},Object.create(null))},get:function(t,n){var o=document.cookie.match(new RegExp("(?:^|;) *"+encodeURIComponent(t)+" *= *([^;]*)"));return null===o?null:(n?e.retArg:decodeURIComponent)(o[1])},create:function(t,n,o){o="number"==typeof o?{expires:o}:o||{},t=o.orig?t:encodeURIComponent(t);var r=[t+"="+(o.raw?e.retArg:encodeURIComponent)(n)];if("path"in o&&r.push("path="+o.path),"expires"in o){var i=o.expires;i instanceof Date||(i=new Date,i.setDate(i.getDate()+o.expires)),r.push("expires="+i.toGMTString())}document.cookie=r.join("; ")},remove:function(t){switch(typeof t){case"string":case"number":this.create(t,"NothinG",{path:"/",expires:-1});break;case"undefined":t=e.retArg;case"function":var n=this.all({filter:function(e){return t(e)?e:null}});for(var o in n)this.remove(o)}}})}(e.cookies||(e.cookies={}))}(utils||(utils={}),jQuery);var _setTimeout=window.setTimeout,_clearTimeout=window.clearTimeout,_setInterval=window.setInterval,_clearInterval=window.clearInterval,is;!function(e,t){t.extend(e,{HTTPS:0===location.protocol.search(/https/i),browserType:function(){var e=navigator.userAgent;return function(t){return null!==e.match(t)}}(),canvasSupported:function(){var e=utils.ce("canvas");return!(!e.getContext||!e.getContext("2d"))}}),e.iPhone=e.browserType(/(iPhone)|(iPod)/),e.iPad=e.browserType(/iPad/),e.iOS=e.iPhone||e.iPad,e.android=e.browserType(/Android/),e.silk=e.browserType(/Silk-Accelerated/),e.webkit=e.browserType(/WebKit/i),e.edge=e.browserType(/Edge/i),e.chrome=e.browserType(/(Chrome|CriOS).(\S+)/)&&!e.edge,e.chromeOS=e.browserType(/CrOS/),e.IE=e.browserType(/Trident/i),e.IE&&(e.IEtouch=e.browserType(/Touch/),e.desktopIE=/WOW64;/.test(navigator.userAgent)),e.firefox=e.browserType(/Firefox.(\S+)/),e.safari=!e.chrome&&e.browserType(/Version.(\S+).+Safari/),e.oldSafari=e.safari&&e.browserType(/Version\/5\.1\.. /),e.touchScreen="ontouchstart"in window||navigator.msMaxTouchPoints||navigator.maxTouchPoints,e.mobile=e.iOS||e.android||e.silk||e.IEtouch||e.browserType(/(Mobi)|(RIM)|(hpwOS)/),e.TV=e.browserType(/TV/),e.mac=e.browserType(/Macintosh/),e.phone=e.mobile&&Math.min(screen.width,screen.height)<768&&Math.max(screen.width,screen.height)<1024,e.Juniper="DanaTop"in window&&window.DanaTop(top),e.CISCO=utils.isString(window.CSCO_Gateway),e.CheckPoint="__CP_GET_BROWSER_TYPE__"in window&&window.__CP_GET_BROWSER_TYPE__(),e.SSLVPN=e.Juniper||e.CISCO||e.CheckPoint,e.SSLVPN&&CI("Using SSL VPN:",e.Juniper?"Juniper":e.CISCO?"Cisco":e.CheckPoint?"CheckPoint":"unknown"),e.portrait=function(){return e.iOS?90!==Math.abs(window.orientation):screen.width<screen.height},e.landscape=function(){return!this.portrait()},e.gateway=e.HTTPS&&!!utils.cookies.get("ESG_GWID")}(is||(is={}),jQuery),function(e){"use strict";e.fn.dataset=function(t){switch(this.length){case 0:return null;case 1:return this[0].dataset?this[0].dataset[t]:this.attr("data-"+t);default:var n={};return this.each(function(o){n[e(o).attr("id")]=e(o).dataset(t)}),n}}}(jQuery),utils.appName=$(document.body).dataset("name")||"start",is.view="view"===utils.appName,window.WebSocket=utils.Prop.get(window,"WebSocket"),(WebSocket||!defaults.noHTTPS&&utils.cookies.get("ESG_GWID"))&&is.canvasSupported()||function(){var e=utils.appName;defaults.locale&&(e+="&"+defaults.locale),location.replace("notsupported.html?"+e)}(),utils.preloadImages=function(e,t){t.forEach(function(t){$("<img/>")[0].src=e+t})},utils.loadCss=function(e){return $("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",media:"all"}).attr("href",e)},utils.viewportSize=function(){var e=0,t=0;if(utils.isNewAP())e=window.innerWidth,t=window.innerHeight;else if(is.mobile)e=is.iOS?is.portrait()?screen.width:screen.height:window.outerWidth,t=$(window).height(),is.IE&&(e=window.innerWidth,t=window.innerHeight);else{var n=document.documentElement||{offsetLeft:0,offsetTop:0};e=window.innerWidth-(n&&n.offsetLeft||0),t=window.innerHeight-(n&&n.offsetTop||0)}return[16380&e,t]},utils.constraintMinResolution=function(e){var t=[e[0],e[1]];return t[0]<globals.MinWidth&&(CI("Width too small, setting to minimum",e),t[0]=globals.MinWidth),t[1]<globals.MinHeight&&(CI("Height too small, setting to minimum",e),t[1]=globals.MinHeight),t},utils.copyObject=function(){return jQuery.extend.apply(jQuery,[Object.create(null)].concat(utils.toArray(arguments)))};var _=function(){return{doOnce:function(e){if("function"!=typeof e)throw new Error("Expected function instead of "+typeof e);var t=!1;return function(n){t||e(),t=!0}},keys:Object.keys,repeat:function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e},killEvent:function(e){return e.cancel=!0,e.returnValue=!1,e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}}}();!function(e){"use strict";var t=utils.Prop;e.fn.extend({invoke:function(e){return e.apply(this,utils.toArray(arguments,1))||this},if_:function(e){return jQuery.isFunction(e)&&(e=e.call(this)),this.if_CondMet=!!e,this.pushStack(e?this:[])},else_:function(e){var t=this.end();return t.if_CondMet?t.pushStack([]):t.if_(arguments.length?e:1)},enable:function(){return this.if_(function(){return this.val()}).select().else_().focus().end()},center:function(){return this.css("position","absolute"),this.css("top",Math.max(0,(window.innerHeight-e(this).outerHeight())/2+e(window).scrollTop())+"px"),this.css("left",Math.max(0,(window.innerWidth-e(this).outerWidth())/2+e(window).scrollLeft())+"px"),this.offset({top:Math.max(0,(window.innerHeight-e(this).outerHeight())/2+e(window).scrollTop()),left:Math.max(0,(window.innerWidth-e(this).outerWidth())/2+e(window).scrollLeft())}),this},resetForm:function(){return this.filter("form").each(function(){this.reset()})},getValues:function(t,n,o,r){return n=n||{},o=e.isFunction(o)?o:utils.retArg,r=e.isFunction(r)?r:utils.retArg,e(this).find(":input").not(":button").each(function(){var i=e(this),a=i.attr(t);if(a&&(a=o(a))){var s=a.replace(/\s+/g,"_");"blaze_image_quality"==s&&settings.externals[s]?n[a]=r(settings.externals[s]):n[a]=i.is(":input")?i.is(":checkbox")?i.is(":checked")?1:0:r(i.val()):r(i.html())}}),n},setValues:function(t,n){return t&&(n=e.isFunction(n)?n:utils.retArg,this.find("*[id]:not(:disabled)").each(function(){var o=e(this),r=n(o.attr("id"));if(r){var i=t[r];void 0!==i&&(o.is(":checkbox")?o.attr("checked",utils.isTrue(i)):o.is(":input")?o.val(i):o.html(i))}})),this},enableDisable:function(t){function n(){var t=e(this),n=t.dataset("for");utils.isString(n)&&(t.is(":checked")?(e(n).removeAttr("disabled"),e(n).parents("section").removeAttr("disabled")):(e(n).attr("disabled",!0),e(n).parents("section").attr("disabled",!0)))}return this.find(":checkbox").each(n).if_(t!==!1).off(".enableDisable").on("click.enableDisable",function(){setImmediate(n.bind(this))}).end().end()},hidden:function(t){var n={showConnection:"#an-settings-button-connection",showSecurity:"#an-settings-button-security",showLanguage:"#an-settings-button-language",showDisplay:"#an-settings-button-display",showReset:"#an-settings-reset",showAbout:"#an-settings-button-about",showAdvanced:"#an-settings-toggle",locale:"#locale"};return t=utils.isString(t)?t.toArray():t,t&&t.forEach&&t.forEach(function(t){t in n&&e(n[t]).hide();var o=/^\W/.test(t)?t:"#"+t,r=this.find(o);0===r.length&&(r=r.add(o+":first")),r.is(":button")?r.css("visibility","hidden"):r.is("form")?r.hide():r.parents("section:first").hide()},this),this},preventSelection:function(){return this.on("selectstart",!1).each(function(){t.set(this,"userSelect","none")})},enterFullScreen:function(){return this.each(function(){var e=t.get(this,"requestFullScreen")||t.get(this,"requestFullscreen");return e&&e.call(this,this.ALLOW_KEYBOARD_INPUT),!1})}}),e.fullScreen={leave:function(){var e=t.get(document,"cancelFullScreen")||t.get(document,"cancelFullscreen")||t.get(document,"exitFullscreen");return e?function(){e.call(document)}:utils.noop}(),enabled:function(){return t.get(document,"fullScreenEnabled")||t.get(document,"fullscreenEnabled")},on:function(){var e=t.get(document,"isFullScreen")||t.get(document,"fullScreen");if(e)return!0;var n=t.get(document,"fullScreenElement")||t.get(document,"fullscreenElement");return!!n},toggle:function(t){e.fullScreen.on()?e.fullScreen.leave():e(t||document.body).enterFullScreen()}}}(jQuery);var settings,globals=function(e,t){function n(e){return e.replace(/EAN_/g,"").split("&").reduce(function(e,t){return t=t.match(/^\??([^=]+)=?(.*)/),null!==t&&(e[decodeURIComponent(t[1])]=decodeURIComponent(t[2])),e},{})}function o(e){if(e.params){var o=atob(e.params);delete e.params,o&&t.extend(e,n(o))}}if(CI("URL parameters: utils:js:740"+location.search),e.urlParams=defaults.ignoreURLparameters?{}:n(location.search),o(e.urlParams),e.externals=function(){function n(e){if("EAN_"===e.substring(0,4))return e.substring(4)}if("undefined"!=typeof defaults.bloombergCookiesList){var o=defaults.bloombergCookiesList.split(",");for(var r in utils.cookies.all()){var i=o.indexOf(r);i>=0&&(o=o.slice(0,i).concat(o.slice(i+1)))}o.length>0&&(CI("Bloombrerg: Missing cookies:\n"+o.join("\n")),alert("Bloombrerg: Missing cookies:\n"+o.join("\n")))}var a=utils.cookies.all({filter:n});return sessionStorage.getItem("ReuseConnectionSettingsUrl")||utils.cookies.remove(n),t.extend(a,e.urlParams)}(),CI("All settings utils:js:757: "+JSON.stringify(e)),o(e.externals),_sessionStorage.getItem("AN_redirectInfo")&&(e.externals.autostart="true",CI("Setting settings.externals.autostart to true for redirecting")),"true"===_sessionStorage.getItem("AN_doReconnect")){var r;_sessionStorage&&(r=JSON.parse(_sessionStorage.getItem("AN_Reconnect_settings_externals"))),null==r&&(r={}),e.externals=r,e.externals.doReconnect=!0,utils.doReconnect=!0,CI("AutoStart: utils.js:770 setting settings.externals.autostart to true"),e.externals.autostart="true"}else _sessionStorage&&_sessionStorage.setItem("AN_Reconnect_settings_externals",JSON.stringify(e.externals));return is.managed=!!e.externals.id||!!e.externals.settingsURL,e.globalsFactory=function(){var n=utils.isTrue,o=utils.isFalse,r=e.externals;r.settings&&t.extend(defaults,defaults[r.settings]);var i=location.hostname.toLowerCase();t.extend(defaults,defaults["_"+i]);var a=(r.hidden||defaults.hidden||"").toArray();1!==a.length||a[0]||(a=[]);for(var s=0;s<a.length;++s)_localStorage.removeItem(a[s]);_localStorage.removeItem("password");var l=0;switch(utils.doReconnect||(l=Number("noSaved"in r?r.noSaved:defaults.noSaved)),l){case 1:if(!is.SSLVPN)break;case 2:!function(){function e(){utils.isString(t)&&_localStorage.setItem("GUID",t),utils.isString(n)&&_localStorage.setItem("locale",n)}var t=_localStorage.getItem("GUID"),n=_localStorage.getItem("locale");for(var o in _localStorage)0===o.indexOf("AN_Reconnect")||/^ANP_STORAGE/.test(o)||_localStorage.removeItem(o);e(),_localStorage=new utils.Store,e()}()}var c=defaults.overrideSaved||n(r.overrideSaved);return function(){function e(e){e in i&&(i[e]=n(i[e]))}var i=utils.copyObject(c?_localStorage:defaults,c?defaults:_localStorage,r,{hiddenFields:a});if(i.autostart=n(i.autostart),CI("AutoStart: utils.js:831 g.autostart = "+i.autostart),i.disableImageReuse=n(i.disableImageReuse),i.rightToLeft=n(i.rightToLeft),i.console=n(i.console),i.specialKeys=n(i.specialKeys),i.chromeKeys=n(i.chromeKeys),i.noEndDialog=n(i.noEndDialog),i.nameOnly=n(i.nameOnly),i.clipboard=n(i.clipboard),i.clipboardUseFlash=n(i.clipboardUseFlash),i.clipboardSeamlessCopy=!("clipboardSeamlessCopy"in i)||i.clipboardSeamlessCopy,i.clipboardSeamlessCopy=i.clipboardSeamlessCopy&&is.chrome&&!is.mobile,i.sendRawEvents="sendRawEvents"in i&&n(i.sendRawEvents),i.fileDownload=!("fileDownload"in i)||n(i.fileDownload),i.fileDownloadIcon=!("fileDownloadIcon"in i)||n(i.fileDownloadIcon),i.uploadSizeLimit=t.isNumeric(i.uploadSizeLimit)?parseInt(i.uploadSizeLimit):4096,i.fileUpload=!("fileUpload"in i)||n(i.fileUpload),i.fileUploadIcon=!("fileUploadIcon"in i)||!o(i.fileUploadIcon),i.ctrlAltDelIcon=!("ctrlAltDelIcon"in i)||i.ctrlAltDelIcon,i.altTabIcon=!("altTabIcon"in i)||i.altTabIcon,i.reconnectOnDropped=!("reconnectOnDropped"in i)||n(i.reconnectOnDropped),i.reconnectMaxMinutes="reconnectMaxMinutes"in i?i.reconnectMaxMinutes:5,i.maxHorizontalItems="maxHorizontalItems"in i?i.maxHorizontalItems:0,i.notificationTimeOut="notificationTimeOut"in i?i.notificationTimeOut:5e3,i.closeProgressState="closeProgressState"in i?i.closeProgressState:"connected",i.closeProgressDelay=t.isNumeric(i.closeProgressDelay)?parseInt(i.closeProgressDelay):2500,i.endProgressState="endProgressState"in i?i.endProgressState:"start",i.progressBackgroundColor="progressBackgroundColor"in i?i.progressBackgroundColor:"",i.shield=n(i.shield),i.printing=n(i.printing),i.directprint=!o(i.directprint),i.printToNewTab=!o(i.printToNewTab),console.log(i.printToNewTab),i.fps=n(i.fps),i.redirectUrlsOnServer=n(i.redirectUrlsOnServer),i.defaultErrorMessage=n(i.defaultErrorMessage),i.forceAutoKeyboardDefault=!0,i.enableAutoKeyboard=!("enableAutoKeyboard"in i)||n(i.enableAutoKeyboard),(!is.mobile&&!is.TV||is.desktopIE)&&(i.enableAutoKeyboard=!1),i.touchScreen=!("touchScreen"in i)||n(i.touchScreen),i.touchScreen=i.touchScreen&&is.touchScreen,i.clickAnimation="clickAnimation"in i&&n(i.clickAnimation),i.touchPad=!("touchPad"in i)||n(i.touchPad),i.rdpTouchEnabled="rdpTouchEnabled"in i&&n(i.rdpTouchEnabled),i.rdpTouchActive="rdpTouchActive"in i&&n(i.rdpTouchActive),i.rdpTouchAction=t.isNumeric(i.rdpTouchAction)?parseInt(i.rdpTouchAction):0,i.reverseTouchScroll="reverseTouchScroll"in i&&n(i.reverseTouchScroll),i.MinWidth=t.isNumeric(i.MinWidth)?parseInt(i.MinWidth):716,i.MinHeight=t.isNumeric(i.MinHeight)?parseInt(i.MinHeight):600,i.gwusername=i.gwusername||"",i.desktop_application="desktop_application"in i?i.desktop_application:null,e("encryption"),e("blaze_acceleration"),e("use_gateway"),e("remoteapplicationmode"),e("extract"),n(i.isManaged)&&(is.managed=!0),i.numericValue=function(e,t){return e in this?Number(this[e]):t},utils.doReconnect){i.blazeData=t.Deferred();try{i.blazeData.resolve(sjcl.decrypt("password",_sessionStorage.getItem("AN_Reconnect_blazeFile"),{iv:"YzT5QndoFgLmy97moR763Q==",salt:"8Q+ZPYmklTY=",adata:"",cipher:"aes",iter:1e4,ks:128,mode:"ccm",ts:64,v:1}))}catch(s){console.log("CRYPTO ERR AN_Reconnect_blazeFile - fallback AP",s),i.blazeData.resolve(sjcl.decrypt("password",_sessionStorage.getItem("AN_Reconnect_blazeFile")))}}else if(utils.isNewAP())i.blazeData=t.Deferred(),i.blazeData.resolve(window.parent.getBlazeData());else{var l="";try{for(var u=0;u<document.cookie.split(";").length-1;)element=document.cookie.split(";"),element.indexOf("EAN_settingsURL")>-1&&(l=element.split("=")[1]),u++}catch(s){}l.length>0?i.blazeData=t.ajax({cache:!1,url:"http://localhost:8033"+decodeURIComponent(localStorage.getItem("EAN_settingsURL"))}):i.blazeData=t.ajax({cache:!1,url:i.id?"../GetConnectionInfo.asp?ConnectionName="+encodeURIComponent(i.id):i.settingsURL||"resources/blaze.txt"})}return i}}(),e.globalsFactory()}(settings||(settings={}),jQuery),GUID=_localStorage.getItem("GUID");utils.isString(GUID)||(GUID=utils.genGUID(),_localStorage.setItem("GUID",GUID)),log&&utils.isTrue(globals.log)&&function(){log.start({toScreen:is.mobile});for(var e in globals)"function"!=typeof globals[e]&&log.toFile("setting",e,"=","password"===e?"******":globals[e])}(),utils.redirectOnEnd=function(){var e,t=globals.endURL;if(!t)return!1;switch(t.charAt(0)){case"#":var n=top.open("","_self","");return n.focus(),n.opener=top,n.close(),!0;case"^":e=parent,t=t.substring(1);break;case"$":e=top,t=t.substring(1);break;case"~":e=window,t="http://failed-loading/"+location.href+"@:@"+utils.TR("STR_SESSION_CANCELED");default:e=window}return e.location=t,!0};var severType=settings.externals.ServerType,verArr=version.split("."),Client={kind:settings.externals.id?2:is.view?1:is.managed&&"RDCB"!=severType?3:0};Client.major=verArr[0],Client.minor=verArr[1],Client.revision=verArr[2],Client.build=verArr[3],Client.version=Client.major+"."+Client.minor+"."+Client.revision+"."+Client.build,Client.id=function(){switch(Client.kind){case 2:return"AccessNow for PowerTerm WebConnect";case 1:return"AccessNow for VMware View";case 3:return"AccessManager";default:return"AccessNow"}}(),Client.name=Client.id+", version "+Client.version,window.requestAnimationFrame=utils.Prop.get(window,"requestAnimationFrame"),window.requestAnimFrame=window.requestAnimationFrame||function(e){_setTimeout(e,0)},function(e,t,n){
"use strict";var o=_URL,r="buildBlob"in e;e.supportsBinary=function(){return r},e.blobURL=function(t,n){return o.createObjectURL(e.buildBlob(t,n))},e.decode=r?function(e){var t=e.indexOf("base64,",6),n=atob(e.substring(t+7)),o=n.length,r=new Uint8Array(o);for(t=0;t<o;++t)r[t]=n.charCodeAt(t);return r}:function(e){var t=e.indexOf("base64,",6);return atob(e.substring(t+7))},e.makeBlob=r?function(t){var n=t.substring(5,t.indexOf(";",6));return e.buildBlob(e.decode(t),n)}:e.decode,e.makeURL=r?function(t){return o.createObjectURL(e.makeBlob(t))}:e.retArg,Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e&&e.__proto__});var i=function(){function t(){r.assign=function(e){return this.src=e,this},r.revoke=function(){o.revokeObjectURL(this.src)}}var n=e.ce("img"),r=Object.getPrototypeOf(n);r.assign=function(e){var t=this.getAttributeNode("src"),n=!t;return n&&(t=document.createAttribute("src")),t.value=e,n&&this.setAttributeNode(t),this},r.revoke=function(){var e=this.getAttributeNode("src");e&&o.revokeObjectURL(e.value)};var i="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAIAOw==";n.onload=function(){if(1===this.width){var o=e.makeURL(i);o===i?t():_setTimeout(function(){n.onload=function(){1===this.width&&t(),this.revoke()};try{n.src=o}catch(e){}},0)}};try{n.src=i}catch(a){}return r}();e.hidden=function(){var t,o=e.Prop.getName(document,"hidden");return o?(t=function(){return document[o]===!0},t.eventName=o.replace(/hidden/i,"visibilitychange"),t.event=function(e){n(document).on(t.eventName,function(){e(t())})}):(t=function(){return!1},t.event=e.noop),t}(),e.scheduleAnimFrame=function(){function t(e){1===o.push(e)&&s(n)}function n(){i.timeStamp=Date.now();var e=o;o=r;for(var n=0;n<e.length;++n){var a=e[n];a(i)&&t(a)}e.length=0,r=e}var o=[],r=[],i={timeStamp:0},a=e.hidden,s=window.requestAnimFrame;return _setInterval(function(){a()!==!1&&n()},1e3*(defaults.hiddenUpdateRateSeconds||12)),t}(),e.delayFactory=function(t){var n=null,o=e.scheduleAnimFrame,r={set:function(e){null===n&&o(r.now),n=e},now:function(e){n&&(t(n,e.timeStamp)?o(r.now):n=null)}};return r},e.factory=globals.disableImageReuse?e.allocFactory:e.poolFactory,t.screen=function(){var e,t;return{init:function(){if(!e){var t=this;e=n("<div>").css({position:"absolute",backgroundColor:"white",color:"black",overflow:"scroll"}).offset({left:0,top:0}).width(200).height(200).click(function(){t.clear()}),n(document.body).append(e),this.clear()}},clear:function(){e&&(e.empty(),t="")},append:function(n){e&&(t+=n+"<br>",e.html(t))}}}(),e.rewriteUrl=window.DanaWSUrl?window.DanaWSUrl:function(e){return e},e.TR=translator({locale:n('option[value="'+globals.locale+'"]:first').dataset("lang")||globals.locale,version:Client.version,extract:globals.extract}),function(){var t=n("#locale"),o=n("#keyboard_locale"),r=e.TR;globals.aboutDialog&&n.when(r.promise(),e.docReady).done(function(){n("#about").html(r(globals.aboutDialog))}),globals.keyboard_locale&&(globals.keyboard_locale=o.find('option[data-lang="'+globals.keyboard_locale+'"]').val()||globals.keyboard_locale),n.when(n.get(r.source("list")),r.promise(),e.docReady).fail(function(){t.parents("tr:first,div:first").hide()}).done(function(n){function i(){var n=t.val();if(n!==r.locale){try{_localStorage.setItem("locale",n)}catch(o){console.error("Could not update locale",a)}e.reload()}}var a=n[0].trim().split(/\s+/).reduce(function(e,t){var n={"en-us":"STR_LANG_ENGLISH",de:"STR_LANG_GERMAN","es-ar":"STR_LANG_SPANISH",fr:"STR_LANG_FRENCH",it:"STR_LANG_ITALIAN","ja-jp":"STR_LANG_JAPANESE","pt-br":"STR_LANG_PORTUGUESE","zh-cn":"STR_LANG_CHINESE_SIMPLIFIED","zh-tw":"STR_LANG_CHINESE_TRADITIONAL","ko-kr":"STR_LANG_KOREAN",ru:"STR_LANG_RUSSIAN"},i=n[t]||o.find('option[data-lang="'+t+'"]').text()||t;return e+'<option value="'+t+'">'+r(i)+"</option>"},"");t.html(a).val(r.locale).change(i)}),e.resetLocale=function(){o.val(o.find('option[data-lang="'+r.preferredLocale+'"]').val())}}(),e.deferred=function(){var t=[];return function(o){function r(e){return S=e,T.length=0,_.length=0,o}function i(){return C=null,A=null,r("pending")}function a(){return S}function s(){return"resolved"===S}function l(){return"rejected"===S}function c(e,n){var o=C,i=A,a=null;switch(n.length){case 0:n=t;break;case 1:if("function"==typeof n[0]){a=n[0];break}default:n=t.concat.apply(t,n)}if(e&&r(e),a)Array.isArray(i)?a.apply(o,i):a.call(o,i);else{var s=0;if(Array.isArray(i))for(;s!==n.length;++s)n[s]&&n[s].apply(o,i);else for(;s!==n.length;++s)n[s]&&n[s].call(o,i)}}function u(e,t,n,r){return"pending"===S&&(C=n,A=r,c(e,t)),o}function d(e,t){return u("resolved",T,e,t)}function f(e){return d(o,e)}function p(e,t){return u("rejected",_,e,t)}function g(e){return p(o,e)}function h(e,t,n){return S===e?c("",n):"pending"===S&&t.push.apply(t,n),o}function m(){return h("resolved",T,arguments)}function v(){return h("rejected",_,arguments)}function b(){return m.apply(null,arguments),v.apply(null,arguments)}function y(e,t){return m(e),v(t)}function w(e){return e?n.extend(e,E):o}o=o||{};var S="pending",T=[],_=[],C=null,A=null,E={reset:i,state:a,isResolved:s,isRejected:l,resolveWith:d,resolve:f,rejectWith:p,reject:g,done:m,fail:v,always:b,progress:e.noop,then:y,pipe:y,promise:w};return w(o)}}(),e.allocDeferred=function(){var t=e.poolFactory(e.deferred);return function(){return t().reset()}}(),e.deferredImage=function(){function t(){var e=i.assign.apply(this,arguments);return this.complete&&this.resolve(),e}function n(t){return t=e.deferred(t||o("img")),t.addEventListener("load",t.resolve),t.addEventListener("error",t.reject),t}var o=e.ce;return is.safari&&navigator.userAgent.indexOf("Version/5")!==-1?function(e){return e=n(e),e.assign=t,e}:n}(),e.closeIfPortal=function(){e.isNewAP()&&window.parent.killFrame(window.name)}}(utils,log||(log={}),jQuery),function(e){var t=utils.allocDeferred;e.wait=function(e){e=e||0;var n=t(),o=_setTimeout(function(){o=0,n.resolve(Date.now())},e);return n.always(function(){o&&(_clearTimeout(o),o=0)})},e.waiter=function(t,n){var o=null;return function(r){o&&o.reject().free(),o=r===!0?null:e.wait(t).done(n)}}}(jQuery);var newDialogs;$.when(utils.docReady,utils.TR.promise()).done(function(){newDialogs=function(){"use strict";function e(){return{closeButton:!0,newestOnTop:!0,progressBar:!0,showDuration:300,hideDuration:300,timeOut:globals.notificationTimeOut,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}function t(e){var t=e.title||e.html||"",a=e.body||"",s=e.buttons,l='<div class="modal" tabindex="-1" role="dialog" aria-labelledby="'+t+'"><div class="modal-dialog modal-sm" role="document"><div class="modal-content"><div class="alert alert-default margin-bottom-30"><button type="button" class="close" data-dismiss="modal" aria-label="'+g.close+'"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="aboutLabel">'+t+"</h4>"+(a?'<div class="modal-body">'+a+"</div>":"")+'<div class="modal-footer"></div></div></div></div></div>',c=$(l).modal({show:!1});return c=n(c,s),r(c,e),i(c,e),o(c)}function n(e,t){return t&&_.keys(t).forEach(function(n){"function"==typeof t[n]&&$('<button type="button" class="btn btn-primary">'+utils.TR(n)+"</button>").click(t[n].bind(e)).appendTo(e.find(".modal-footer"))}),e}function o(e){return e.open=function(t){return"function"==typeof t?e.on("show.bs.modal",t.bind(e)):e.modal("show"),e},e.close=function(t){return"function"==typeof t?e.on("hide.bs.modal",t.bind(e)):e.modal("hide"),e},e.title=function(t){return e.find(".modal-title").html(t),e.open()},e.setTitle=function(t){return e.find(".modal-title").html(t),e},e}function r(e,t){return t.onClose&&e.on("hide.bs.modal",t.onClose.bind(e)),t.onOpen&&e.on("shown.bs.modal",t.onOpen.bind(e)),t.onDismiss&&e.find("button.close").click(t.onDismiss.bind(e)),t.onCtrlEnter&&e.keydown(function(n){if(13==n.keyCode&&n.ctrlKey)return t.onCtrlEnter.call(e),_.killEvent(n)}),e.on({"keydown.dialog":a,"keyup.dialog":a,"keypress.dialog":a}),e}function i(e,t){t.background&&e.css("background",t.background)}function a(e){e.stopPropagation()}function s(e,t){return t=t||{},h[e]=$(e).modal({show:!1}),o(h[e]),r(h[e],t),t.buttons&&n(h[e],t.buttons),h[e]}function l(n,o){return utils.isString(n)&&(n={title:n}),o&&(n.critical=!0),utils.isString(n.title,b)&&(n.title=n.title.substr(0,b-4)+" ..."),n.buttons||n.onClose||o?t(n).open():(toastr.options=e(),toastr[o?"error":"info"](n.title))}function c(e){return h[e]}function u(e){var n=function(){var n=!1;e.onDismiss=function(){n=!0,e.canceling&&this.title(e.canceling),"function"==typeof e.onCancel&&e.onCancel()},e.body=v.spinner;var o=t(e);return o.find(".modal-title").css("text-align","center"),o}();return n}function d(e,t){return e=$.extend(e.logout?{buttons:{STR_YES:function(){e.logout(),this.close()},STR_NO:function(){this.close()}}}:{},e),l(e,t)}function f(e,t){return e=$.extend(e.logout?{buttons:{STR_CLOSE:function(){this.close()},STR_LOG_OFF:function(){e.logout(),this.close()}}}:{},e),e.logout||(e.logout=e.restart,e.onClose=function(){e.restart&&!e.restart()||utils.reload(),utils.closeIfPortal()}),function(t,n){0==t&&e.onClose(),utils.isString(t)&&(t={title:t}),n&&(t.critical=!0),e=$.extend(t,e),l(e)}}function p(e){function n(t){0==t&&r.open(),t=void 0===t?100:Math.round(t),t>=0?(r.setTitle(e.html+": "+t+"%"),o(r,t)):(r.setTitle(e.html),o(r,50)),t>=100&&r.close()}function o(e,t){e.find(".progress-bar").attr("aria-valuenow",t).css({width:t+"%"}).html(t+"%")}e=$.extend({body:v.progressbar,buttons:{STR_CANCEL:function(){this.close(),$.isFunction(e.onCancel)&&e.onCancel()},STR_HIDE:function(){this.close()}}},e);var r=t(e);return n(e.value||0),r.setProgress=n,r}toastr.options=e();var g={close:utils.TR("STR_CLOSE")},h={},m="CSCO_Env"in window?function(e,t){e.assign(t)}:function(e,t){e.src=t},v=(function(){var e=utils.ce;return function(t){var n=e("img");return m(n,t),n}}(),{spinner:'<div class="dialog-loader"><span class="loader"></span></div>',progressbar:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div></div>'}),b=(60*globals.numericValue("dialogTimeoutMinutes",2)*1e3,512);return{get:c,fromSelector:s,notify:l,makeModal:t,progress:u,progressbar:p,disconnect:d,restart:f}}()});var toolbar={ctrlDown:!1,input:null,protocol:null,adjustToElementsCount:function(){}};toolbar.altTabActive=!1,toolbar.fn={gestures:function(){newDialogs.gestures.open()},sendKeys:function(){if(toolbar.input){var e=[].slice.call(arguments);e.unshift("s"),toolbar.input.SimulatePress.apply(null,e)}},disconnect:function(e){e===!0&&doDisconnect();var t={focusedButtonNumber:1,html:utils.TR("STR_CONFIRM_DISCONNECT"),logout:function(){doDisconnect()}};newDialogs.disconnect(t)},help:function(){newDialogs.about.open()},invoke:function(f){eval(f)},toggleKeyboard:function(e){keyboard.isVisible()?keyboard.hide():keyboard.show(!0)},toggleAutoKeyboard:function(e){globals.enableAutoKeyboard=e},toggleTouchpad:function(e){globals.touchPad&&globals.touchScreen&&touchSupport&&touchSupport.touchpadEnabled&&(e?(touchSupport.touchpad.enable(),toolbar.setToggle("rpd_touch_toggle","disabled"),_localStorage.setItem("rdp_touch_state_pref","disabled")):touchSupport.touchpad.disable())},toggleRdpTouch:function(e){globals.rdpTouchSupported&&!globals.rdpTouchOperational?(touchSupport.rdpTouch.enable(),_localStorage.setItem("rdp_touch_state_pref","enabled")):(_localStorage.setItem("rdp_touch_state_pref","disabled"),touchSupport.rdpTouch.disable())},toggleAltTab:function(){toolbar.altTabActive?toolbar.input.simPress("s",KEYS.TAB):(toolbar.input.simDown("s",KEYS.ALT,KEYS.TAB),toolbar.input.simUp("S",KEYS.TAB),toolbar.altTabActive=!0,toolbar.buttons.altTab.el.addClass("activated"))},endAltTab:function(){return!!toolbar.altTabActive&&(setTimeout(function(){toolbar.input.simUp("s",KEYS.ALT),toolbar.altTabActive=!1,toolbar.buttons.altTab.el.removeClass("activated")},200),!0)},toggleAPMenu:function(){window.parent.toggleAppMenu()},setConfig:function(e,t){null!=e&&null!=t&&(globals[e]=t)},sendJSON:function(){var e=[].slice.call(arguments);_protocol.send.regular.apply(null,e)}},function(e,t){"use strict";function n(e){if(e)return c.css({left:e.left+"px",top:e.top+"px"}),e;var t=c[0].getBoundingClientRect();return{left:t.left,top:t.top}}function o(){c.hasClass("ExpandedHorizontal")?c.hasClass("Left")?(t("#ArrowElement").removeClass("arrow-right"),t("#ArrowElement").addClass("arrow-left")):(t("#ArrowElement").removeClass("arrow-left"),t("#ArrowElement").addClass("arrow-right")):c.hasClass("Left")?(t("#ArrowElement").removeClass("arrow-left"),t("#ArrowElement").addClass("arrow-right")):(t("#ArrowElement").removeClass("arrow-right"),t("#ArrowElement").addClass("arrow-left")),c.hasClass("ExpandedVertical")?c.hasClass("Top")?(t("#VerticalArrowElement").removeClass("arrow-down"),t("#VerticalArrowElement").addClass("arrow-up")):(t("#VerticalArrowElement").removeClass("arrow-up"),t("#VerticalArrowElement").addClass("arrow-down")):c.hasClass("Top")?(t("#VerticalArrowElement").removeClass("arrow-up"),t("#VerticalArrowElement").addClass("arrow-down")):(t("#VerticalArrowElement").removeClass("arrow-down"),t("#VerticalArrowElement").addClass("arrow-up"))}function r(){var e,n=d.width(),o=d.height(),r=t(".Horizontal .Arrow").width();if(c.hasClass("Active"))if(c.hasClass("ExpandedHorizontal")){var i,a=!0;t.isNumeric(globals.maxHorizontalItems)&&globals.maxHorizontalItems>0?(i=parseInt(globals.maxHorizontalItems),b&&i--):i=(t(window).width()-n-r-(b?u.width():0))/t(h.children()[0]).width(),i>=h.children().length&&(i=h.children().length,a=!1);var s=0;i=Math.floor(i),h.children().slice(0,i).each(function(){s+=t(this).width()}),g.width(s);var l=0,y=h.children();y.each(function(){l+=t(this).width()}),h.width(l),l=0;var y=f.children();y.each(function(){l+=t(this).width()}),e=l+n}else e=r+n;else e=0;f.css({width:e+"px"}),p.css({width:e+"px"}),a?g.mCustomScrollbar("update"):g.mCustomScrollbar("disable");var w=d.height(),S=t(".Vertical .VerticalArrow").height(),T=0,_=m.children();_.each(function(){t(this).is(":visible")===!0&&(w+=t(this).height(),T++)}),0===T&&(w=0),c.hasClass("Active")?c.hasClass("ExpandedVertical")?(m.css({height:w-o+"px"}),v.css({height:w+S+"px"})):(m.css({height:"0px"}),v.css({height:S+o+"px"})):(m.css({height:"0px"}),v.css({height:"0px"}))}function i(){if(c.hasClass("Right")){var e=n();n({top:e.top,left:window.innerWidth-y.right})}}function a(t){var i=t;i&&i.top&&i.left||(i=n()),r();var a=p.width();a="none"===a?p.outerWidth():parseInt(a,10);var l=v.width();l="none"===l?v.outerHeight():parseInt(l,10),i.left<window.innerWidth/2?(c.removeClass("Right"),c.addClass("Left")):(c.removeClass("Left"),c.addClass("Right")),i.top>window.innerHeight/2?(c.removeClass("Top"),c.addClass("Bottom")):(c.removeClass("Bottom"),c.addClass("Top")),o(),s(),e.save()}function s(e){e=e||n(),e.left||(e.left=parseInt(c.css("left").split("px")[0]));var t=d.width();e.top=e.top<0?0:e.top>l.height()-t?l.height()-t:e.top,e.left=e.left<0?0:e.left>l.width()-t?l.width()-t:e.left,n(e),y.right=window.innerWidth-e.left,c.css("left",e.left+"px")}var l=t(window),c=t("#ToolBar");if(c.length){var u,d=t("#Activator"),f=t("#HorizontalMenuUL"),p=t("#HorizontalMenu"),g=t("#HorizontalMenuScrollable"),h=t("#HorizontalScrollableItems"),m=t("#VerticalMenuUL"),v=t("#VerticalMenu"),b=utils.isNewAP(),y={right:0},w={top:20,left:window.innerWidth-parseInt(c.css("width").split("px")[0])-20},S={top:0,left:-40},T=36,_=59,C=!_localStorage.getItem("AN_ToolBar_Location"),A=t("#virt_keyboard_show");l.on("load",function(){function s(){i(),a()}function p(){c.hasClass("Bottom")&&(c.hasClass("Left")?n(S):c.hasClass("Right")&&n({top:0,left:window.innerWidth}),a())}b&&(u=t('<li id="AccessPortalToggle"><a class="Block Icon" title="STR_TOGGLE_AP_MENU"><i class="fa fa-navicon"></i></a></li>'),u.click(e.fn.toggleAPMenu),f.append(u)),g.mCustomScrollbar({axis:"x",contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:!0,updateOnContentResize:!0}});var h={expandedHorizontal:C&&!is.phone,expandedVertical:C&&!is.phone};d.click(function(n){return c.hasClass("inDragAction")?(n.preventDefault(),n.stopPropagation(),c.removeClass("inDragAction"),!1):(t(this).toggleClass("Shadow"),c.toggleClass("Active"),c.hasClass("Active")?(h.expandedVertical&&c.addClass("ExpandedVertical"),h.expandedHorizontal&&c.addClass("ExpandedHorizontal")):(h.expandedVertical=c.hasClass("ExpandedVertical"),h.expandedHorizontal=c.hasClass("ExpandedHorizontal"),c.removeClass("ExpandedHorizontal"),c.removeClass("ExpandedVertical")),r(),o(),void e.save())});var m=t(".Horizontal .Arrow");m.click(function(){c.toggleClass("ExpandedHorizontal"),o(),r(),e.save()});var v=t(".Vertical .VerticalArrow");v.click(function(){c.toggleClass("ExpandedVertical"),o(),r(),e.save()}),l.resize(s),l.on("orientationchange",s),A.on("focus",function(){setTimeout(p,500)})}),function(){e.ctrlDown=!1,e.input=null,e.protocol=null}(),e.adjustToElementsCount=r,e.load=function(){var e;if(e=_localStorage.getItem("AN_ToolBar_Location")){var n=JSON.parse(e);n&&n.offset&&s(n.offset),c.removeClass("ExpandedHorizontal"),c.removeClass("Active"),n&&n.expandedHorizontal&&c.addClass("ExpandedHorizontal"),n&&n.expandedVertical&&c.addClass("ExpandedVertical"),n&&n.active&&c.addClass("Active")}else s(w);t(document).on("dragstart","img",function(e){return e.preventDefault(),!1})},e.save=function(){var e=n();_localStorage&&_localStorage.setItem("AN_ToolBar_Location",JSON.stringify({offset:e,expandedHorizontal:c.hasClass("ExpandedHorizontal"),expandedVertical:c.hasClass("ExpandedVertical"),active:c.hasClass("Active")}))},e.reset=function(){s(w)},e.refresh=function(){a()},e.showTransferKeys=function(e){globals.fileDownload&&globals.fileDownloadIcon?t("#download_menu_item, #download_menu").show():t("#download_menu_item, #download_menu").hide(),globals.fileUpload&&globals.fileUploadIcon?t("#upload_menu_item, #upload_menu").show():t("#upload_menu_item, #upload_menu").hide(),a()},e.showButton=function(t){e.buttons[t]&&e.buttons[t].el.show()},e.setToggle=function(t,n){var o=e.buttons[t],r=o.el;o.state=n,r.find(".sprite").css("background-image",'url("'+o.states[o.state].icon+'")'),"enabled"===o.state?r.addClass("activated"):r.removeClass("activated")},e.buttons={},toolbarConfig.forEach(function(e){e.toggle?(e.states.enabled.icon=utils.rewriteUrl(e.states.enabled.icon),e.states.disabled.icon=utils.rewriteUrl(e.states.disabled.icon)):(e.icon=utils.rewriteUrl(e.icon),e.icons&&Object.keys(e.icons).forEach(function(t){e.icons[t]=utils.rewriteUrl(e.icons[t])}))}),e.show=function(){function o(e){switch(e.type){case"LogicalExpression":switch(e.operator){case"||":return o(e.left)||o(e.right);case"&&":return o(e.left)&&o(e.right);default:throw new Error("Could not evaluate LogicalExpression operator: "+e.operator)}break;case"MemberExpression":return window[e.object.name][e.property.name||e.property.value];case"UnaryExpression":switch(e.operator){case"!":return!o(e.argument);default:throw new Error("Could not evaluate UnaryExpression operator: "+e.operator)}case"Literal":return e.value;default:throw new Error("Could not evaluate "+e.type)}}function r(e,t){e.toggle||(e.labels?(t.find(".Icon").width(e.labels.length>2?_:T),t.find(".Icon").html(i(e.labels))):e.icon&&t.find(".sprite").css("background-image",'url("'+e.icon+'")'))}function i(e){switch(e.length){case 1:return'<span class="toolbar-label-big">'+e[0]+"</span>";case 2:return'<span class="toolbar-label-small-container"><div class="toolbar-label-small">'+e[0]+'</div><div class="toolbar-label-small">'+e[1]+"</div></span>";case 3:return'<span class="toolbar-label-wide-container"><div class="toolbar-label-small">'+e[0]+'</div><div class="toolbar-label-small">'+e[1]+'</div><div class="toolbar-label-wide">'+e[2]+"</div></span>";default:return'<span class="toolbar-label-wide-container"><div class="toolbar-label-small">'+e[0]+'</div><div class="toolbar-label-small">'+e[1]+'</div><div class="toolbar-label-small">'+e[2]+'</div><div class="toolbar-label-small">'+e[2]+"</div></span>"}}function s(e){return t('<li id="button_'+e.name+'_item"><a class="Block Icon" title="'+e.description+'"><i class="sprite" ></i></a></li>')}if(!utils.isTrue(globals.disableToolbar)){try{if(window.parent.isPortal)return}catch(l){}if(null==globals.remoteapplicationmode&&(globals.remoteapplicationmode=globals.alternate_shell.length>0),toolbarConfig.forEach(function(t,n,i){try{var a=!0;if("showIf"in t){var l=jsep(t.showIf);a=o(l)}if(a){var c=s(t);e.buttons[t.name]=t,e.buttons[t.name].el=c;var u="appendTo";"disconnect"==t.name&&(u="prependTo"),c[u]("vertical"===t.position?m:h),t.toggle?(t.state=t.initialState,"enabled"===t.state?c.addClass("activated"):c.removeClass("activated"),c.find(".sprite").css("background-image",'url("'+t.states[t.state].icon+'")'),c.on("touchend click",function(n){n.preventDefault();var o=t.state,r="enabled"===t.state?"disabled":"enabled";c.find(".sprite").css("background-image",'url("'+t.states[r].icon+'")'),"enabled"===r?c.addClass("activated"):c.removeClass("activated"),e.fn[t.states[t.state].action.method].apply(null,t.states[t.state].action.params),t.state==o&&(t.state=r)})):(c.on("touchend click",function(n){n.preventDefault(),e.fn[t.action.method].apply(null,t.action.params)}),r(t,c)),t.startHidden&&c.hide()}}catch(d){console.error&&console.error("Error while building the dynamic toolbar: "+d.message)}}),utils.TR.doc(document.querySelector("#ToolBar")),this.load(),c.show(),c.hasClass("ExpandedHorizontal"))var u=!0;c.hasClass("Active")&&(c.toggleClass("Active"),setTimeout(function(){c.toggleClass("Active"),u&&c.removeClass("ExpandedHorizontal").addClass("ExpandedHorizontal")},500));var d=n();a(d),t("#clipboard_menu").is(":visible")===!1?t("#clipboard_menu_item").hide():t("#clipboard_menu_item").show(),e.adjustToElementsCount()}},c.draggable({scroll:!1,delay:100,handle:"#Activator",start:function(e){c.hasClass("inDragAction")||c.addClass("inDragAction")},drag:function(e){},stop:function(e){a(),setTimeout(function(){c.removeClass("inDragAction")},100)}}),c.css("touch-action","none"),c.css("-ms-touch-action","none"),t("#ToolBar li > a").click(function(e){if(c.hasClass("inDragAction"))return c.removeClass("inDragAction"),e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1}),e.hide=function(){c.hide()}}}(toolbar||(toolbar={}),jQuery);var PROTOCOL="ericom|accessnow.3",GW_PROTOCOL_VERSION=1,HTTPS_SEPARATOR="|`",ESG_CSID="";utils.cookies.get("ESG_CSID")&&(ESG_CSID=utils.cookies.get("ESG_CSID"));var gwprotocol=function(){function e(e){e=""+e;var t=""+window.unescape(encodeURIComponent(e)).length;return t.length+t+e}function t(e,t){var n=parseInt(e.charAt(t++),10),o=t+n;return n=parseInt(e.substring(t,o),10),t=o,o+=n,{value:e.substring(t,o),index:o}}function n(e){for(var n=[],o=0;o<e.length;){var r=t(e,o);n.push(r.value),o=r.index}return n}return{build:function(t,n,o){var r=[];return r.push(e(GW_PROTOCOL_VERSION)),r.push(e(n)),o.forEach(function(t,n){t&&(r.push(e(n+1)),r.push(e(t)))}),r=r.join(""),t?"BgwS"+r:r},parse:function(e){for(var t,o=[],r=n(e),i=2;i<r.length;){if(t=parseInt(r[i++],10),isNaN(t))throw"bad id "+r[i-1];var a=r[i++];if(void 0===a)throw"missing value "+t;o[t]=a}var s=parseInt(r[0],10);if(isNaN(s))throw"bad message protocol "+r[0];if(t=parseInt(r[1],10),isNaN(t))throw"bad message id "+r[1];return{_protocol:s,id:t,values:o}},parseStream:n,log:function(e,t){var n=0==t.indexOf("BgwS"),o=gwprotocol.parse(t.slice(n?4:0));o.values[3]=_.repeat("*",o.values[3].length),CI(gwprotocol.build(n,o.id,o.values))}}}(),utils;!function(e){"use strict";e.allocCanvas=function(){var t=e.ce("canvas");t.width=64,t.height=64;var n=e.factory(function(){return e.deferred(t.cloneNode(!1))});return function(){return n().reset()}}()}(utils||(utils={}));var lz4;!function(e){"use strict";e.sync=function(){function e(e,t,n,o){for(var r=0;n<o;){for(var i=e[n++],a=i>>4,s=a+240;255===s;a+=s)s=e[n++];if(0!==a)for(a+=n;n!==a;t[r++]=e[n++]);if(n>=o)break;var l=e[n++]|e[n++]<<8;if(0===l)return-(n-2);for(a=15&i,s=a+240;255===s;a+=s)s=e[n++];a+=r+4;for(var c=r-l;r!==a;t[r++]=t[c++]);}return r}function t(e,t,n){for(var o=0;o<n;o+=4)e[o]=t[o+2],e[o+1]=t[o+1],e[o+2]=t[o],e[o+3]=255}return window.Uint8Array?{pack:function(t,n){var o=new Uint8Array(t),r="number"==typeof n?new Uint8Array(n):n,i=e(o,r,0,o.length);if(i>0){var a=r.buffer;return a.length=i,a}return CE("Bad LZ4 data",-i),null},image:function(){var n=utils.imageData(64,64),o=new Uint8Array(16384),r=utils.allocCanvas;return function(i){var a=new Uint8Array(i);if(a.length<6||76!==a[0]||90!==a[1])return CE("Not LZ4 image"),utils.emptyCanvas;var s=r(),l=a[2]|a[3]<<8,c=a[4]|a[5]<<8,u=l*c*4;if(u>o.length&&(o=new Uint8Array(u)),u=e(a,o,6,a.length),u>0){s.width!==l&&(s.width=l),s.height!==c&&(s.height=c);var d=utils.getContext(s);(n.width!==l||n.height<c)&&(n=d.createImageData(l,c)),t(n.data,o,u),d.putImageData(n,0,0)}else CE("Bad LZ4 image");return s.resolve()}}()}:{pack:utils.noop,image:function(){return CE("LZ4 not supported"),utils.emptyCanvas}}},e.async=function(){function t(){var t=e.sync(),n=t.pack;return{pack:function(){return o().resolve(n.apply(null,arguments))},image:t.image,reuse:utils.noop}}var n=utils.resolved,o=utils.allocDeferred;if(!window.Worker||globals.noWorkers||is.firefox||"CSCO_Env"in window)return CI("Not using Worker"),t();var r=new Worker("lz4w.js?_="+Date.now());r.postMessage=utils.Prop.get(r,"postMessage");var i=[],a=utils.imageData(64,64),s=function(){function e(e,t){var n=t/16|0,o=[],r=0;return{alloc:function(e){for(var t,i=-1,a=0;a!==o.length;++a)if(t=o[a]){var s=t.byteLength;if(e<=s){if(e+n>s){i=a;break}(i===-1||s<o[i].byteLength)&&(i=a)}}return i!==-1?(t=o[i],o[i]=null,--r,t):new ArrayBuffer(e)},free:function(n){var i;if(n&&n.byteLength>=t)if(r<e)++r,i=o.indexOf(null),i!==-1?o[i]=n:o.push(n);else{var a=n.byteLength;for(i=0;i!==o.length;++i){var s=o[i];if(s&&a>s.byteLength){o[i]=n;break}}}}}}function t(e){for(var t=n.length;--t>0&&e<n[t];);return o[t]}var n=[16e3,32e3,64e3],o=n.map(e.bind(null,32));return{alloc:function(e){return t(e).alloc(e)},free:function(e){t(e.byteLength).free(e)}}}();r.onmessage=function(e){var t=e.data,n=i.shift();if("string"==typeof t)CE(t);else{s.free(t[0]);var o=t[1];if("length"in n)o.length=n.length,n.resolve(o);else{var r=n.width,l=n.height,c=r*l*4,u=utils.getContext(n);(a.width!==r||a.height<l)&&(a=u.createImageData(r,l)),a.data.set(new Uint8ClampedArray(o,0,c)),s.free(o),u.putImageData(a,0,0),n.resolve()}}};var l=function(){var e=new ArrayBuffer(4);try{r.postMessage([e],[e])}catch(t){}return 0===e.byteLength}();if(!l)return r.terminate(),CI("No transferable objects - not using Worker"),t();var c=n.promise(utils.emptyCanvas),u=function(){var e=[null,null];return function(t,n){e[0]=t,e[1]=s.alloc(n),r.postMessage(e,e)}}(),d=utils.allocCanvas;return{pack:function(e,t){u(e,t);var n=o();return n.length=t,i.push(n),n},image:function(e){if(e.byteLength<6)return CE("Missing LZ4 data"),c;var t=new Uint8Array(e);if(76!==t[0]||90!==t[1])return CE("Not LZ4 image"),c;var n=t[2]|t[3]<<8,o=t[4]|t[5]<<8,r=4*n*o;u(e,r);var a=d();return a.width!==n&&(a.width=n),a.height!==o&&(a.height=o),i.push(a),a},reuse:s.free}}}(lz4||(lz4={}));var utils;!function(e){"use strict";e.emptyCanvas=function(){var t=e.ce("canvas");return t.width=0,t.height=0,t}(),e.getContext=function(){var t={alpha:!1},n=e.Prop.getName(e.emptyCanvas.getContext("2d",t),"imageSmoothingEnabled");return n?function(e){var o=e.getContext("2d",t);return o[n]=!1,o}:function(e){return e.getContext("2d",t)}}(),e.imageData=function(){var t=e.getContext(e.emptyCanvas);return function(e,n){return t.createImageData(e,n)}}()}(utils||(utils={}));var audio;!function(e,t){"use strict";function n(e){var t=utils.toArrayFactory([0,0]);return function(){e("a","t",t(arguments))}}function o(e){return(65535&e)/65536}e.HTML5=function(e){CI("Old style audio");var t=e.send.regular;this.Training=n(t),this.Close=utils.noop,this.Simulate=utils.noop,this.Async=utils.noop;var r=1;this.Volume=function(e,t){r=(o(e)+o(t))/2};var i=!1,a=[],s=utils.hidden;this.Play=function(e,n,o,l){function c(){i=!0,s()||f.play();var e=f.duration;_setTimeout(function(){var e=a.pop();e?e():i=!1,t("a","p",[Date.now()+n&65535,o]),_URL.revokeObjectURL(d)},e?1e3*e:l/10)}n-=Date.now();var u="string"==typeof e?utils.retArg:utils.blobURL,d=u(e),f=new Audio(d);f.volume=r,i?a.unshift(c):c()}},e.HTML5.Context=window.Audio,e.WebAPI=function(){var r=null;return function(i){function a(e,t){h[0]=Date.now()+t&65535,h[1]=e,u("a","p",h)}function s(e,t,n){b(function(n){h[0]=n+t&65535,h[1]=e,d("a","p",h)},1e3*n|0)}CI("Web Audio API"),CI("Opening audio");var l=function(){try{return r=r||new e.WebAPI.Context,r.destination}catch(t){return CE("Failed to open audio"),null}}();if(!r)return void e.HTML5.call(this,i);var c;if(document.addEventListener("touchend",function(){if(!c){var e=r.createBuffer(1,1,22050),t=r.createBufferSource();t.buffer=e,t.connect(r.destination),t.start(0),c=!0}}),function(){var e=r.createBufferSource();if(!e.start){var t=Object.getPrototypeOf(e);t.start=t.noteOn}}(),this.Simulate=function(){var e=r.createBuffer(2,1024,44100),t=r.createBufferSource();t.connect(l),t.buffer=e,t.start(0)},i){var u=i.send.regular,d=i.send.priority;if(this.Training=n(u),this.Close=utils.noop,!l)return this.Volume=utils.noop,void(this.Play=utils.noop);var f,p;this.Volume=function(e,t){if(e=o(e),t=o(t),CI("Audio volume",e,t),!f)if(f=r.createGainNode(),"createChannelMerger"in r){CI("Stereo gain control");var n=r.createChannelMerger();n.connect(l),f.connect(n,0,0),p=r.createGainNode(),p.connect(n,0,1),l=r.createChannelSplitter(),l.connect(f,0,0),l.connect(p,1,0)}else f.connect(l),l=f;p?(f.gain.value=e,p.gain.value=t):f.gain.value=(e+t)/2};var g=0,h=[0,0],m=utils.hidden;this.Play=function(e,t,n,o){function i(e){var i=r.createBufferSource();i.connect(l),i.buffer=e;var a=r.currentTime,s=Math.max(a,g);m()||i.start(s),g=s+(e.duration||o/1e4),v(n,t,g-a)}function a(e){h[0]=0,h[1]=n,u("a","p",h),CE(e||"Audio error")}t-=Date.now(),r.decodeAudioData(e,i,a)};var v;this.Async=function(e){v=e||!is.mobile&&!is.chromeOS?s:a},this.Async(!1);var b=function(){var e=[],n=[];return i.send.add(function(t){for(var o=t.timeStamp;e.length;){var r=e.pop();if(r-o>30){e.push(r);break}n.pop().resolve(o).free()}}),function(o,r){e.unshift(Date.now()+r),n.unshift(t.wait(r+20).done(o))}}()}}}(),e.WebAPI.Context=utils.Prop.get(window,"AudioContext"),e.Player=e.WebAPI.Context?e.WebAPI:e.HTML5,e.Context=e.Player.Context,(e.WebAPI.Context||is.iOS)&&t(window).on("touchstart.audio",function(){_setTimeout(function(){t(window).off("touchstart.audio")},0);var n=new e.Player;n.Simulate()})}(audio||(audio={}),jQuery);var keyboard={};keyboard.start=function(){function e(){if(_localStorage&&"true"!=_localStorage.getItem("AN_doubleTapMessageShown"))return o.open()}var t={},n=$("#virt_keyboard_show");is.IE&&n.on("focus",function(){this.select()}),n.on("blur",function(){touchSupport&&touchSupport.blurCaret(),this.showOnNextTap=!1}),n.on("focus",function(){touchSupport&&touchSupport.focusCaret(t),utils.setMultipleTimeouts(function(){window.scrollTo(0,0)},[100,200,500])}),keyboard={show:function(t){if(t=t||!1,!touchSupport||!touchSupport.isDragging())return t?(n.focus(),this.showOnNextTap=!1,this):(is.iOS?this.showOnNextTap||(e(),this.showOnNextTap=!0):n.focus(),this)},hide:function(){return n.blur(),this},clear:function(){n.trigger("forceClear")},isVisible:function(){return n.is(":focus")},setCaretPos:function(e){return t=e,this},isNative:!0,showOnNextTap:!1};var o=newDialogs.fromSelector("#two_tap_dialog",{onDismiss:function(){$("#two_tap_checkbox").is(":checked")&&_localStorage.setItem("AN_doubleTapMessageShown","true"),this.close()}})};var NativeKeyboard=function(){function e(e,t){function n(e){a(!0),r("u","s",[0,e,0]),r("u","s",[49152,e,0]),a(!1)}var o={BKSP:8,RETURN:13,ARROW_LEFT:37,ARROW_RIGHT:39,TAB:9},r=t.send.regular;
if(document.DEBUG){var i=r;r=function(){$("#buton").prepend([].slice.call(arguments).join(" ")+"<br>"),i.apply(null,arguments)}}var a=t.send.lock,s="",l="",c={clear:function(){e.val(l=s="")}},u={forceClear:c.clear,blur:function(e){setTimeout(function(){c.clear()},0)},keydown:function(t){var r=t.which;switch(r){case o.BKSP:""===e.val()&&n(o.BKSP);break;case o.TAB:return n(o.TAB),event.preventDefault(),!1}},input:function(e){var t;if(l=$(this).val(),l!==s){var i,c=Math.min(l.length,s.length);for(i=0;i<c&&l[i]===s[i];i++);var u;for(u=i;u<s.length;u++)n(o.BKSP);for(u=i;u<l.length;u++){switch(a(!0),t=l.charCodeAt(u)){case 10:n(o.RETURN);break;default:r("u","u",[t])}a(!1)}s=l}return!1}};e.on(u),this.clear=function(){return c.clear()}}return e}();window.speechRecognition=utils.Prop.get(window,"speechRecognition");var INPUT_MULTIPLY=100,sync=!1,lastModifierKey=0;ZeroClipboard.config({swfPath:"resources/ZeroClipboard.swf",forceHandCursor:!0});var scaling=function(){function e(){if(O){var e=["translate3d("+S.translate.x+"px, "+S.translate.y+"px, 0)","scale3d("+S.scale+", "+S.scale+",1)"],t=e.join(" ");m.style.msTransform=t,m.style.webkitTransform=t,m.style.mozTransform=t,m.style.transform=t}else{var e=["translate("+S.translate.x+"px, "+S.translate.y+"px)","scale("+S.scale+", "+S.scale+")"],t=e.join(" ");m.style.msTransform=t,m.style.webkitTransform=t,m.style.mozTransform=t,m.style.transform=t}}function t(){S.scale=Math.max(T,S.scale),S.scale=Math.min(5,S.scale),S.translate.x=Math.max(S.translate.x,-(_*(S.scale+1)/2-A())),S.translate.y=Math.max(S.translate.y,-(C*(S.scale+1)/2-r())),S.translate.x=Math.min(S.translate.x,_*(S.scale-1)/2),S.translate.y=Math.min(S.translate.y,C*(S.scale-1)/2),e(),b=!1}function n(){b||(k(t),b=!0)}function o(e){return{x:(e.x+v.width()*(S.scale-1)/2-S.translate.x)/S.scale,y:(e.y+v.height()*(S.scale-1)/2-S.translate.y)/S.scale}}function r(){return keyboard.isVisible()?E()<A()?is.iOS?screen.width/3.5:E()/2:is.iOS?screen.height/2:E()/2:E()}function i(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a(){if(_=v.width(),C=v.height(),!_||!C)throw new Error("Unable to get canvas size. Retry");T=0,S.scale=Math.min(E()/C,A()/_)}function s(){if(!(is.android&&keyboard&&keyboard.isVisible())){try{a()}catch(e){setTimeout(s,300)}n()}}function l(){y=!0,T=0,s(),$("body").css("overflow","hidden"),$(window).on("resize.autoScaling",function(){w||s()})}function c(e){$(window).off("resize.autoScaling");var n=!1,o=!1;return e||I!==A()||(n=!0,R<E()&&(o=!0)),!e&&I===A()&&R<E()&&E()-R>.2*screen.height&&$("#virt_keyboard_show").blur(),I=A(),R=E(),_=v.width(),C=v.height(),y?void(n||s()):void(0!==_&&0!==C&&(T=Math.max(A()/_),n||(S.scale=Math.max(E()/C,A()/_),S.translate.y=Math.max(S.translate.y,-(C*(S.scale+1)/2-E()))),window.scrollTo(0,0),t()))}function u(){w=!0,v.on("resetTransform",function(){setTimeout(x,200)}),$(window).resize(function(){setTimeout(D,200)})}function d(e){e&&e.x&&e.y&&(e.y*S.scale+S.translate.y-_*(S.scale-1)/2<E()/2||(initTouch={x:_/2,y:50},initPosition=e,p=$.extend(!0,{},S),S.translate.y=-(initPosition.y*S.scale-initTouch.y-C*(S.scale-1)/2),setTimeout(scaling.requestElementUpdate,100)))}function f(){p&&(S.translate.y=p.translate.y),scaling.requestElementUpdate()}var p,g=0,h=0,m=document.querySelector("#canvas"),v=$(m),b=!1,y=!1,w=!1,S={translate:{x:g,y:h},scale:1},T=1,_=v.width(),C=v.height(),A=function(){return window.innerWidth},E=function(){return window.innerHeight},I=A(),R=E(),k=function(){return window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),x=c.bind(this,!0),D=c.bind(this,!1),O=function N(){if(!window.getComputedStyle)return!1;var N,e=document.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in t)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",N=window.getComputedStyle(e).getPropertyValue(t[n]));return document.body.removeChild(e),void 0!==N&&N.length>0&&"none"!==N}();return{enableAutoScaling:l,getTruePosition:o,transform:S,innerHeight:E,innerWidth:A,mobileServerResize:x,mobileClientResize:D,enableMobileResize:u,requestElementUpdate:n,focusCaret:d,blurCaret:f,pointDistance:i,fitToViewport:s}}(),_protocol=new Protocol;is.iOS&&is.safari&&document.addEventListener("touchmove",function(e){e.touches.length>1&&(e=e.originalEvent||e,e.preventDefault())},!1);var touchSupport,whitelabeling=function(){var e={$logoImg:$(".logo img"),$body:$("body")},t=function(){whiteLabel.enabled&&(whiteLabel.backgroundCss&&e.$body.css("background",whiteLabel.backgroundCss),whiteLabel.logoSrc&&(document.getElementById("an_logo_image").src=whiteLabel.logoSrc))};return t(),{preLoad:t}}();$.when(utils.docReady,utils.TR.promise()).done(function(){function e(){o.find("#encryption").attr("checked",is.HTTPS).end().find("#locale").val(n.locale).end().setValues(globals).enableDisable(),o.setValues(globals)}function t(){var e=$.Deferred();return $(document.body).on({"dragenter.rdp":utils.cancelEvent,"dragover.rdp":utils.cancelEvent,"drop.rdp":function(t){var o=t.originalEvent.dataTransfer.files;if(o&&o.length){var r=new FileReader;r.onloadend=function(){var t=Data(this.result);t.has("full address")?$.wait().done(function(){var o=t.get("websocket address")||prompt(n("STR_ACCESSNOW_SERVER_ADDRESS"),t.get("full address").split(":")[0]);null!==o&&(o=o||"localhost",t.set("websocket address",o),e.resolve(t))}):newDialogs.notify(n("STR_NOT_VALID_BLAZE",o[0].name),!0)},r.onerror=function(){newDialogs.notify(n("STR_ERROR_READING_FILE",o[0].name),!0)},r.readAsText(o[0])}return utils.cancelEvent(t)}}),e}var n=utils.TR;n.doc(),$("input, textarea").placeholder(),globals.autostart?preloadFadeOut=0:($("#an-login-container").css("visibility","visible"),preloadFadeOut=300),$("#preloader").fadeOut(preloadFadeOut,function(){$("#preloader").remove()}),$('<iframe id="printFrame" style="height: 1px" />').css({visibility:"hidden"}).appendTo($('<div style="height:0; overflow:hidden"/>').appendTo("body")),globals.printCounter=0,document.title=n("STR_ERICOM")+" "+n("STR_ACCESSNOW"),newDialogs.about=newDialogs.fromSelector("#an-modal-about",{options:{minWidth:300,height:320}}),$('button[id="showAbout"]').click(newDialogs.about.open),newDialogs.gestures=newDialogs.fromSelector("#an-modal-gestures",{}).open(function(){this.find(".modal-body").css("maxHeight",.8*$("body").height()),this.find(".modal-body").css("overflow","scroll")}),$(".outer").css("visibility","inherit");var o=$("#an-login-container"),r=function(){function e(){var e=n.children("option:selected").dataset("lang");r.test(e)?(t=o.is(":checked"),o.attr("checked",!0),o.attr("disabled",!0),o.prop("checked",!0),o.parents("section").addClass("hidden")):o.is(":disabled")&&(o.removeAttr("disabled").prop("checked",!1).attr("checked",!1).removeAttr("checked"),o.parents("section").removeClass("hidden"))}var t=!1,n=$("#keyboard_locale"),o=$("#convert_unicode_to_scancode"),r=/^(?:ja|ko|zh)/;return n.change(e),e}();e();var i=$.Deferred();o.off(".start").on({"submit.start":function(){return i.resolve(),!1},"reset.start":function(){setImmediate(function(){for(var t in _localStorage)0!==t.indexOf("AN_Reconnect")&&_localStorage.removeItem(t);_localStorage.setItem("GUID",GUID),globals=settings.globalsFactory(),e(),s(globals)})}});var a=t().done(function(){is.managed=!0,globals.blazeData=a,i.resolve()});i.done(function(){function e(){window.scrollTo(0,0);var a=!1,s=function(){var e=[];switch(r||"browser"){case"screen":if(!is.mobile){a=!0,e=[screen.width,screen.height];break}case"browser":a=!0,e=utils.viewportSize();break;default:e=r.split(",").map(function(e){return parseInt(e)})}return utils.constraintMinResolution(e)}();if(s[0]<=0||s[1]<=0)return void _setTimeout(e,500);switch(t.desktopwidth=s[0],t.desktopheight=s[1],globals.force_auto_keyboard){case"0":globals.forceAutoKeyboard=!1,globals.forceAutoKeyboardDefault=!0;break;case"1":globals.forceAutoKeyboard=!0,globals.forceAutoKeyboardDefault=!1;break;case"2":globals.forceAutoKeyboard=!1,globals.forceAutoKeyboardDefault=!1}switch(globals.force_touchscreen){case"1":globals.touchScreen=!0;break;case"2":globals.touchScreen=!1}globals.domain&&(t.domain=globals.domain);var l={address:o.find("#address").val().trim(),auto_resize:a&&o.find("#auto_resize").is(":checked"),fullScreen:i,speech:o.find("#speech").is(":checked"),token:settings.externals.token,authToken:settings.externals.authToken,configuration:t};o.find("#encryption")[0]?l.encryption=o.find("#encryption").is(":checked"):l.encryption=is.HTTPS,o.find("#use_gateway").is(":checked")&&(l.gateway=o.find("#gateway_address").val());var c=t["full address"]||l.address,u=utils.isString(globals.restrictHost)&&globals.restrictHost.toArray().some(function(e){return this.match(new RegExp("^"+e.replace(/\./g,"\\.").replace(/\*/g,".*")+"(?:[:]|$)","i"))},c);return u?void newDialogs.restart({html:n("STR_ADDRESS_NOT_ALLOWED",c),critical:!0,options:{autoOpen:!0}})():($("#an-login-container").remove(),keyboard.start(),globals.touchScreen&&(touchSupport=enableTouchSupport(),globals.touchPad&&touchSupport.startTouchpad()),void session(l,toolbar))}o.off(".start").on({"submit.start":!1,"reset.start":!1}),$(document.body).off(".rdp"),is.managed||(o.getValues("id",_localStorage,null),o.getValues("id",globals),_localStorage.removeItem("password"),_localStorage.getItem("gateway_address")===location.host&&_localStorage.removeItem("gateway_address"));var t={};is.managed||(o.getValues("name",t),1!==t.remoteapplicationmode&&(delete t["alternate shell"],delete t["shell working directory"]));var r=!is.managed||settings.externals.resolution?o.find("#resolution").val():"browser",i="screen"===r&&!is.mobile;i&&$(document.body).enterFullScreen(),$.when($.wait(),utils.winLoaded).done(e)});var s=function(){function e(e){var a=location.host;o.if_(!!audio.Context&&!is.IE).find("#audiomode").removeAttr("disabled").if_(!!audio.WebAPI.Context).children(":selected").removeAttr("selected").end().children(":first").attr("selected","selected").end().end().end().end().if_(is.gateway).find("#use_gateway").attr("checked",!0).end().find("#gateway_address").val(a).end().end().find('option[data-lang^="'+n.preferredLocale+'"]').each(function(){return $(this).parent().val(this.value).trigger("change"),!1}).end().invoke(utils.resetLocale).invoke(r).setValues(i=e).invoke(r).find("#redirect"),t()}window.speechRecognition&&0!==n.locale.indexOf("en")||o.hidden("speech").find("#speech").attr("checked",!1);var t=function(){var e=o.find("#username,#password");return function(){e.attr("required",o.find("#use_gateway").is(":checked"))}}();t();var i=globals;return e(i),o.enableDisable().keypress(function(e){if(e.which===$.ui.keyCode.ENTER)return $(this).find("button:first").click(),!1}),o.setValues(i).enableDisable(!1).find("#redirect"),r(),o.getValues("id",i),e}();CI("AutoStart: Start.js:331 globals.autostart = "+globals.autostart),globals.autostart||_sessionStorage.setItem("AN_logInSuccess","false"),o.hidden(globals.hiddenFields).if_(globals.autostart).submit().else_().fadeIn(),$("#an-login-form").if_(globals.message).append('<div class="an-message">'+n(globals.message)+"</div>"),window.scrollTo(0,1),function(){function e(){$("#an-settings-reset").addClass("an-settings-reset-active"),$("#an-settings-reset").click(utils.resetSettings)}function t(){$("#an-settings-container").toggleClass("active")}function n(e){if("previous"==e){if($("#an-settings-tab-0").hasClass("active"))return void t();e="an-settings-tab-0"}$("#an-settings-container").find(".an-settings-tab").removeClass("active"),$("#"+e).addClass("active"),$("#an-settings-title").html(utils.TR($("#"+e).attr("data-title")))}$("#an-settings-close").click(t),$("#an-settings-toggle").click(t),setTimeout(function(){$("form").one("change",function(){e()})},1e3),"true"==_sessionStorage.getItem("AN_Settings_Reset")&&(_sessionStorage.setItem("AN_Settings_Reset","false"),t(),n("an-settings-tab-0")),_localStorage.length>1&&e(),$("#an-settings-container").find("[data-menu-target]").click(function(e){var t=$(this).attr("data-menu-target");n(t)})}()});