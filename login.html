<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Login and Sign Up Form</title>
    <style>
      body {
        background-color: #f1f1f1;
      }
      
      #form-container {
        background-color: #fff;
        margin: 50px auto;
        padding: 20px;
        width: 500px;
        border-radius: 5px;
        box-shadow: 0 0 5px #ccc;
      }
      
      h1 {
        text-align: center;
      }
      
      label, input {
        display: block;
        margin-bottom: 10px;
      }
      
      input[type="submit"] {
        background-color: #4CAF50;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 3px;
        cursor: pointer;
      }
      
      input[type="submit"]:hover {
        background-color: #3e8e41;
      }
      
      #message {
        margin-top: 20px;
        text-align: center;
      }
      
      #message.error {
        color: red;
      }
      
      #message.success {
        color: green;
      }
    </style>
  </head>
  <body>
    <div id="form-container">
      <h1>Login and Sign Up</h1>
      <form id="login-form">
        <label for="login-email">Email:</label>
        <input type="email" id="login-email" name="email" required>
        <label for="login-password">Password:</label>
        <input type="password" id="login-password" name="password" required>
        <input type="submit" value="Login">
      </form>
      <form id="signup-form">
        <label for="signup-name">Name:</label>
        <input type="text" id="signup-name" name="name" required>
        <label for="signup-email">Email:</label>
        <input type="email" id="signup-email" name="email" required>
        <label for="signup-password">Password:</label>
        <input type="password" id="signup-password" name="password" required>
        <input type="submit" value="Sign Up">
      </form>
      <div id="message"></div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script> 
     $(document).ready(function() {
  // Login form submission
  $("#login-form").submit(function(event) {
    event.preventDefault();
    
    // Get the form data
    var formData = {
      email: $("#login-email").val(),
      password: $("#login-password").val()
    };
    
    // Submit the form data to the API
    $.ajax({
      url: "https://autobackend.dev/api/login-and-sign-up-page-c9e97ee8b9/login",
      method: "POST",
      contentType: "application/json",
      data: JSON.stringify(formData),
      success: function(response) {
        // Display a success message and save the token to local storage
        $("#message").$("#message").on("click", function() {
  $("#message").hide();
});

// Function to handle login form submission
function handleLogin() {
  event.preventDefault();
  var email = $("#loginEmail").val();
  var password = $("#loginPassword").val();
  var data = { email: email, password: password };
  $.ajax({
    url: "https://autobackend.dev/api/login-and-sign-up-page-c9e97ee8b9/login",
    method: "POST",
    data: JSON.stringify(data),
    contentType: "application/json",
    success: function(result) {
      localStorage.setItem("token", result.token);
      window.location.href = "dashboard.html";
    },
    error: function(xhr, textStatus, errorThrown) {
      $("#message").show();
      $("#message").html(xhr.responseJSON.message);
    }
  });
}

// Function to handle sign up form submission
function handleSignUp() {
  event.preventDefault();
  var name = $("#signupName").val();
  var email = $("#signupEmail").val();
  var password = $("#signupPassword").val();
  var data = { name: name, email: email, password: password };
  $.ajax({
    url: "https://autobackend.dev/api/login-and-sign-up-page-c9e97ee8b9/signup",
    method: "POST",
    data: JSON.stringify(data),
    contentType: "application/json",
    success: function(result) {
      localStorage.setItem("token", result.token);
      window.location.href = "dashboard.html";
    },
    error: function(xhr, textStatus, errorThrown) {
      $("#message").show();
      $("#message").html(xhr.responseJSON.message);
    }
  });
}

// Attach event listeners to the login and sign up forms
$("#loginForm").on("submit", handleLogin);
$("#signupForm").on("submit", handleSignUp);       
            
            </script>
  </body>
</html>
