<html>
  <head>
    <title>Connect to Fauna example</title>
  </head>
  <body>
    <h1>Connect to Fauna example</h1>
    <form>
      <input id="email" type="text" placeholder="Email"/>
      <input id="password" type="password" placeholder="Password"/>
      <button id="signup" type="button">Sign Up</button>
    </form>

    <p>
      Open your browser's developer console to see the query results.
    </p>
  </body>
<script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
<script type="text/javascript">
  var faunadb = window.faunadb
  var q = faunadb.query
  var client = new faunadb.Client({
    secret: 'fnAE7vs_d8AA1GunxmKkAOPpSb6kA9WNaCZmrra-',
    endpoint: 'https://db.fauna.com/',
  })

  document.getElementById("login").addEventListener("click", login);
  document.getElementById("signup").addEventListener("click", signup);



  async function signup() {
    const email = document.getElementById("email").value
    const password = document.getElementById("password").value
    try {
      const result = await client.query(
        q.Create(
          q.Collection("users"),
          {
            data: {
              email: email,
              password: password
            }
          }
        )
      )
      console.log("Sign Up Successful")
      document.querySelector('#result').innerHTML = 'Sign Up successful!'
    } catch (e) {
      document.querySelector('#result').innerHTML = 'Sign up Failed!'
      console.log("Sign Up Failed")
    }
  }
</script>
</html>



<html>
  <head>
    <title>Login to Fauna example</title>
  </head>
  <body>
    <h1>Login to Fauna example</h1>

    <form>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email">

      <label for="password">Password:</label>
      <input type="password" id="password" name="password">

      <button type="submit" onclick="login()">Login</button>
    </form>

    <p id="result"></p>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
  <script type="text/javascript">
    var faunadb = window.faunadb
    var q = faunadb.query
    var client = new faunadb.Client({
      secret: 'fnAE7vs_d8AA1GunxmKkAOPpSb6kA9WNaCZmrra-',
      endpoint: 'https://db.fauna.com/'
    })

    async function login() {
      const email = document.querySelector('input[name="email"]').value
      const password = document.querySelector('input[name="password"]').value
      const result = await client.query(
        q.Get(
          q.Match(
            q.Index('users_by_email'),
            email
          )
        )
      )
      if (result.data.password === password) {
        document.querySelector('#result').innerHTML = 'Login successful!'
      } else {
        document.querySelector('#result').innerHTML = 'Login failed.'
      }
    }
