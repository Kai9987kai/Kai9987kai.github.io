<html>
  <head>
    <title>Connect to Fauna example</title>
    <style>
      /* Style the pop-up window */
      .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
      }

      /* Style the input fields and buttons */
      input[type="text"],
      input[type="password"] {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
        border-radius: 5px;
        border: none;
        box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
      }

      button {
        background-color: blue;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
      }

      /* Style the switch button */
      .switch-form {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        cursor: pointer;
      }

      .switch-form p {
        margin: 0 10px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <h1>Connect to Fauna example</h1>

    <p>
      Open your browser's developer console to see the query results.
    </p>

    <!-- Trigger button for the pop-up window -->
    <button id="login-button">Login</button>

    <!-- Pop-up window with both sign-up and login forms -->
    <div class="popup" id="popup">
      <!-- Sign-up form -->
      <form id="signup-form">
        <input type="text" placeholder="Email" id="signup-email">
        <input type="password" placeholder="Password" id="signup-password">
        <button type="button" id="signup-submit">Sign Up</button>
      </form>

      <!-- Login form -->
      <form id="login-form">
        <input type="text" placeholder="Email" id="login-email">
        <input type="password" placeholder="Password" id="login-password">
        <button type="button" id="login-submit">Login</button>
      </form>

      <!-- Switch button to toggle between sign-up and login forms -->
      <div class="switch-form">
        <p id="switch-to-signup">Sign up</p>
        <p>/</p>
        <p id="switch-to-login">Login</p>
      </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
<script type="text/javascript">
  var faunadb = window.faunadb
  var q = faunadb.query
  var client = new faunadb.Client({
    secret: 'YOUR_FAUNA_SECRET',
    endpoint: 'https://db.fauna.com/',
  })

  document.getElementById("login").addEventListener("click", login);
  document.getElementById("signup").addEventListener("click", signup);

  async function login() {
    const email = document.getElementById("email").value
    const password = document.getElementById("password").value
    const result = await client.query(
      q.Get(
        q.Match(
          q.Index("users_by_email"),
          email
        )
      )
    )
    if (result.data.password === password) {
      console.log("Login Successful")
    } else {
      console.log("Login Failed")
    }
  }

  async function signup() {
    const email = document.getElementById("email").value
    const password = document.getElementById("password").value
    try {
      const result = await client.query(
        q.Create(
          q.Collection("users"),
          {
            data: {
              email: email,
              password: password
            }
          }
        )
      )
      console.log("Sign Up Successful")
    } catch (e) {
      console.log("Sign Up Failed")
    }
  }
</script>
</html>
