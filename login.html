<html>
  <head>
    <title>Connect to Fauna example</title>
  </head>
  <body>
    <h1>Connect to Fauna example</h1>
    <form>
      <input id="email" type="text" placeholder="Email"/>
      <input id="password" type="password" placeholder="Password"/>
      <button id="login" type="button">Login</button>
      <button id="signup" type="button">Sign Up</button>
    </form>

    <p>
      Open your browser's developer console to see the query results.
    </p>
  </body>
<script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
<script type="text/javascript">
  var faunadb = window.faunadb
  var q = faunadb.query
  var client = new faunadb.Client({
    secret: 'YOUR_FAUNA_SECRET',
    endpoint: 'https://db.fauna.com/',
  })

  document.getElementById("login").addEventListener("click", login);
  document.getElementById("signup").addEventListener("click", signup);

  async function login() {
    const email = document.getElementById("email").value
    const password = document.getElementById("password").value
    const result = await client.query(
      q.Get(
        q.Match(
          q.Index("users_by_email"),
          email
        )
      )
    )
    if (result.data.password === password) {
      console.log("Login Successful")
    } else {
      console.log("Login Failed")
    }
  }

  async function signup() {
    const email = document.getElementById("email").value
    const password = document.getElementById("password").value
    try {
      const result = await client.query(
        q.Create(
          q.Collection("users"),
          {
            data: {
              email: email,
              password: password
            }
          }
        )
      )
      console.log("Sign Up Successful")
    } catch (e) {
      console.log("Sign Up Failed")
    }
  }
</script>
</html>
