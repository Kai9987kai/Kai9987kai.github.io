
</html>



<html>
  <head>
    <title>Login to Fauna example</title>
  </head>
  <body>
    <h1>Login to Fauna example</h1>

    <form>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email">

      <label for="password">Password:</label>
      <input type="password" id="password" name="password">

      <button type="submit" onclick="login()">Login</button>
    </form>

    <p id="result"></p>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
  <script type="text/javascript">
    var faunadb = window.faunadb
    var q = faunadb.query
    var client = new faunadb.Client({
      secret: 'fnAE7vs_d8AA1GunxmKkAOPpSb6kA9WNaCZmrra-',
      endpoint: 'https://db.fauna.com/'
    })

    async function login() {
      const email = document.querySelector('input[name="email"]').value
      const password = document.querySelector('input[name="password"]').value
      const result = await client.query(
        q.Get(
          q.Match(
            q.Index('users_by_email'),
            email
          )
        )
      )
      if (result.data.password === password) {
        document.querySelector('#result').innerHTML = 'Login successful!'
      } else {
        document.querySelector('#result').innerHTML = 'Login failed.'
      }
    }
</script>
