<html>
  <head>
    <title>Login/Sign Up Form with FaunaDB</title>
  </head>
  <body>
    <h1>Login/Sign Up Form with FaunaDB</h1>
    <h2>Login</h2>
    <form id="login-form">
      <label for="email">Email:</label>
      <input type="email" id="email" required>
      <br><br>
      <label for="password">Password:</label>
      <input type="password" id="password" required>
      <br><br>
      <button type="button" onclick="login()">Login</button>
    </form>
    <hr>
    <h2>Sign Up</h2>
    <form id="signup-form">
      <label for="email">Email:</label>
      <input type="email" id="email" required>
      <br><br>
      <label for="password">Password:</label>
      <input type="password" id="password" required>
      <br><br>
      <button type="button" onclick="signup()">Sign Up</button>
    </form>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/faunadb@latest/dist/faunadb.js"></script>
  <script>
    const faunadb = window.faunadb;
    const q = faunadb.query;
    const client = new faunadb.Client({
      secret: 'fnAE7vs_d8AA1GunxmKkAOPpSb6kA9WNaCZmrra-',
      endpoint: 'https://db.fauna.com/'
    });
    async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    const result = await client.query(
      q.Get(
        q.Match(
          q.Index("users_by_email"),
          email
        )
      )
    );

    if (result.data.password === password) {
      alert("Login successful!");
    } else {
      alert("Incorrect email or password.");
    }
  } catch (error) {
    console.error(error);
    alert("An error occurred while logging in.");
  }
}

async function signup() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    const result = await client.query(
      q.Create(
        q.Collection("users"),
        {
          data: {
            email: email,
            password: password
          }
        }
      )
    );
    alert("Sign up successful!");
  } catch (error) {
    console.error(error);
    alert("An error occurred while signing up.");
  }
}
  </script>
</html>    
